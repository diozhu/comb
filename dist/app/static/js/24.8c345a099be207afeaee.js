webpackJsonp([24],{200:function(e,t,i){i(752);var n=i(43)(i(512),i(913),null,null);e.exports=n.exports},246:function(e,t,i){i(251);var n=i(43)(i(249),i(253),null,null);e.exports=n.exports},247:function(e,t,i){"use strict";var n=i(0),o=i.n(n),r=new o.a;t.a=r},248:function(e,t,i){"use strict";var n=i(268),o=i.n(n);i.d(t,"a",function(){return o.a})},249:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(26);t.default={name:"v-feed",props:{id:String,feedId:String,imgUrl:String,msgNum:String,title:String,subtitle:String,sex:String,age:String,desc:String,classes:String,iconFunc:Function},data:function(){return{}},computed:{feedImg:function(){return n.d(this.imgUrl)},feedClass:function(){return/^o_/.test(this.feedId)||/^s_/.test(this.feedId)?"square":/^g_/.test(this.feedId)?"hexagon":"circle"}},created:function(){},methods:{handleClick:function(e){this.iconFunc&&"function"==typeof this.iconFunc&&(e.stopPropagation(),e.preventDefault(),this.iconFunc(),this.$toast({message:"您是不是想去个人中心？",duration:1e3,position:"bottom"}))}}}},250:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,'.v-feed{height:1.81333rem;background:#fff;border-bottom:1px solid #dddee3;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-feed>div{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 auto;flex:0 0 auto}.v-feed>div:last-child{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.v-feed__img{width:1.44rem;height:1.44rem;margin-left:.26667rem;margin-right:.26667rem;position:relative;border:0}.v-feed__img img{width:100%}.v-feed__img.circle{border-radius:50%;overflow:hidden}.v-feed__img.hexagon{height:1.22667rem;overflow:hidden}.v-feed__img.hexagon:before{left:0;border-right:.32rem solid transparent}.v-feed__img.hexagon:after,.v-feed__img.hexagon:before{content:"";width:0;height:0;position:absolute;top:0;border-top:.61333rem solid #fff;border-bottom:.61333rem solid #fff}.v-feed__img.hexagon:after{right:0;border-left:.32rem solid transparent}.small{height:1.38667rem}.small .v-feed__img{width:.85333rem;height:.85333rem;margin-left:.4rem}.small .v-feed__tit{font-size:.37333rem}.small .v-feed__sub,.v-feed__num{font-size:.32rem}.v-feed__num{width:.48rem;height:.48rem;border-radius:50%;background:#ff3b2f;position:absolute;right:.16rem;top:-.10667rem;color:#fff;line-height:.48rem;text-align:center}.v-feed__num.mix{width:.26667rem;height:.26667rem;color:transparent;right:.21333rem;top:-.05333rem}.v-feed__con{margin-right:.26667rem;-webkit-box-orient:vertical;-webkit-flex-direction:column;flex-direction:column}.v-feed__con,.v-feed__con-info{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal}.v-feed__con-info{-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-feed__con-info>div:last-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1;-webkit-flex-basis:auto;flex-basis:auto}.v-feed__tit{font-size:.45333rem;line-height:1}.v-feed__sex{width:.32rem;height:.32rem;margin:.02667rem .13333rem;text-align:center;font-size:.32rem;line-height:.32rem;color:#ff88b2;border-radius:.05333rem}.v-feed__sex.icon-male{color:#4392ec}.v-feed__age{font-size:.26667rem;line-height:.45333rem;color:#777e8c}.v-feed__desc{text-align:right;font-size:.32rem;line-height:1;color:#8e8e93}.v-feed__sub{margin-top:.18667rem;font-size:.37333rem;line-height:1;color:#777e8c}',""])},251:function(e,t,i){var n=i(250);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("1e8d48d0",n,!0)},252:function(e,t,i){i(278);var n=i(43)(i(274),null,null,null);e.exports=n.exports},253:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-feed",class:[e.classes]},[i("div",{on:{click:e.handleClick}},[i("div",{staticClass:"v-feed__img",class:[e.feedClass]},[i("img",{attrs:{src:e.feedImg}})]),e.msgNum>0?i("i",{staticClass:"v-feed__num",class:[{mix:e.msgNum>9}],domProps:{textContent:e._s(e.msgNum)}}):e._e()]),e._v(" "),i("div",{staticClass:"v-feed__con"},[i("div",{staticClass:"v-feed__con-info"},[i("div",{staticClass:"v-feed__tit",domProps:{textContent:e._s(e.title)}}),e._v(" "),e.sex?i("div",{staticClass:"v-feed__sex icon",class:[{"icon-male":"1"==e.sex},{"icon-female":"2"==e.sex}]}):e._e(),e._v(" "),e.age?i("div",{staticClass:"v-feed__age",domProps:{textContent:e._s(e.age)}}):e._e(),e._v(" "),e.desc?i("div",{staticClass:"v-feed__desc",domProps:{textContent:e._s(e.desc)}}):e._e()]),e._v(" "),i("div",{staticClass:"v-feed__sub",domProps:{textContent:e._s(e.subtitle)}})])])},staticRenderFns:[]}},255:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"fading-circle",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}},created:function(){if(!this.$isServer){this.styleNode=document.createElement("style");var e=".circle-color-"+this._uid+" > div::before { background-color: "+this.spinnerColor+"; }";this.styleNode.type="text/css",this.styleNode.rel="stylesheet",this.styleNode.title="fading circle style",document.getElementsByTagName("head")[0].appendChild(this.styleNode),this.styleNode.appendChild(document.createTextNode(e))}},destroyed:function(){this.styleNode&&this.styleNode.parentNode.removeChild(this.styleNode)}}},256:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"snake",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}}}},257:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"triple-bounce",props:{size:Number,color:String},computed:{bounceStyle:function(){return{backgroundColor:this.spinnerColor}}}}},258:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["snake","triple-bounce","fading-circle"],o=function(e){return"[object Number]"==={}.toString.call(e)?(n.length<=e&&(console.warn("'"+e+"' spinner not found, use the default spinner."),e=0),n[e]):(-1===n.indexOf(e)&&(console.warn("'"+e+"' spinner not found, use the default spinner."),e=n[0]),e)};t.default={name:"mt-spinner",computed:{spinner:function(){return"spinner-"+o(this.type)}},components:{SpinnerSnake:i(266),SpinnerTripleBounce:i(267),SpinnerFadingCircle:i(265)},props:{type:{default:0},size:{type:Number,default:28},color:{type:String,default:"#ccc"}}}},259:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,'.v-spinner__fading-circle{width:.74667rem;height:.74667rem;position:relative}.v-spinner__fading-circle .circle{background:transparent;border:0;width:100%;height:100%;size:.74667rem;position:absolute}.v-spinner__fading-circle .circle:before{width:15%;height:15%;content:" ";display:block;margin:0 auto;size:.21333rem;border-radius:50%;-webkit-animation:v-spinner__fading-circle--opacity 1.2s infinite ease-in-out both;animation:v-spinner__fading-circle--opacity 1.2s infinite ease-in-out both}.v-spinner__fading-circle .circle.is-circle1{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.v-spinner__fading-circle .circle.is-circle1:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.v-spinner__fading-circle .circle.is-circle2{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.v-spinner__fading-circle .circle.is-circle2:before{-webkit-animation-delay:-1s;animation-delay:-1s}.v-spinner__fading-circle .circle.is-circle3{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.v-spinner__fading-circle .circle.is-circle3:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.v-spinner__fading-circle .circle.is-circle4{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.v-spinner__fading-circle .circle.is-circle4:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.v-spinner__fading-circle .circle.is-circle5{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.v-spinner__fading-circle .circle.is-circle5:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.v-spinner__fading-circle .circle.is-circle6{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.v-spinner__fading-circle .circle.is-circle6:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.v-spinner__fading-circle .circle.is-circle7{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.v-spinner__fading-circle .circle.is-circle7:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.v-spinner__fading-circle .circle.is-circle8{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.v-spinner__fading-circle .circle.is-circle8:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.v-spinner__fading-circle .circle.is-circle9{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.v-spinner__fading-circle .circle.is-circle9:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.v-spinner__fading-circle .circle.is-circle10{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.v-spinner__fading-circle .circle.is-circle10:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.v-spinner__fading-circle .circle.is-circle11{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.v-spinner__fading-circle .circle.is-circle11:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}.v-spinner__fading-circle .circle.is-circle12{-webkit-transform:rotate(1turn);transform:rotate(1turn)}.v-spinner__fading-circle .circle.is-circle12:before{-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes v-spinner__fading-circle--opacity{0%,39%,to{opacity:0;filter:alpha(opacity=0)}40%{opacity:1;filter:alpha(opacity=100)}}@keyframes v-spinner__fading-circle--opacity{0%,39%,to{opacity:0;filter:alpha(opacity=0)}40%{opacity:1;filter:alpha(opacity=100)}}',""])},260:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-spinner__triple-bounce .bounce1,.v-spinner__triple-bounce .bounce2,.v-spinner__triple-bounce .bounce3{width:.16rem;height:.16rem;background-color:#acb3bf;display:inline-block;border-radius:100%;-webkit-animation:v-spinner__triple-bounce--scale 1.4s infinite ease-in-out both;animation:v-spinner__triple-bounce--scale 1.4s infinite ease-in-out both}.v-spinner__triple-bounce .bounce1{-webkit-animation-delay:-.32s;animation-delay:-.32s}.v-spinner__triple-bounce .bounce2{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes v-spinner__triple-bounce--scale{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes v-spinner__triple-bounce--scale{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},261:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-spinner__snake{width:.74667rem;height:.74667rem;-webkit-animation:v-spinner__snake--rotate .8s infinite linear;animation:v-spinner__snake--rotate .8s infinite linear;border-width:.05333rem;border-style:solid;border-radius:50%}@-webkit-keyframes v-spinner__snake--rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes v-spinner__snake--rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},262:function(e,t,i){var n=i(259);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("ad680f12",n,!0)},263:function(e,t,i){var n=i(260);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("2dd5026d",n,!0)},264:function(e,t,i){var n=i(261);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("da457690",n,!0)},265:function(e,t,i){i(262);var n=i(43)(i(255),i(269),null,null);e.exports=n.exports},266:function(e,t,i){i(264);var n=i(43)(i(256),i(272),null,null);e.exports=n.exports},267:function(e,t,i){i(263);var n=i(43)(i(257),i(271),null,null);e.exports=n.exports},268:function(e,t,i){var n=i(43)(i(258),i(270),null,null);e.exports=n.exports},269:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["v-spinner__fading-circle circle-color-"+e._uid]},e._l(12,function(e){return i("div",{staticClass:"circle",class:["is-circle"+e]})}))},staticRenderFns:[]}},270:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"v-spinner"},[i(e.spinner,{tag:"component"})],1)},staticRenderFns:[]}},271:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-spinner__triple-bounce"},[i("div",{staticClass:"bounce1"}),e._v(" "),i("div",{staticClass:"bounce2"}),e._v(" "),i("div",{staticClass:"bounce3"})])}]}},272:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"v-spinner__snake",style:{"border-top-color":"transparent","border-right-color":e.spinnerColor,"border-left-color":e.spinnerColor,"border-bottom-color":e.spinnerColor}})},staticRenderFns:[]}},274:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(44);t.default={name:"v-text",props:{value:String,limit:{type:Number,default:0},expandEnabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){var e="limit"+this.limit;i.i(n.d)(this.$el,e)?i.i(n.c)(this.$el,e):i.i(n.b)(this.$el,e)}},render:function(e){var t={attrs:{id:"vText"+this._uid},class:["v-text",1===this.limit?"single":this.limit?"limit"+this.limit:""]};return this.expandEnabled&&(t.on={click:this.handleClick}),e("p",t,this.value)}}},276:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-text{font-size:.4rem;line-height:1.2;text-align:justify}.v-text.single{white-space:nowrap}.v-text.single,.v-text[class*=limit]{overflow:hidden;text-overflow:ellipsis}.v-text[class*=limit]{text-align:left;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.v-text.limit2{-webkit-line-clamp:2}.v-text.limit3{-webkit-line-clamp:3}.v-text.limit4{-webkit-line-clamp:4}.v-text.limit5{-webkit-line-clamp:5}.v-text .re{display:inline-table;font-size:.4rem;line-height:.50667rem;color:#007aff}",""])},278:function(e,t,i){var n=i(276);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("6f94e38c",n,!0)},281:function(e,t,i){i(291);var n=i(43)(i(289),i(292),null,null);e.exports=n.exports},282:function(e,t,i){"use strict";var n=i(0),o=i.n(n),r="@@Scroll",a=function(e,t){var i=void 0,n=void 0,o=void 0,r=void 0,a=void 0,s=function(){e.apply(r,a),n=i};return function(){if(r=this,a=arguments,i=Date.now(),o&&(clearTimeout(o),o=null),n){var e=t-(i-n);e<0?s():o=setTimeout(function(){s()},e)}else s()}},s=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},l=o.a.prototype.$isServer?{}:document.defaultView.getComputedStyle,c=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var i=l(t).overflowY;if("scroll"===i||"auto"===i)return t;t=t.parentNode}return window},d=function(e){return e===window?document.documentElement.clientHeight:e.clientHeight},u=function(e){return e===window?s(window):e.getBoundingClientRect().top+s(window)},m=function(e){for(var t=e.parentNode;t;){if("HTML"===t.tagName)return!0;if(11===t.nodeType)return!1;t=t.parentNode}return!1},h=function(){if(!this.binded){this.binded=!0;var e=this,t=e.el,i=t.getAttribute("scroll-tombstone"),n=Boolean(e.vm[i]);e.isBottom=!1,e.scrollEventTarget=c(t),!0!==n&&(e.scrollListener=a(f.bind(e),50),e.scrollEventTarget.addEventListener("scroll",e.scrollListener)),console.log("v-scroll.doBind: directive.scrollEventTarget = ",this.vm,e.scrollEventTarget.className),this.vm.$set(this.vm,"scrollTarget",e.scrollEventTarget);var o=t.getAttribute("scroll-disabled"),r=!1;o&&(this.vm.$watch(o,function(t){e.disabled=t,!t&&e.immediateCheck&&f.call(e)}),r=Boolean(e.vm[o])),e.disabled=r;var s=t.getAttribute("scroll-distance"),l=0;s&&(l=Number(e.vm[s]||s),isNaN(l)&&(l=0)),e.distance=l;var d=t.getAttribute("scroll-immediate-check"),u=!1;d&&(u=Boolean(e.vm[d])),e.immediateCheck=u,u&&f.call(e);var m=t.getAttribute("scroll-listen-for-event");m&&e.vm.$on(m,function(){f.call(e)})}},f=function(e){var t=this.scrollEventTarget,i=this.el,n=this.distance;if(!0===e||!this.disabled){var o=s(t),r=o+d(t),a=!1,l=i.getAttribute("scroll-scrolling-func");if(t.scrollHeight<r||t.scrollHeight===r?this.isBottom=!0:this.isBottom=!1,l&&this.vm[l]&&"function"==typeof this.vm[l]&&this.vm[l](t,o),t===i)a=t.scrollHeight-r<=n;else{a=r+n>=u(i)-u(t)+i.offsetHeight+o}a&&this.expression&&(console.log("[v-scroll.js] ==> doCheck.trigger..."),this.expression())}},p={bind:function(e,t,i){e[r]={el:e,vm:i.context,expression:t.value};var n=arguments;e[r].vm.$on("hook:mounted",function(){e[r].vm.$nextTick(function(){if(m(e))return void h.call(e[r],n);e[r].bindTryCount=0;!function t(){e[r].bindTryCount>10||(e[r].bindTryCount++,m(e)?h.call(e[r],n):setTimeout(t,50))}()})})},unbind:function(e){e[r].scrollEventTarget.removeEventListener("scroll",e[r].scrollListener)}},g=function(e){e.directive("Scroll",p)};!o.a.prototype.$isServer&&window.Vue&&(window.Scroll=p,o.a.use(g)),p.install=g,t.a=p},283:function(e,t,i){i(286);var n=i(43)(i(284),i(287),null,null);e.exports=n.exports},284:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(76),o=i.n(n),r=i(0),a=i.n(r),s=i(282),l=i(248),c=i(27),d=i(247);a.a.use(s.a),t.default={name:"v-scroll",props:{from:String,id:String,value:{type:Array,default:function(){return[]}},func:Function,endFunc:Function,scrollingFunc:Function,funcType:{type:String,default:"page"},enabled:{type:Boolean,default:!0},pullAbled:{type:Boolean,default:!1},toper:{type:Boolean,default:!1},scrollDistance:{type:Number,default:100},tombstone:{type:Boolean,default:!1},hasDataParent:{type:Boolean,default:!0},isGoInit:{type:Boolean,default:!0},scrollEndFlowTag:{type:Boolean,default:!1},endFuncEnable:{type:Boolean,default:!1}},components:{"v-spinner":l.a},data:function(){return{pageHeight:0,uid:this._uid,currentValue:this.value,goTopTag:!1,oTime:-1,pageSize:c.a.LIMIT,offset:0,limit:c.a.LIMIT,page:1,pageNum:c.a.LIMIT,hasMore:!0,hasMoreTotal:!0,isLoading:!1,scrollEndTxt:!1,refreshTag:!1,hasData:!0,isEnabled:this.enabled,scrollTarget:null}},computed:{isShowText:function(){return!(!this.hasData||this.hasMore)}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},enabled:function(e){this.$logger.log("v-scroll.watch.enabled! "),this.isEnabled=e,!0===e&&this.value.length<=0&&this.refreshList()}},created:function(){this.$logger.log("[v-scroll]."+this._uid+".created..."),d.a.$on("v-scroll.refreshList",this.refreshList),d.a.$on("v-scroll.getList",this.getList),this.$route.meta&&this.$route.meta.keepAlive||this.init()},mounted:function(){this.pageHeight=window.screen.height,this.$logger.log("[v-scroll]."+this._uid+".mounted...",this.$route.name,this.$parent.$route.name)},activated:function(){if(this.$logger.log("*[v-scroll]."+this._uid+".activated...",this._inactive,this.$router.direct()),this.isEnabled=this.enabled,this.$router.direct()){if(!this.isGoInit)return!1;this.init()}},deactivated:function(){this.$logger.log("*[v-scroll]."+this._uid+".deactivated...",this._inactive),this.isEnabled=!1},beforeDestroy:function(){this.$logger.log("*[v-scroll]."+this._uid+".beforeDestroy...")},methods:{reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetData,i=void 0===t||t,n=e.goTop,o=void 0===n||n;this.oTime=-1,this.pageSize=c.a.LIMIT,this.offset=0,this.limit=c.a.LIMIT,this.page=1,this.pageNum=c.a.LIMIT,this.hasMore=!0,this.hasData=!0,this.scrollEndTxt=!1,i&&(this.currentValue=[]),o&&this.scrollTarget&&(this.scrollTarget.scrollTop=0),this.hasMoreTotal=!0},init:function(){this.$logger.log("[v-scroll]."+this._uid+".init..."),this.reset(),this.tombstone||this.getList()},goTop:function(){var e=this.scrollTarget;this.$logger.log("[v-scroll]."+this._uid+".getList.after: ",e.scrollHeight,e.offsetHeight),e===window?window.scrollTo(0,0):e.scrollTop>0&&(e.scrollTop-=1e3,setTimeout(this.goTop,30))},getList:function(){var e=this;if(this.isEnabled){!this.scrollEndTxt&&this.scrollTarget&&(this.scrollEndTxt=!!this.scrollEndFlowTag||this.scrollTarget.scrollHeight>5*this.scrollTarget.offsetHeight/4);var t=this.scrollTarget;if("function"==typeof this.func){if("function"==typeof this.endFunc&&!this.hasMore&&this.hasMoreTotal&&this.endFuncEnable)try{if(this.isLoading)return;if(this.isEnding)return;this.isEnding=!0,this.isLoading=!0,this.endFunc().then(function(t){t?(e.$logger.log("[v-scroll]."+e._uid+".endFunc.after: ",t),e.reset({resetData:!1,goTop:!1})):e.hasMoreTotal=!1,e.isEnding=!1,e.isLoading=!1})}catch(e){this.$logger.error("[v-scroll]."+this._uid+".endFunc.after.error: "+e)}if(this.hasMore){this.$logger.log("[v-scroll]."+this._uid+".getList.befor: ",t);var i=null;if("section"===this.funcType?i=this.getListBySection:"limit"===this.funcType?i=this.getListByLimit:"page"===this.funcType?i=this.getListByPage:"time"===this.funcType&&(i=this.getListByTime),"function"==typeof i)try{i().then(function(t){t&&t.length&&(e.currentValue=e.currentValue.concat(t)),e.scrollTarget&&(e.$logger.log("[v-scroll]."+e._uid+".getList.after: ",e.scrollTarget.scrollHeight,e.scrollTarget.offsetHeight),e.$nextTick(function(){e.scrollEndTxt=!!e.scrollEndFlowTag||e.scrollTarget.scrollHeight>5*e.scrollTarget.offsetHeight/4})),e.endFunc&&"function"==typeof e.endFunc&&(e.currentValue&&e.currentValue.length>0?e.hasData=!0:e.hasData=!1)})}catch(e){this.$logger.error("[v-scroll]."+this._uid+".getList.after.error: "+e)}}}}},getListBySection:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,n=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListBySection...");try{this.isLoading=!0;var r=this.offset,a=this.offset+this.limit;return this.tombstone&&(this.offset+=this.limit),this.func({offset:r,limit:a,refresh:n}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListBySection.success: "+t,e.offset,e.limit),t&&t.length>0?(e.hasData=!0,e.tombstone||(e.offset+=t.length)):e.offset<=0&&(e.hasData=!1),(!t||t.length<e.limit)&&(e.hasMore=!1),e.isLoading=!1,o.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListBySection.error: "+t),e.isLoading=!1,o.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListBySection.error: "+e),this.isLoading=!1,o.a.reject(e)}},getListByLimit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,n=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListByLimit...");try{return this.isLoading=!0,this.func({offset:this.offset,limit:this.limit,refresh:n}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListByLimit.success: "+t,e.offset,e.limit),t&&t.length>0?(e.hasData=!0,e.offset+=t.length):e.offset<=0&&(e.hasData=!1),(!t||t.length<e.limit)&&(e.hasMore=!1),e.isLoading=!1,o.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListByLimit.error: "+t),e.isLoading=!1,o.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListByLimit.error: "+e),this.isLoading=!1,o.a.reject(e)}},getListByPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,n=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListByPage...",this.page,this.pageNum);try{return this.isLoading=!0,this.func({page:this.page,pageNum:this.pageNum,refresh:n}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListByPage.success: "+t),t&&t.length>0?(e.hasData=!0,e.page+=1):e.page<=1&&(e.hasData=!1),(!t||t.length<e.pageNum)&&(e.hasMore=!1),e.isLoading=!1,o.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListByPage.error: "+t),e.isLoading=!1,o.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListByPage.error: "+e),this.isLoading=!1,o.a.reject(e)}},getListByTime:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,n=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListByTime...",this.oTime,this.pageSize);var r=this;try{return r.isLoading=!0,r.func({oTime:r.oTime,pageSize:r.pageSize,refresh:n}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.res,n=void 0===i?[]:i,a=t.last,s=void 0===a?-1:a;return n&&n.length>0?(r.hasData=!0,r.oTime=s):e.currentValue.length||(r.hasData=!1),(!n||n.length<10)&&(r.hasMore=!1),r.isLoading=!1,o.a.resolve(n,s)}).catch(function(e){return r.isLoading=!1,o.a.reject(e)})}catch(e){return r.isLoading=!1,o.a.reject(e)}},refreshList:function(){var e=this;if(this.isEnabled&&!this._isDestroyed&&(this.$logger.log("!!!v-scroll."+this._uid+".refreshList..."),"function"==typeof this.func)){this.refreshTag=!0;var t=null;if("section"===this.funcType?t=this.getListBySection:"limit"===this.funcType?t=this.getListByLimit:"page"===this.funcType?t=this.getListByPage:"time"===this.funcType&&(t=this.getListByTime),"function"==typeof t)try{this.reset({resetData:!1,goTop:!0}),t({refresh:!0}).then(function(t){e.$logger.log("[v-scroll]."+e._uid+".refreshList.after: ",e.currentValue.length),t&&t.length?e.currentValue=t:e.currentValue=[],e.refreshTag=!1}).then(function(t){e.scrollTarget&&(e.$logger.log("[v-scroll]."+e._uid+".refreshList.after: ",e.scrollTarget.scrollHeight,e.scrollTarget.offsetHeight),e.scrollEndTxt=!!e.scrollEndFlowTag||e.scrollTarget.scrollHeight>5*e.scrollTarget.offsetHeight/4)}).catch(function(t){e.refreshTag=!1,e.$logger.error("[v-scroll]."+e._uid+".refreshList.after.error: "+t)})}catch(e){this.refreshTag=!1,this.$logger.error("[v-scroll]."+this._uid+".refreshList.after.error: "+e)}}}}}},285:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-scroll{height:100%}.v-scroll-container{height:100%;overflow:scroll;-webkit-overflow-scrolling:touch}.v-scroll-refresh{width:100%;height:.96rem;position:absolute;padding:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-scroll-refresh .v-spinner{text-align:center}.v-scroll-bottom{height:1.2rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-scroll-bottom .v-spinner{text-align:center}.v-scroll-bottom-txt{text-align:center;font-size:.4rem;color:#c1c1c1}.v-scroll-empty{width:100%;min-height:2.66667rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-scroll-top{width:1.01333rem;height:1.01333rem;position:fixed;z-index:99;bottom:2.26667rem;right:.58667rem;font-size:.61333rem;text-align:center;line-height:1.01333rem;color:#fff;border-radius:50%;background:#ccc;box-shadow:0 0 .08rem #999}.null-search-box{padding:0 0 1.06667rem;background:#fff;color:#777e8c;position:fixed;top:4.82667rem;width:100%}.null-search-box .text{font-size:.37333rem;color:#777e8c;letter-spacing:0;line-height:22px;text-align:center}.null-search-box .text .error-img{text-align:center;padding-bottom:.93333rem}.null-search-box .text .error-img img{width:1.86667rem;height:1.86667rem}.null-search-box .text .error-content{color:#4a4a4a;font-size:.42667rem;line-height:.58667rem;text-align:center}",""])},286:function(e,t,i){var n=i(285);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("55b94912",n,!0)},287:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEnabled,expression:"isEnabled"}],staticClass:"v-scroll"},[i("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.getList,expression:"getList"},{name:"scroll-position",rawName:"v-scroll-position"}],ref:"container",staticClass:"v-scroll-container",attrs:{id:"combScroll_"+e._uid,"scroll-disabled":"isLoading","scroll-distance":"scrollDistance","scroll-enabled":"isEnabled","scroll-tombstone":"tombstone","scroll-scrolling-func":"scrollingFunc"}},[i("div",{ref:"content",staticClass:"v-scroll-content"},[e._t("default")],2),e._v(" "),"function"==typeof e.endFunc||!e.refreshTag&&(e.isLoading||e.isShowText&&e.scrollEndTxt&&e.currentValue.length>0)?i("div",{staticClass:"v-scroll-bottom"},[i("transition",{attrs:{name:"fade"}},[i("v-spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{color:"#BBBAC2",type:"triple-bounce"}})],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading&&e.isShowText&&e.scrollEndTxt&&e.currentValue.length>0,expression:"!isLoading && isShowText && scrollEndTxt && currentValue.length > 0"}],staticClass:"v-scroll-bottom-txt"},[e._t("endText",[e._v("· 我是有底线的 ·")])],2)])],1):e._e(),e._v(" "),!e.hasData&&e.currentValue.length<=0?i("div",{staticClass:"v-scroll-empty"},[e._t("empty",[e._v("暂无数据")])],2):e._e()]),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.toper&&e.goTopTag,expression:"toper && goTopTag"}],staticClass:"v-scroll-top icon icon-top",on:{click:e.goTop}})])],1)},staticRenderFns:[]}},288:function(e,t,i){"use strict";var n=i(0),o=i.n(n),r=i(27),a=i(28),s=i(77),l=i(16),c=i(80),d=i(81);if(void 0===u)var u=d.a;var m={currentItem:null,setCurrentItem:function(e){e&&(this.currentItem=e)},getCurrentItem:function(){return this.currentItem},clearCurrentItem:function(){this.currentItem=null},retry_num:0,retry_max:3,getToken:function(){if(!s.d||"function"!=typeof s.d)return u.reject("无效token，请在api中实现vGetMicroBbsToken方法");var e=this;return this.retry_num<this.retry_max?(this.retry_num+=1,s.d().then(function(t){return e.retry_num=0,u.resolve(t)})):u.reject("token尝试超过限制，请刷新页面重试")},getForumList:function(){a.a.log("[BBS].getForumList：");var e=this,t=r.a.BBS_URL+"/forum/list",i={appId:r.a.BBS_APPID};return r.a.BBS_TOKEN?(i.appId=r.a.BBS_APPID,i.token=r.a.BBS_TOKEN,i.toonType=r.a.toonType||100,o.a.http.post(t,i).then(function(t){var i=t.data;return a.a.log("[BBS].getForumList.SUCCESS: ",i),i.meta&&1001===i.meta.code?e.getToken().then(function(t){return r.a.BBS_TOKEN=t,e.getForumList()}):i.meta&&0!==i.meta.code?u.reject(i):u.resolve(i.data.dataList)})):this.getToken().then(function(t){return r.a.BBS_TOKEN=t,e.getForumList()})},getTopicList:function(e){var t=e.forumId,i=void 0===t?0:t,n=e.page,s=void 0===n?1:n,c=e.pageNum,d=void 0===c?r.a.BBS_LIMIT:c;a.a.log("[BBS].getTopicList：");var m=this,h=r.a.BBS_URL+"/topic/list",f={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100,loginUserId:l.a.getters.userInfo.id};return r.a.BBS_TOKEN?(f.forumIds=i,f.page=s,f.pageLimit=d,o.a.http.post(h,f).then(function(e){var t=e.data;return a.a.log("[BBS].getTopicList.SUCCESS: ",t),t.meta&&1001===t.meta.code?m.getToken().then(function(e){return r.a.BBS_TOKEN=e,m.getTopicList({forumId:i,page:s,pageNum:d})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.data.dataList)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,m.getTopicList({forumId:i,page:s,pageNum:d})})},getTopicSearch:function(e){var t=e.forumId,i=void 0===t?0:t,n=e.keyword,s=void 0===n?"":n,c=e.page,d=void 0===c?1:c,m=e.pageNum,h=void 0===m?r.a.BBS_LIMIT:m;a.a.log("[BBS].getTopicSearch：");var f=this,p=r.a.BBS_URL+"/topic/search",g={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100,loginUserId:l.a.getters.userInfo.id};return r.a.BBS_TOKEN?(g.forumIds=i,g.keyword=s,g.page=d,g.pageLimit=h,o.a.http.post(p,g).then(function(e){var t=e.data;return a.a.log("[BBS].getTopicSearch.SUCCESS: ",t),t.meta&&1001===t.meta.code?f.getToken().then(function(e){return r.a.BBS_TOKEN=e,f.getTopicSearch({forumId:i,keyword:s,page:d,pageNum:h})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.data.dataList)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,f.getTopicSearch({forumId:i,keyword:s,page:d,pageNum:h})})},getTopicDetail:function(e){var t=e.forumId,i=void 0===t?0:t,n=e.topicId,s=void 0===n?0:n;a.a.log("[BBS].getTopicDetail：");var c=this,d=r.a.BBS_URL+"/topic/detail",m={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100,loginUserId:l.a.getters.userInfo.id};return r.a.BBS_TOKEN?(m.forumIds=parseInt(i)||0,m.id=parseInt(s)||0,o.a.http.post(d,m).then(function(e){var t=e.data;return a.a.log("[BBS].getTopicDetail.SUCCESS: ",t),t.meta&&1001===t.meta.code?c.getToken().then(function(e){return r.a.BBS_TOKEN=e,c.getTopicDetail({forumId:i,topicId:s})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.data)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,c.getTopicDetail({forumId:i,topicId:s})})},addTopic:function(e){var t=e.forumId,i=void 0===t?0:t,n=e.title,s=void 0===n?"":n,c=e.content,d=void 0===c?"":c,m=e.pics,h=void 0===m?[]:m,f=e.poi,p=void 0===f?{longitude:116.123456,latitude:39.654321}:f;if(a.a.log("[BBS].addTopic："),a.a.log("[BBS].addTopic：",h),!i)return u.reject("请选择板块");if(!s)return u.reject("请输入标题");if(!d)return u.reject("请输内容");var g=this,v=r.a.BBS_URL+"/topic/add",b={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(b.forumId=parseInt(i)||0,b.title=s,b.content=d,b.userInfo={userId:l.a.getters.userInfo.id,name:l.a.getters.userInfo.title,subtitle:l.a.getters.userInfo.subtitle,avatar:l.a.getters.userInfo.avatarId},b.poi=p,h&&h.length>0&&(b.pics=[],h.forEach(function(e){b.pics.push({imageType:e.imageType,size:e.size,url:e.url,width:e.width,height:e.height})})),o.a.http.post(v,b).then(function(e){var t=e.data;return a.a.log("[BBS].addTopic.SUCCESS: ",t),t.meta&&1001===t.meta.code?g.getToken().then(function(e){return r.a.BBS_TOKEN=e,g.addTopic({forumId:i,title:s,content:d,pics:h})}):t.meta&&0!==t.meta.code?u.reject(t.meta.message):(g.setCurrentItem({OPT:1,id:t.topicId||0,forumId:b.forumId,title:b.title,abstract:b.content,pics:b.pics,userInfo:b.userInfo,poi:b.poi,addtm:new Date}),u.resolve(t))})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,g.addTopic({forumId:i,title:s,content:d,pics:h})})},delTopic:function(e){var t=e.topicId,i=void 0===t?0:t;a.a.log("[BBS].delTopic：");var n=this,s=r.a.BBS_URL+"/topic/delete",c={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(c.id=parseInt(i),c.userId=l.a.getters.userInfo.id,o.a.http.post(s,c).then(function(e){var t=e.data;return a.a.log("[BBS].delTopic.SUCCESS: ",t),t.meta&&1001===t.meta.code?n.getToken().then(function(e){return r.a.BBS_TOKEN=e,n.delTopic({topicId:i})}):t.meta&&0!==t.meta.code?u.reject(t.meta.message):(n.setCurrentItem({OPT:0,id:c.id}),u.resolve(t))})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,n.delTopic({topicId:i})})},getBannerList:function(e){var t=e.forumId,i=void 0===t?0:t;a.a.log("[BBS].getBannerList：");var n=this,s=r.a.BBS_URL+"/forum/banner",l={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(l.id=i,o.a.http.post(s,l).then(function(e){var t=e.data;return a.a.log("[BBS].getBannerList.SUCCESS: ",t),t.meta&&1001===t.meta.code?n.getToken().then(function(e){return r.a.BBS_TOKEN=e,n.getBannerList({forumId:i})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.data.dataList)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,n.getBannerList({forumId:i})})},getComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,n=e.page,s=void 0===n?1:n,c=e.pageNum,d=void 0===c?r.a.BBS_LIMIT:c,m=this,h=r.a.BBS_URL+"/v1/comment/list",f={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(f.topicId=parseInt(i),f.loginUserId=l.a.getters.userInfo.id,f.page=s,f.pageLimit=d,f.appId?o.a.http.post(h,f).then(function(e){var t=e.data;return a.a.log("[BBS].getComments.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return r.a.BBS_TOKEN=e,m.getComments({topicId:i,page:s,pageNum:d})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.data.dataList)}):new u(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,m.getComments({topicId:i,page:s,pageNum:d})})},getPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,n=e.commentId,s=void 0===n?0:n,l=e.page,c=void 0===l?1:l,d=e.pageNum,m=void 0===d?r.a.BBS_LIMIT:d,h=this,f=r.a.BBS_URL+"/v1/like/list",p={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(p.topicId=parseInt(i),p.cId=parseInt(s),p.page=c,p.pageLimit=m,p.appId?o.a.http.post(f,p).then(function(e){var t=e.data;return a.a.log("[BBS].getPraise.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return r.a.BBS_TOKEN=e,h.getPraise({topicId:i,commentId:s,page:c,pageNum:m})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.data.dataList)}):new u(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,h.getPraise({topicId:i,commentId:s,page:c,pageNum:m})})},addComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,n=e.content,s=void 0===n?"":n,c=e.toId,d=void 0===c?0:c,m=e.toUserId,h=void 0===m?0:m,f=this,p=r.a.BBS_URL+"/v1/comment/add",g={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(g.topicId=parseInt(i),g.userInfo={userId:l.a.getters.userInfo.id,name:l.a.getters.userInfo.title,subtitle:l.a.getters.userInfo.subtitle,avatar:l.a.getters.userInfo.avatarId},g.content=s.replace(/(^\s*)|(\s*$)/g,""),g.toId=parseInt(d),g.toUserId=parseInt(h),g.appId?o.a.http.post(p,g).then(function(e){var t=e.data;return a.a.log("[BBS].addComment.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return r.a.BBS_TOKEN=e,f.addComment({topicId:i,content:s,toId:d,toUserId:h})}):t.meta&&0!==t.meta.code?u.reject(t):(f.setCurrentItem({OPT:1}),u.resolve(t))}):new u(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,f.addComment({topicId:i,content:s,toId:d,toUserId:h})})},delComment:function(e){var t=e.topicId,i=void 0===t?0:t,n=e.commentId,s=void 0===n?0:n;a.a.log("[BBS].delComment：");var c=this,d=r.a.BBS_URL+"/v1/comment/del",m={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(m.topicId=parseInt(i),m.cId=parseInt(s),m.userId=l.a.getters.userInfo.id,o.a.http.post(d,m).then(function(e){var t=e.data;return a.a.log("[BBS].delComment.SUCCESS: ",t),t.meta&&1001===t.meta.code?c.getToken().then(function(e){return r.a.BBS_TOKEN=e,c.delComment({topicId:i,commentId:s})}):t.meta&&0!==t.meta.code?u.reject(t.meta.message):(c.setCurrentItem({OPT:0}),u.resolve(t))})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,c.delComment({topicId:i,commentId:s})})},addPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,n=e.toId,a=void 0===n?0:n,s=this,c=r.a.BBS_URL+"/v1/like/add",d={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(d.topicId=parseInt(i),d.userInfo={userId:l.a.getters.userInfo.id,name:l.a.getters.userInfo.title,subtitle:l.a.getters.userInfo.subtitle,avatar:l.a.getters.userInfo.avatarId},d.toId=parseInt(a),o.a.http.post(c,d).then(function(e){var t=e.data;return t.meta&&1001===t.meta.code?s.getToken().then(function(e){return r.a.BBS_TOKEN=e,s.addPraise({topicId:i,toId:a})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.Res)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,s.addPraise({topicId:i,toId:a})})},delPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,n=e.commentId,a=void 0===n?0:n,s=this,c=r.a.BBS_URL+"/v1/like/del",d={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(d.topicId=parseInt(i),d.userId=l.a.getters.userInfo.id,d.cId=parseInt(a),o.a.http.post(c,d).then(function(e){var t=e.data;return t.meta&&1001===t.meta.code?s.getToken().then(function(e){return r.a.BBS_TOKEN=e,s.delPraise({topicId:i,commentId:a})}):t.meta&&0!==t.meta.code?u.reject(t):u.resolve(t.Res)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,s.delPraise({topicId:i,commentId:a})})},checkFeed:function(){var e=this;if(l.a.getters.userInfo.feedId)return u.resolve();i.i(c.a)({functionType:"1"},"card/chooseCard",function(t){e.$logger.log("获取名片信息：：：：",t),e.feedId=t.feedId,t&&t.feedId&&o.a.http.get("/user/feed?feedId="+encodeURIComponent(t.feedId),function(e){return 0===e.code?u.resolve():u.reject("error")})},function(){return u.reject("未返回信息")})}};t.a=m},289:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-cell",props:{to:[String,Object],icon:String,reverse:Boolean,title:String,label:String,isLink:Boolean,value:{},desc:String},computed:{href:function(){var e=this;if(this.to&&!this.added&&this.$router){var t=this.$router.match(this.to);return this.$logger.log("v-cell.computed.href: ",t),t.matched.length?(this.$nextTick(function(){e.added=!0,e.$el.addEventListener("click",e.handleClick)}),t.path):this.to}return this.to}},created:function(){this.$logger.log("v-cell.created: ")},methods:{handleClick:function(e){this.$logger.log("v-cell.handleClick: "),e.preventDefault(),this.$router.push(this.to)}}}},290:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,'.v-cell{box-sizing:border-box;color:inherit;min-height:1.17333rem;display:block;overflow:hidden;position:relative;text-decoration:none}.v-cell>div{border-bottom:1px solid #dddee3}.v-cell:last-child{border-bottom:0}.v-cell img{vertical-align:middle}.v-cell:first-child .v-cell__wrapper{background-origin:border-box}.v-cell__wrapper{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;align-items:stretch;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;font-size:.4rem;line-height:1;min-height:inherit;overflow:hidden;padding:0 .4rem 0 0;margin:0 0 0 .4rem}.v-cell__mask:after{background-color:#000;content:" ";opacity:0;top:0;right:0;bottom:0;left:0;position:absolute}.v-cell__mask:active:after{opacity:.1}.v-cell__text{vertical-align:middle;font-size:.4rem}.v-cell__label{color:#888;display:block;font-size:.32rem;margin-top:.16rem}.v-cell__title{text-align:left;min-width:1.6rem;-webkit-flex-shrink:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-basis:auto;flex-basis:auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-cell__title .icon{margin-right:.21333rem;font-size:.4rem}.v-cell__title .icon.disk{width:.8rem;height:.8rem;background:#007aff;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:.08rem}.v-cell__title.reverse{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.v-cell__title.reverse,.v-cell__title.reverse .v-cell__text,.v-cell__title.reverse>div{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1}.v-cell__title.reverse .icon{margin:0}.v-cell__value{position:relative;color:#888;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-left:.26667rem;-webkit-flex-shrink:1;flex-shrink:1;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-flex-basis:auto;flex-basis:auto}.v-cell__value span{font-size:.4rem}.v-cell__value>div{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.v-cell__value input{width:100%;min-height:.8rem;padding-left:.26667rem;font-size:.4rem;line-height:1;overflow:hidden}.v-cell__value.is-link{margin-right:.4rem}.v-cell__left{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.v-cell__left,.v-cell__right{position:absolute;height:100%}.v-cell__right{right:0;top:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.v-cell__allow-right:after{border:2px solid #3e3a39;border-bottom-width:0;border-left-width:0;content:" ";top:50%;right:.4rem;position:absolute;width:.18667rem;height:.18667rem;-webkit-transform:translateY(-50%) rotate(45deg);transform:translateY(-50%) rotate(45deg)}',""])},291:function(e,t,i){var n=i(290);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("06a21fbe",n,!0)},292:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"v-cell",attrs:{href:e.href}},[i("div",{staticClass:"v-cell__wrapper"},[e.title||e.$slots.title?i("div",{staticClass:"v-cell__title",class:[{reverse:e.reverse}]},[e._t("icon",[e.icon?i("i",{staticClass:"app icon",class:"icon-"+e.icon}):e._e()]),e._v(" "),e._t("title",[i("span",{staticClass:"v-cell__text"},[e._v("\n                    "+e._s(e.title)+"\n                    "),e.label?i("span",{staticClass:"v-cell__label",domProps:{textContent:e._s(e.label)}}):e._e()])])],2):e._e(),e._v(" "),e.value||e.desc||e.$slots.default?i("div",{staticClass:"v-cell__value",class:{"is-link":e.isLink}},[e._t("default",[i("span",{domProps:{textContent:e._s(e.value)}}),e._v(" "),i("span",{domProps:{textContent:e._s(e.desc)}})])],2):e._e()]),e._v(" "),e.$slots.right?i("div",{staticClass:"v-cell__right"},[e._t("right")],2):e._e(),e._v(" "),e.isLink?i("i",{staticClass:"v-cell__allow-right"}):e._e()])},staticRenderFns:[]}},293:function(e,t,i){"use strict";t.a={bind:function(e,t,i){var n=function(t){i.context&&!e.contains(t.target)&&i.context[e["@@clickoutsideContext"].methodName]()};e["@@clickoutsideContext"]={documentHandler:n,methodName:t.expression,arg:t.arg||"click"},document.addEventListener(e["@@clickoutsideContext"].arg,n)},update:function(e,t){e["@@clickoutsideContext"].methodName=t.expression},unbind:function(e){document.removeEventListener(e["@@clickoutsideContext"].arg,e["@@clickoutsideContext"].documentHandler)},install:function(e){e.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},294:function(e,t,i){i(298);var n=i(43)(i(296),i(299),null,null);e.exports=n.exports},295:function(e,t,i){"use strict";var n=i(82),o=i.n(n),r=i(0),a=i.n(r),s=i(26),l="@@Validator",c=function(){this&&(this.field=this.vm.field||this.vm._uid,this.field&&(a.a.$validation[this.field]||(a.a.$validation[this.field]=a.a.prototype.$validation[this.field]={}),this.expression.required&&u.call(this),(this.expression.minLength||this.expression.maxLength)&&h.call(this),this.expression.mail&&p.call(this),this.expression.tel&&v.call(this),this.expression.mobile&&_.call(this),this.expression.card&&w.call(this),this.expression.numbers&&y.call(this),this.expression.text&&T.call(this),this.expression.bank&&S.call(this),this.expression.sorderIdenty&&C.call(this),this.expression.socialSecurityCard&&E.call(this),this.expression.hongKongMacauPasser&&P.call(this),this.expression.taiwanPasser&&j.call(this),this.expression.houseHoldRegister&&F.call(this),this.expression.interimId&&M.call(this),this.expression.passport&&U.call(this)))},d=function(e,t){return"string"==typeof this.expression[e]?this.expression[e]:this.expression[e].message&&"string"==typeof this.expression[e].message?this.expression[e].message:t},u=function(){m.call(this,this.vm.value),this.vm.$watch("value",m.bind(this))},m=function(e,t){if(e&&e.length&&!e.match(/^\s*$/g))delete a.a.$validation[this.field].required,delete a.a.prototype.$validation[this.field].required;else{var i=d.call(this,"required","您有未录入的数据哦~");a.a.$validation[this.field].required=a.a.prototype.$validation[this.field].required=i}},h=function(){f.call(this,this.vm.value),this.vm.$watch("value",f.bind(this))},f=function(e,t){if(e&&this.expression.minLength){var i="number"==typeof this.expression.minLength?this.expression.minLength:this.expression.minLength.rule;if(e.length&&e.length>=i)delete a.a.$validation[this.field].minLength,delete a.a.prototype.$validation[this.field].minLength;else{var n=d.call(this,"minLength","至少输入"+i+"字哦~");a.a.$validation[this.field].minLength=a.a.prototype.$validation[this.field].minLength=n}}if(e&&this.expression.maxLength){var o="number"==typeof this.expression.maxLength?this.expression.maxLength:this.expression.maxLength.rule;if(e.length&&e.length<o)delete a.a.$validation[this.field].maxLength,delete a.a.prototype.$validation[this.field].maxLength;else{var r=d.call(this,"maxLength","最多输入"+o+"字哦~");a.a.$validation[this.field].maxLength=a.a.prototype.$validation[this.field].maxLength=r}}},p=function(){g.call(this,this.vm.value),this.vm.$watch("value",g.bind(this))},g=function(e,t){if(e&&this.expression.mail)if(s.e(e))delete a.a.$validation[this.field].mail,delete a.a.prototype.$validation[this.field].mail;else{var i=d.call(this,"mail","邮箱格式不对哦~");a.a.$validation[this.field].mail=a.a.prototype.$validation[this.field].mail=i}},v=function(){b.call(this,this.vm.value),this.vm.$watch("value",b.bind(this))},b=function(e,t){if(e&&this.expression.tel)if(s.f(e))delete a.a.$validation[this.field].tel,delete a.a.prototype.$validation[this.field].tel;else{var i=d.call(this,"tel","电话格式不对哦~");a.a.$validation[this.field].tel=a.a.prototype.$validation[this.field].tel=i}},_=function(){x.call(this,this.vm.value),this.vm.$watch("value",x.bind(this))},x=function(e,t){if(e&&this.expression.mobile)if(s.g(e))delete a.a.$validation[this.field].mobile,delete a.a.prototype.$validation[this.field].mobile;else{var i=d.call(this,"mobile","手机格式不对哦~");a.a.$validation[this.field].mobile=a.a.prototype.$validation[this.field].mobile=i}},w=function(){k.call(this,this.vm.value),this.vm.$watch("value",k.bind(this))},k=function(e,t){if(e&&this.expression.card)if(s.h(e))delete a.a.$validation[this.field].card,delete a.a.prototype.$validation[this.field].card;else{var i=d.call(this,"card","身份证号格式不对哦~");a.a.$validation[this.field].card=a.a.prototype.$validation[this.field].card=i}},y=function(){I.call(this,this.vm.value),this.vm.$watch("value",I.bind(this))},I=function(e,t){if(e&&this.expression.numbers)if(s.i(e))delete a.a.$validation[this.field].numbers,delete a.a.prototype.$validation[this.field].numbers;else{var i=d.call(this,"numbers","只能输入数字哦~");a.a.$validation[this.field].numbers=a.a.prototype.$validation[this.field].numbers=i}},T=function(){B.call(this,this.vm.value),this.vm.$watch("value",B.bind(this))},B=function(e,t){if(e&&this.expression.text)if(s.j(e))delete a.a.$validation[this.field].text,delete a.a.prototype.$validation[this.field].text;else{var i=d.call(this,"text","不能包含特殊字符哦~");a.a.$validation[this.field].text=a.a.prototype.$validation[this.field].text=i}},S=function(){$.call(this,this.vm.value),this.vm.$watch("value",$.bind(this))},$=function(e,t){if(e&&this.expression.bank)if(s.k(e))delete a.a.$validation[this.field].bank,delete a.a.prototype.$validation[this.field].bank;else{var i=d.call(this,"bank","银行卡格式不对哦~");a.a.$validation[this.field].bank=a.a.prototype.$validation[this.field].bank=i}},C=function(){L.call(this,this.vm.value),this.vm.$watch("value",L.bind(this))},L=function(e,t){if(e&&this.expression.sorderIdenty)if(s.l(e))delete a.a.$validation[this.field].sorderIdenty,delete a.a.prototype.$validation[this.field].sorderIdenty;else{var i=d.call(this,"sorderIdenty","军人身份证格式不对哦~");a.a.$validation[this.field].sorderIdenty=a.a.prototype.$validation[this.field].sorderIdenty=i}},E=function(){N.call(this,this.vm.value),this.vm.$watch("value",N.bind(this))},N=function(e,t){if(e&&this.expression.socialSecurityCard)if(s.m(e))delete a.a.$validation[this.field].socialSecurityCard,delete a.a.prototype.$validation[this.field].socialSecurityCard;else{var i=d.call(this,"socialSecurityCard","社会保障卡格式不对哦~");a.a.$validation[this.field].socialSecurityCard=a.a.prototype.$validation[this.field].socialSecurityCard=i}},P=function(){O.call(this,this.vm.value),this.vm.$watch("value",O.bind(this))},O=function(e,t){if(e&&this.expression.hongKongMacauPasser)if(s.n(e))delete a.a.$validation[this.field].hongKongMacauPasser,delete a.a.prototype.$validation[this.field].hongKongMacauPasser;else{var i=d.call(this,"hongKongMacauPasser","港澳通行证格式不对哦~");a.a.$validation[this.field].hongKongMacauPasser=a.a.prototype.$validation[this.field].hongKongMacauPasser=i}},j=function(){z.call(this,this.vm.value),this.vm.$watch("value",z.bind(this))},z=function(e,t){if(e&&this.expression.taiwanPasser)if(s.o(e))delete a.a.$validation[this.field].taiwanPasser,delete a.a.prototype.$validation[this.field].taiwanPasser;else{var i=d.call(this,"taiwanPasser","台湾居民来往大陆通行证格式不对哦~");a.a.$validation[this.field].taiwanPasser=a.a.prototype.$validation[this.field].taiwanPasser=i}},F=function(){D.call(this,this.vm.value),this.vm.$watch("value",D.bind(this))},D=function(e,t){if(e&&this.expression.houseHoldRegister)if(s.p(e))delete a.a.$validation[this.field].houseHoldRegister,delete a.a.prototype.$validation[this.field].houseHoldRegister;else{var i=d.call(this,"houseHoldRegister","户口薄格式不对哦~");a.a.$validation[this.field].houseHoldRegister=a.a.prototype.$validation[this.field].houseHoldRegister=i}},M=function(){K.call(this,this.vm.value),this.vm.$watch("value",K.bind(this))},K=function(e,t){if(e&&this.expression.interimId)if(s.q(e))delete a.a.$validation[this.field].interimId,delete a.a.prototype.$validation[this.field].interimId;else{var i=d.call(this,"interimId","临时居民身份证格式不对哦~");a.a.$validation[this.field].interimId=a.a.prototype.$validation[this.field].interimId=i}},U=function(){V.call(this,this.vm.value),this.vm.$watch("value",V.bind(this))},V=function(e,t){if(e&&this.expression.passport)if(s.r(e))delete a.a.$validation[this.field].passport,delete a.a.prototype.$validation[this.field].passport;else{var i=d.call(this,"passport","护照格式不对哦~");a.a.$validation[this.field].passport=a.a.prototype.$validation[this.field].passport=i}},R={bind:function(e,t,i){if(void 0!==t.value){e[l]={el:e,vm:i.context,expression:t.value};var n=arguments;e[l].vm.$nextTick(function(){setTimeout(function(){c.call(e[l],n)},0)})}},componentUpdated:function(e,t,i){if(console.log("fdfdfdfdfdf....."),void 0!==t.value){e[l]={el:e,vm:i.context,expression:t.value};var n=arguments;e[l].vm.$nextTick(function(){var t=a.a.$validation;a.a.$validation=a.a.prototype.$validation={},c.call(e[l],n),o()(t,a.a.$validation),a.a.$validation=a.a.prototype.$validation=t})}}},A={},H=function(e){e.directive("validator",R),e.$validation=e.prototype.$validation=A};!a.a.prototype.$isServer&&window.Vue&&(window.Validator=R,a.a.use(H)),R.install=H,t.a=R},296:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(45),o=i.n(n),r=i(281),a=i.n(r),s=i(293),l=i(26),c=i(0),d=i.n(c),u=i(295);String.prototype.subBtyesString=function(e){for(var t,i="",n=0,o=0,r=0;r<this.length;r++)t=this.charCodeAt(r),t<127?o++:o+=2,o<=e&&(n=r+1);return n<this.length?(i=this.substr(0,n),i+=""):i=this.substr(0,this.length),i},d.a.use(u.a),t.default={name:"v-field",components:{vCell:a.a},directives:{clickoutside:s.a},props:{value:String,type:{type:String,default:"text"},title:String,clearEnable:{type:Boolean,default:!0},validateable:{type:Boolean,default:!0},rows:String,placeholder:String,readonly:Boolean,disabled:Boolean,attr:Object,limit:Number,isLink:Boolean,field:String,validator:Object},data:function(){return{imeFlag:!1,state:"",active:!1,currentValue:this.value,len:0,old:""}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){if(this.len=e?e.length:0,this.limit&&this.len>this.limit)return void(this.currentValue=this.old);this.old=this.currentValue,this.$emit("input",e)},attr:{immediate:!0,handler:function(e){var t=this;this.$nextTick(function(){[t.$refs.input,t.$refs.textarea].forEach(function(t){t&&e&&o()(e).map(function(i){return t.setAttribute(i,e[i])})})})}}},methods:{doCloseActive:function(){this.active=!1},handleClear:function(){this.disabled||this.readonly||(this.currentValue="",this.$refs.input.focus())},handleInput:function(e){this.currentValue=e.target.value,this.validateable&&"email"===this.type?this.state=l.e(this.currentValue)?"success":"error":this.validateable&&"tel"===this.type?this.state=l.f(this.currentValue)||l.g(this.currentValue)?"success":"error":this.validateable&&"mobile"===this.type&&(this.state=l.g(this.currentValue)?"success":"error")}}}},297:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-field{display:block}.v-field input{opacity:1}.v-field input::-webkit-input-placeholder,.v-field textarea::-webkit-input-placeholder{color:#bebebe;font-size:.37333rem}.v-field .icon.icon-error{background:#b2b2b2;color:#fff;border-radius:50%;padding:.05333rem;font-size:.37333rem;opacity:.7}.v-field__tit{width:100%;height:1.17333rem;font-size:.4rem;line-height:1.17333rem;margin-left:.4rem;border-bottom:.02667rem solid #dddee3}.v-field__core.textarea{width:100%;min-height:2.66667rem;-webkit-appearance:none;appearance:none;overflow:auto;resize:none;vertical-align:top;display:block;background:#fff;padding:.4rem 0;font-size:.4rem;line-height:.58667rem}.v-field__core.input{width:100%;height:100%;font-size:.4rem;padding-right:.4rem}.has-limit .v-cell__value{padding-bottom:.88rem}.v-field__limit{position:absolute;bottom:0;right:0;font-size:.37333rem;color:#777e8c;text-align:right;padding:.26667rem .4rem}.limit-outer .v-field__limit{background:transparent;border-top:.02667rem solid #dddee3}.v-field.multi .v-cell__value{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.v-field.multi .v-cell__value>div{padding:.26667rem .26667rem 0;font-size:.37333rem;color:#000}",""])},298:function(e,t,i){var n=i(297);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("980cb432",n,!0)},299:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-cell",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.doCloseActive,expression:"doCloseActive"}],staticClass:"v-field",class:[{"has-limit":"textarea"===e.type&&e.limit}],attrs:{title:e.title,isLink:e.isLink}},["textarea"===e.type?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"},{name:"validator",rawName:"v-validator",value:e.validator,expression:"validator"}],ref:"textarea",staticClass:"v-field__core textarea",attrs:{placeholder:e.placeholder,rows:e.rows,disabled:e.disabled,readonly:e.readonly,field:e.field},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}):e._e(),e._v(" "),e._t("after"),e._v(" "),"textarea"===e.type&&e.limit?i("div",{staticClass:"v-field__limit"},[e._v(e._s(e.currentValue.length||0)+"/"+e._s(e.limit))]):e._e(),e._v(" "),"textarea"!==e.type?i("input",{directives:[{name:"validator",rawName:"v-validator",value:e.validator,expression:"validator"}],ref:"input",staticClass:"v-field__core input",class:[e.state],attrs:{type:"mobile"===e.type?"tel":e.type,number:"number"===e.type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,field:e.field},domProps:{value:e.currentValue},on:{input:e.handleInput,focus:function(t){e.active=!0,e.state=""},change:function(t){e.$emit("change",e.currentValue)}}}):e._e(),e._v(" "),e.clearEnable?i("i",{directives:[{name:"show",rawName:"v-show",value:"textarea"!==e.type&&e.active,expression:"type !== 'textarea' && active"}],staticClass:"icon icon-error",on:{click:e.handleClear}}):e._e(),e._v(" "),e._t("right")],2)},staticRenderFns:[]}},314:function(e,t,i){i(326);var n=i(43)(i(321),i(330),null,null);e.exports=n.exports},318:function(e,t,i){"use strict";var n=i(0),o=i.n(n),r={inserted:function(e,t){t.value?e.focus():e.blur()},componentUpdated:function(e,t){t.modifiers.lazy&&Boolean(t.value)===Boolean(t.oldValue)||(t.value?setTimeout(function(){e.focus()},0):e.blur())},unbind:function(e){}},a=function(e){e.directive("Focus",r)};!o.a.prototype.$isServer&&window.Vue&&(window.Focus=r,o.a.use(a)),r.install=a,t.a=r},321:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(294),o=i.n(n),r=i(0),a=i.n(r),s=i(318);a.a.use(s.a),t.default={name:"v-search",components:{vField:o.a},props:{id:String,value:String,autofocus:{type:Boolean,default:!1},cancelText:{default:"取消"},placeholder:{default:"搜索"},result:Array},data:function(){return{visible:!1,currentValue:this.value,isLock:!1}},watch:{value:function(e){this.$logger.log("v-search.watch.value: "+e),this.currentValue=e},currentValue:function(e){this.$logger.log("v-search.watch.currentValue: "+e),this.$emit("input",e)},visible:function(e){this.$logger.log("v-search.watch.visible: "+e)}},activated:function(){this.$logger.log("v-search.activated!"),this.autofocus&&(this.visible=!0)},mounted:function(){this.$logger.log("v-search.mounted!"),this.autofocus&&(this.visible=!0)},methods:{searchFocus:function(){this.visible=!0,this.$logger.log("v-search.searchFocus: ",this.visible,this.placeholder)},onClick:function(){this.$logger.log("v-search.onClick: "),this.visible=!0},onBlur:function(){this.$logger.log("v-search.onBlur: "),this.visible=!1},onEnter:function(){this.$logger.log("v-search.onEnter: "),this.$emit("handle-search",this.currentValue)},onInput:function(e){this.isLock||(this.currentValue=e.target.value)},onCcompositionStart:function(e){this.$logger.log("v-search.onCcompositionStart: ",e.target.value),this.isLock=!0},onCompositionEnd:function(e){this.$logger.log("v-search.onCompositionEnd: ",e.target.value),this.isLock=!1,this.currentValue=e.target.value}}}},323:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-search{top:0;left:0;width:100%;height:1.17333rem;padding:0 .4rem;background:#f2f2f4;border-bottom:1px solid #dddee3}.v-search input{width:100%;height:.74667rem;font-size:.37333rem;-webkit-appearance:none;appearance:none;border:0;box-sizing:border-box;outline:0;color:transparent}.v-search input::-webkit-input-placeholder{text-align:center}.v-search input:-ms-input-placeholder{text-align:center}.v-search input:focus{color:#000;-webkit-transition:color .5s ease-in-out;transition:color .5s ease-in-out}.v-search input:focus~.icon.icon-search{-webkit-transform:translateX(-3.89333rem);transform:translateX(-3.89333rem);-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}.v-search input:focus~.icon.icon-error{display:block}.v-search .icon{position:absolute;font-size:.32rem;line-height:1;top:50%;color:#333;margin-top:-.16rem}.v-search .icon.icon-search{width:.32rem;height:.32rem;left:50%;margin-left:-.42667rem}.v-search .icon.icon-error{width:.37333rem;height:.37333rem;right:1.44rem;text-align:center;font-size:.32rem;line-height:.37333rem;color:#fff;background:#b2b2b2;border-radius:50%}.v-search__bar{position:relative;width:100%;height:100%;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}.v-search__bar>label{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1}.v-search__bar>a,.v-search__bar>label{-webkit-flex-basis:auto;flex-basis:auto}.v-search__bar>a{-moz-flex-grow:0;-webkit-flex-grow:0;flex-grow:0;-webkit-box-flex:0;-webkit-flex-shrink:0;flex-shrink:0}.v-search__frm{width:100%;height:.74667rem;font-size:.37333rem;background:#fff;border-radius:.13333rem;padding-left:.74667rem}.v-search__bar_cancel{margin-left:.26667rem;font-size:.45333rem;line-height:1;color:#007aff}",""])},326:function(e,t,i){var n=i(323);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("6832a3ef",n,!0)},330:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-search"},[i("div",{staticClass:"v-search__bar"},[i("label",{ref:"frm",staticClass:"v-search__frm",on:{click:function(t){t.stopPropagation(),e.onClick(t)}}},[i("input",{directives:[{name:"focus",rawName:"v-focus",value:e.visible,expression:"visible"}],ref:"input",attrs:{type:"search",id:"vSearch_"+e._uid,autofocus:e.autofocus,placeholder:e.visible?"":e.placeholder},domProps:{value:e.currentValue},on:{input:e.onInput,compositionstart:e.onCcompositionStart,compositionend:e.onCompositionEnd,blur:e.onBlur,keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onEnter(t)}}}),e._v(" "),i("i",{staticClass:"icon icon-search"}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"icon icon-error",on:{click:function(t){e.visible=!1,e.currentValue=""}}})]),e._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"v-search__bar_cancel",domProps:{textContent:e._s(e.cancelText)},on:{click:function(t){e.visible=!1,e.currentValue=""}}})])])},staticRenderFns:[]}},346:function(e,t,i){i(365);var n=i(43)(i(352),i(378),null,null);e.exports=n.exports},352:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(46),o=i.n(n),r=i(79),a=i.n(r),s=i(288),l=i(26),c=i(28),d=i(78);i.n(d);t.default={name:"v-comment-bar",props:{id:String,value:{type:Object,default:function(){}},delTopicEnable:{type:Boolean,default:!1},delCommentEnable:{type:Boolean,default:!1},praiseEnable:{type:Boolean,default:!1},commentEnable:{type:Boolean,default:!1}},data:function(){return{comment:this.value||{Id:0}}},computed:a()({},i.i(d.mapState)({subjects:function(e){return e.forum.forumSubjects},comments:function(e){return e.forum.forumComments},formatedCreateDt:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)?l.b(this.subjects[this.comment.Id].Tm):this.comments.hasOwnProperty(this.comment.CommentId)?l.b(this.comments[this.comment.CommentId].Tm):""},formatedPraiseNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeNum?this.subjects[this.comment.Id].LikeNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeNum?this.comments[this.comment.CommentId].LikeNum:"赞"},formatedCommentNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].CommentNum?this.subjects[this.comment.Id].CommentNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].CommentNum?this.comments[this.comment.CommentId].CommentNum:"评论"},formatedLikeFlag:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeFlag?this.subjects[this.comment.Id].LikeFlag:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeFlag?this.comments[this.comment.CommentId].LikeFlag:0}}),{delTopicEnableTag:function(){return this.delTopicEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)},delCommentEnableTag:function(){return this.delCommentEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)}}),watch:{value:function(e){this.comment=e},comment:function(e){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_FORUM_COMMENT",o()(this.comment)):this.$store.commit("SET_FORUM_COMMENT",o()(this.comment)),this.$emit("input",e)},"comment.LikeFlag":function(e){this.$emit("input",this.comment)}},mounted:function(){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_FORUM_COMMENT",o()(this.comment)):this.$store.commit("SET_FORUM_COMMENT",o()(this.comment))},methods:{togglePraise:function(e){var t=this;this.praiseEnable&&(e.stopPropagation(),this.comment.LikeFlag?s.a.delPraise({topicId:this.comment.Id||0,commentId:this.comment.CommentId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!1),t.$set(t.comment,"LikeNum",t.comment.LikeNum-1),t.$store.commit("DEL_FORUM_PRAISE",t.comment)}).catch(function(e){t.$logger.error("p-forum-reply.delete praise error: ",e)}):s.a.addPraise({topicId:this.comment.Id||0,toId:this.comment.CommentId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!0),t.$set(t.comment,"LikeNum",t.comment.LikeNum+1),t.$store.commit("ADD_FORUM_PRAISE",t.comment)}).catch(function(e){t.$logger.error("p-forum-reply.post praise error: ",e)}))},delTopic:function(){var e=this;s.a.delTopic({topicId:this.comment.Id||0}).then(function(t){e.$logger.log("p-forum-comments.delTopic.SUCCESS: ",t),e.$router.go(-1)}).catch(function(t){e.$logger.error("p-forum-comments.delTopic.ERROR: ",t)})},delComment:function(){var e=this;s.a.delComment({topicId:this.comment.Id,commentId:this.comment.CommentId}).then(function(t){e.$logger.log("p-forum-comments.delComment.SUCCESS: ",t),e.$store.commit("DEL_FORUM_COMMENT_NUM",{Id:e.comment.Id}),e.$emit("handle-del-comment",t)}).catch(function(t){e.$logger.error("p-forum-comments.delComment.ERROR: ",t)})},addComment:function(e){if(this.commentEnable){c.a.log("p-forum-comments.addComment..."),e.stopPropagation();var t=this.comment.CommentId?this.comment.UserId:0;this.$router.push({name:"forum-reply",params:{forumId:this.$route.params.forumId,topicId:this.comment.Id},query:{toid:this.comment.CommentId,touid:t}})}}}}},358:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,".v-comment-bar{padding:.48rem 0;background:#fff;-webkit-box-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-comment-bar,.v-comment-bar>div{display:-webkit-box;display:flex;display:-webkit-flex}.v-comment-bar>div{color:#8e8e93;-moz-flex-grow:0;-webkit-flex-grow:0;flex-grow:0;-webkit-box-flex:0;-webkit-flex-shrink:0;flex-shrink:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar>div:first-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1}.v-comment-bar>div p{font-size:.32rem;line-height:.4rem}.v-comment-bar .v-comment-bar__dt{margin-left:.4rem;-webkit-flex-shrink:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar .v-comment-bar__del{margin-left:.4rem;-webkit-flex-shrink:1;flex-shrink:1;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-flex-basis:auto;flex-basis:auto;color:#3395ff}.v-comment-bar .v-comment-bar__del p{display:inline}.v-comment-bar .icon{width:.4rem;height:.4rem;font-size:.4rem;margin-right:.13333rem}.v-comment-bar .icon.icon-heart-o{color:#fb434f}.v-comment-bar__praise{width:1.49333rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.v-comment-bar__praise .icon.done{-webkit-animation:shake .5s 1;animation:shake .5s 1}.v-comment-bar__praise .icon.cancel{-webkit-animation:shake2 .5s 1;animation:shake2 .5s 1}.v-comment-bar__praise.act{-webkit-animation:shake .1s 1;animation:shake .1s 1}@-webkit-keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@-webkit-keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}.v-comment-bar__comment{width:1.49333rem;margin-right:.4rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}",""])},365:function(e,t,i){var n=i(358);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("1d5ef698",n,!0)},378:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-comment-bar"},[i("div",[i("div",{staticClass:"v-comment-bar__dt"}),e._v(" "),e.delTopicEnableTag?i("div",{staticClass:"v-comment-bar__del"},[i("p",{on:{click:e.delTopic}},[e._v("删除主题")])]):e._e(),e._v(" "),e.delCommentEnableTag?i("div",{staticClass:"v-comment-bar__del"},[i("p",{on:{click:e.delComment}},[e._v("删除评论")])]):e._e()]),e._v(" "),i("div",{staticClass:"v-comment-bar__praise",on:{click:e.togglePraise}},[i("span",{class:["icon",{"icon-heart cancel":!e.formatedLikeFlag},{"icon-heart-o done":e.formatedLikeFlag}]}),e._v(" "),i("p",{domProps:{textContent:e._s(e.formatedPraiseNum)}})]),e._v(" "),i("div",{staticClass:"v-comment-bar__comment",on:{click:e.addComment}},[i("span",{staticClass:"icon icon-comment"}),e._v(" "),i("p",{domProps:{textContent:e._s(e.formatedCommentNum)}})])])},staticRenderFns:[]}},512:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(76),o=i.n(n),r=i(288),a=i(314),s=i.n(a),l=i(246),c=i.n(l),d=i(252),u=i.n(d),m=i(346),h=i.n(m),f=i(283),p=i.n(f);t.default={components:{vSearch:s.a,vFeed:c.a,vText:u.a,pForumCommentsBar:h.a,vScroll:p.a},data:function(){return{keywords:"",listData:[]}},created:function(){this.$logger.log("forum-list.created... "),this.init()},watch:{keywords:function(e){e&&(this.listData=[],this.$store.commit("DEL_POSITION",this.$route.query.timestamp))}},methods:{init:function(){this.$logger.log("forum-list.init... ")},getList:function(e){var t=this,i=e.page,n=e.pageNum;return this.keywords?r.a.getTopicSearch({forumId:this.$route.query.forumId||0,keyword:this.keywords,page:i,pageNum:n}).then(function(e){return t.$logger.log("forum-list.methods.getList: SUCCESS, ",e),e.length&&e.length>0&&(e.forEach(function(e){if(e.pics){var t=[];e.pics.forEach(function(e){"string"==typeof e?t.push({url:e}):e.url&&e.width&&t.push({url:e.url,width:e.width,height:e.height})}),e.album=t}e.comment={Id:e.id,CommentFlag:e.CommentFlag,CommentNum:e.CommentNum,LikeFlag:e.LikeFlag,LikeNum:e.LikeNum}}),t.listData=t.listData.concat(e)),o.a.resolve(e)}):o.a.reject(null)},goSearch:function(e){this.$logger.log("forum-search.goSearch: ",this.keywords),this.listData=[]},goDetail:function(e){this.$router.push({name:"forum-topics-detail",params:{forumId:this.$route.params.forumId,topicId:e}})}}}},633:function(e,t,i){t=e.exports=i(160)(),t.push([e.i,"",""])},752:function(e,t,i){var n=i(633);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(161)("3d554832",n,!0)},913:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page page-forum-topics page-forum-search"},[i("v-scroll",{attrs:{func:e.getList,"func-type":"page"},model:{value:e.listData,callback:function(t){e.listData=t},expression:"listData"}},[i("v-search",{on:{"handle-search":e.goSearch},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("ul",e._l(e.listData,function(t){return i("li",{on:{click:function(i){e.goDetail(t.id)}}},[i("div",[i("v-feed",{attrs:{feedId:t.userInfo.feedId,imgUrl:t.userInfo.avatar,title:t.userInfo.title,subtitle:t.userInfo.subtitle,desc:e._f("specialTime")(parseInt(t.addtm)),classes:"title small no-border"}}),e._v(" "),i("v-text",{attrs:{classes:"tit",value:t.title}}),e._v(" "),i("v-text",{attrs:{classes:"con",value:t.abstract}}),e._v(" "),i("p-forum-comments-bar",{attrs:{praiseEnable:!1,commentEnable:!1},model:{value:t.comment,callback:function(i){e.$set(t,"comment",i)},expression:"item.comment"}})],1)])}))],1)],1)},staticRenderFns:[]}}});