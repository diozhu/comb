webpackJsonp([22],{191:function(e,t,i){i(699);var o=i(41)(i(492),i(847),null,null);e.exports=o.exports},232:function(e,t,i){i(237);var o=i(41)(i(235),i(238),null,null);e.exports=o.exports},233:function(e,t,i){"use strict";var o=i(0),n=i.n(o),r=new n.a;t.a=r},234:function(e,t,i){"use strict";t.__esModule=!0;var o=i(260),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n.default||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}},235:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(27);t.default={name:"v-feed",props:{id:String,feedId:String,imgUrl:String,msgNum:String,title:String,subtitle:String,sex:String,age:String,desc:String,classes:String,iconFunc:Function},data:function(){return{}},computed:{feedImg:function(){return o.d(this.imgUrl)},feedClass:function(){return/^o_/.test(this.feedId)||/^s_/.test(this.feedId)?"square":/^g_/.test(this.feedId)?"hexagon":"circle"}},created:function(){},methods:{handleClick:function(e){this.iconFunc&&"function"==typeof this.iconFunc&&(e.stopPropagation(),e.preventDefault(),this.iconFunc(),this.$toast({message:"您是不是想去个人中心？",duration:1e3,position:"bottom"}))}}}},236:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,'.v-feed{height:1.81333rem;background:#fff;border-bottom:1px solid #dddee3;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-feed>div{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 auto;flex:0 0 auto}.v-feed>div:last-child{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.v-feed__img{width:1.44rem;height:1.44rem;margin-left:.26667rem;margin-right:.26667rem;position:relative;border:0}.v-feed__img img{width:100%}.v-feed__img.circle{border-radius:50%;overflow:hidden}.v-feed__img.hexagon{height:1.22667rem;overflow:hidden}.v-feed__img.hexagon:before{left:0;border-right:.32rem solid transparent}.v-feed__img.hexagon:after,.v-feed__img.hexagon:before{content:"";width:0;height:0;position:absolute;top:0;border-top:.61333rem solid #fff;border-bottom:.61333rem solid #fff}.v-feed__img.hexagon:after{right:0;border-left:.32rem solid transparent}.small{height:1.38667rem}.small .v-feed__img{width:.85333rem;height:.85333rem;margin-left:.4rem}.small .v-feed__tit{font-size:.37333rem}.small .v-feed__sub,.v-feed__num{font-size:.32rem}.v-feed__num{width:.48rem;height:.48rem;border-radius:50%;background:#ff3b2f;position:absolute;right:.16rem;top:-.10667rem;color:#fff;line-height:.48rem;text-align:center}.v-feed__num.mix{width:.26667rem;height:.26667rem;color:transparent;right:.21333rem;top:-.05333rem}.v-feed__con{margin-right:.26667rem;-webkit-box-orient:vertical;-webkit-flex-direction:column;flex-direction:column}.v-feed__con,.v-feed__con-info{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal}.v-feed__con-info{-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-feed__con-info>div:last-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1;-webkit-flex-basis:auto;flex-basis:auto}.v-feed__tit{font-size:.45333rem;line-height:1}.v-feed__sex{width:.32rem;height:.32rem;margin:.02667rem .13333rem;text-align:center;font-size:.32rem;line-height:.32rem;color:#ff88b2;border-radius:.05333rem}.v-feed__sex.icon-male{color:#4392ec}.v-feed__age{font-size:.26667rem;line-height:.45333rem;color:#777e8c}.v-feed__desc{text-align:right;font-size:.32rem;line-height:1;color:#8e8e93}.v-feed__sub{margin-top:.18667rem;font-size:.37333rem;line-height:1;color:#777e8c}',""])},237:function(e,t,i){var o=i(236);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("b5c91ab4",o,!0)},238:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-feed",class:[e.classes]},[i("div",{on:{click:e.handleClick}},[i("div",{staticClass:"v-feed__img",class:[e.feedClass]},[i("img",{attrs:{src:e.feedImg}})]),e.msgNum>0?i("i",{staticClass:"v-feed__num",class:[{mix:e.msgNum>9}],domProps:{textContent:e._s(e.msgNum)}}):e._e()]),e._v(" "),i("div",{staticClass:"v-feed__con"},[i("div",{staticClass:"v-feed__con-info"},[i("div",{staticClass:"v-feed__tit",domProps:{textContent:e._s(e.title)}}),e._v(" "),e.sex?i("div",{staticClass:"v-feed__sex icon",class:[{"icon-male":"1"==e.sex},{"icon-female":"2"==e.sex}]}):e._e(),e._v(" "),e.age?i("div",{staticClass:"v-feed__age",domProps:{textContent:e._s(e.age)}}):e._e(),e._v(" "),e.desc?i("div",{staticClass:"v-feed__desc",domProps:{textContent:e._s(e.desc)}}):e._e()]),e._v(" "),i("div",{staticClass:"v-feed__sub",domProps:{textContent:e._s(e.subtitle)}})])])},staticRenderFns:[]}},239:function(e,t,i){i(267);var o=i(41)(i(265),null,null,null);e.exports=o.exports},240:function(e,t,i){"use strict";var o=i(254),n=i.n(o);i.d(t,"a",function(){return n.a})},241:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"fading-circle",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}},created:function(){if(!this.$isServer){this.styleNode=document.createElement("style");var e=".circle-color-"+this._uid+" > div::before { background-color: "+this.spinnerColor+"; }";this.styleNode.type="text/css",this.styleNode.rel="stylesheet",this.styleNode.title="fading circle style",document.getElementsByTagName("head")[0].appendChild(this.styleNode),this.styleNode.appendChild(document.createTextNode(e))}},destroyed:function(){this.styleNode&&this.styleNode.parentNode.removeChild(this.styleNode)}}},242:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"snake",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}}}},243:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"triple-bounce",props:{size:Number,color:String},computed:{bounceStyle:function(){return{backgroundColor:this.spinnerColor}}}}},244:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=["snake","triple-bounce","fading-circle"],n=function(e){return"[object Number]"==={}.toString.call(e)?(o.length<=e&&(console.warn("'"+e+"' spinner not found, use the default spinner."),e=0),o[e]):(-1===o.indexOf(e)&&(console.warn("'"+e+"' spinner not found, use the default spinner."),e=o[0]),e)};t.default={name:"mt-spinner",computed:{spinner:function(){return"spinner-"+n(this.type)}},components:{SpinnerSnake:i(252),SpinnerTripleBounce:i(253),SpinnerFadingCircle:i(251)},props:{type:{default:0},size:{type:Number,default:28},color:{type:String,default:"#ccc"}}}},245:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-spinner__snake{width:.74667rem;height:.74667rem;-webkit-animation:v-spinner__snake--rotate .8s infinite linear;animation:v-spinner__snake--rotate .8s infinite linear;border-width:.05333rem;border-style:solid;border-radius:50%}@-webkit-keyframes v-spinner__snake--rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes v-spinner__snake--rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},246:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,'.v-spinner__fading-circle{width:.74667rem;height:.74667rem;position:relative}.v-spinner__fading-circle .circle{background:transparent;border:0;width:100%;height:100%;size:.74667rem;position:absolute}.v-spinner__fading-circle .circle:before{width:15%;height:15%;content:" ";display:block;margin:0 auto;size:.21333rem;border-radius:50%;-webkit-animation:v-spinner__fading-circle--opacity 1.2s infinite ease-in-out both;animation:v-spinner__fading-circle--opacity 1.2s infinite ease-in-out both}.v-spinner__fading-circle .circle.is-circle1{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.v-spinner__fading-circle .circle.is-circle1:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.v-spinner__fading-circle .circle.is-circle2{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.v-spinner__fading-circle .circle.is-circle2:before{-webkit-animation-delay:-1s;animation-delay:-1s}.v-spinner__fading-circle .circle.is-circle3{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.v-spinner__fading-circle .circle.is-circle3:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.v-spinner__fading-circle .circle.is-circle4{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.v-spinner__fading-circle .circle.is-circle4:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.v-spinner__fading-circle .circle.is-circle5{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.v-spinner__fading-circle .circle.is-circle5:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.v-spinner__fading-circle .circle.is-circle6{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.v-spinner__fading-circle .circle.is-circle6:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.v-spinner__fading-circle .circle.is-circle7{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.v-spinner__fading-circle .circle.is-circle7:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.v-spinner__fading-circle .circle.is-circle8{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.v-spinner__fading-circle .circle.is-circle8:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.v-spinner__fading-circle .circle.is-circle9{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.v-spinner__fading-circle .circle.is-circle9:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.v-spinner__fading-circle .circle.is-circle10{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.v-spinner__fading-circle .circle.is-circle10:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.v-spinner__fading-circle .circle.is-circle11{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.v-spinner__fading-circle .circle.is-circle11:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}.v-spinner__fading-circle .circle.is-circle12{-webkit-transform:rotate(1turn);transform:rotate(1turn)}.v-spinner__fading-circle .circle.is-circle12:before{-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes v-spinner__fading-circle--opacity{0%,39%,to{opacity:0;filter:alpha(opacity=0)}40%{opacity:1;filter:alpha(opacity=100)}}@keyframes v-spinner__fading-circle--opacity{0%,39%,to{opacity:0;filter:alpha(opacity=0)}40%{opacity:1;filter:alpha(opacity=100)}}',""])},247:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-spinner__triple-bounce .bounce1,.v-spinner__triple-bounce .bounce2,.v-spinner__triple-bounce .bounce3{width:.16rem;height:.16rem;background-color:#acb3bf;display:inline-block;border-radius:100%;-webkit-animation:v-spinner__triple-bounce--scale 1.4s infinite ease-in-out both;animation:v-spinner__triple-bounce--scale 1.4s infinite ease-in-out both}.v-spinner__triple-bounce .bounce1{-webkit-animation-delay:-.32s;animation-delay:-.32s}.v-spinner__triple-bounce .bounce2{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes v-spinner__triple-bounce--scale{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes v-spinner__triple-bounce--scale{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},248:function(e,t,i){var o=i(245);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("75fac4c4",o,!0)},249:function(e,t,i){var o=i(246);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("388eadfd",o,!0)},250:function(e,t,i){var o=i(247);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("d2802bce",o,!0)},251:function(e,t,i){i(249);var o=i(41)(i(241),i(256),null,null);e.exports=o.exports},252:function(e,t,i){i(248);var o=i(41)(i(242),i(255),null,null);e.exports=o.exports},253:function(e,t,i){i(250);var o=i(41)(i(243),i(258),null,null);e.exports=o.exports},254:function(e,t,i){var o=i(41)(i(244),i(257),null,null);e.exports=o.exports},255:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"v-spinner__snake",style:{"border-top-color":"transparent","border-right-color":e.spinnerColor,"border-left-color":e.spinnerColor,"border-bottom-color":e.spinnerColor}})},staticRenderFns:[]}},256:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["v-spinner__fading-circle circle-color-"+e._uid]},e._l(12,function(e){return i("div",{staticClass:"circle",class:["is-circle"+e]})}))},staticRenderFns:[]}},257:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"v-spinner"},[i(e.spinner,{tag:"component"})],1)},staticRenderFns:[]}},258:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-spinner__triple-bounce"},[i("div",{staticClass:"bounce1"}),e._v(" "),i("div",{staticClass:"bounce2"}),e._v(" "),i("div",{staticClass:"bounce3"})])}]}},259:function(e,t,i){i(274);var o=i(41)(i(270),i(276),null,null);e.exports=o.exports},260:function(e,t,i){e.exports={default:i(261),__esModule:!0}},261:function(e,t,i){i(263),e.exports=i(1).Object.assign},262:function(e,t,i){"use strict";var o=i(12),n=i(44),r=i(28),s=i(43),a=i(77),c=Object.assign;e.exports=!c||i(11)(function(){var e={},t={},i=Symbol(),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(e){t[e]=e}),7!=c({},e)[i]||Object.keys(c({},t)).join("")!=o})?function(e,t){for(var i=s(e),c=arguments.length,l=1,m=n.f,d=r.f;c>l;)for(var u,f=a(arguments[l++]),p=m?o(f).concat(m(f)):o(f),h=p.length,g=0;h>g;)d.call(f,u=p[g++])&&(i[u]=f[u]);return i}:c},263:function(e,t,i){var o=i(4);o(o.S+o.F,"Object",{assign:i(262)})},265:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(42);t.default={name:"v-text",props:{value:String,limit:{type:Number,default:0},expandEnabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){var e="limit"+this.limit;i.i(o.d)(this.$el,e)?i.i(o.c)(this.$el,e):i.i(o.b)(this.$el,e)}},render:function(e){var t={attrs:{id:"vText"+this._uid},class:["v-text",1===this.limit?"single":this.limit?"limit"+this.limit:""]};return this.expandEnabled&&(t.on={click:this.handleClick}),e("p",t,this.value)}}},266:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-text{font-size:.4rem;line-height:1.2;text-align:justify}.v-text.single{white-space:nowrap}.v-text.single,.v-text[class*=limit]{overflow:hidden;text-overflow:ellipsis}.v-text[class*=limit]{text-align:left;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.v-text.limit2{-webkit-line-clamp:2}.v-text.limit3{-webkit-line-clamp:3}.v-text.limit4{-webkit-line-clamp:4}.v-text.limit5{-webkit-line-clamp:5}.v-text .re{display:inline-table;font-size:.4rem;line-height:.50667rem;color:#007aff}",""])},267:function(e,t,i){var o=i(266);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("69ce6f72",o,!0)},268:function(e,t,i){"use strict";var o=i(0),n=i.n(o),r="@@Scroll",s=function(e,t){var i=void 0,o=void 0,n=void 0,r=void 0,s=void 0,a=function(){e.apply(r,s),o=i};return function(){if(r=this,s=arguments,i=Date.now(),n&&(clearTimeout(n),n=null),o){var e=t-(i-o);e<0?a():n=setTimeout(function(){a()},e)}else a()}},a=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},c=n.a.prototype.$isServer?{}:document.defaultView.getComputedStyle,l=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var i=c(t).overflowY;if("scroll"===i||"auto"===i)return t;t=t.parentNode}return window},m=function(e){return e===window?document.documentElement.clientHeight:e.clientHeight},d=function(e){return e===window?a(window):e.getBoundingClientRect().top+a(window)},u=function(e){for(var t=e.parentNode;t;){if("HTML"===t.tagName)return!0;if(11===t.nodeType)return!1;t=t.parentNode}return!1},f=function(){if(!this.binded){this.binded=!0;var e=this,t=e.el,i=t.getAttribute("scroll-tombstone"),o=Boolean(e.vm[i]);e.scrollEventTarget=l(t),!0!==o&&(e.scrollListener=s(p.bind(e),50),e.scrollEventTarget.addEventListener("scroll",e.scrollListener)),console.log("v-scroll.doBind: directive.scrollEventTarget = ",this.vm,e.scrollEventTarget),this.vm.$set(this.vm,"scrollTarget",e.scrollEventTarget);var n=t.getAttribute("scroll-disabled"),r=!1;n&&(this.vm.$watch(n,function(t){e.disabled=t,!t&&e.immediateCheck&&p.call(e)}),r=Boolean(e.vm[n])),e.disabled=r;var a=t.getAttribute("scroll-distance"),c=0;a&&(c=Number(e.vm[a]||a),isNaN(c)&&(c=0)),e.distance=c;var m=t.getAttribute("scroll-immediate-check"),d=!1;m&&(d=Boolean(e.vm[m])),e.immediateCheck=d,d&&p.call(e);var u=t.getAttribute("scroll-listen-for-event");u&&e.vm.$on(u,function(){p.call(e)})}},p=function(e){var t=this.scrollEventTarget,i=this.el,o=this.distance;if(!0===e||!this.disabled){var n=a(t),r=n+m(t),s=!1;if(t===i)s=t.scrollHeight-r<=o;else{s=r+o>=d(i)-d(t)+i.offsetHeight+n}s&&this.expression&&this.expression()}},h={bind:function(e,t,i){e[r]={el:e,vm:i.context,expression:t.value};var o=arguments;e[r].vm.$on("hook:mounted",function(){e[r].vm.$nextTick(function(){if(u(e))return void f.call(e[r],o);e[r].bindTryCount=0;!function t(){e[r].bindTryCount>10||(e[r].bindTryCount++,u(e)?f.call(e[r],o):setTimeout(t,50))}()})})},unbind:function(e){e[r].scrollEventTarget.removeEventListener("scroll",e[r].scrollListener)}},g=function(e){e.directive("Scroll",h)};!n.a.prototype.$isServer&&window.Vue&&(window.Scroll=h,n.a.use(g)),h.install=g,t.a=h},269:function(e,t,i){i(275);var o=i(41)(i(271),i(277),null,null);e.exports=o.exports},270:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-button",props:{nativeType:String,type:{type:String,default:"default",validator:function(e){return["default","danger","primary","info"].indexOf(e)>-1}},styles:{type:String,default:"radius",validator:function(e){return["radius","rectangle","circle"].indexOf(e)>-1}},cusClass:String,cusStyle:String,disableClass:String,disabled:Boolean,size:{type:String,default:"normal",validator:function(e){return["normal","small","full"].indexOf(e)>-1}}},data:function(){return{}},methods:{handleClick:function(e){this.$emit("click",e)}}}},271:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(72),n=i.n(o),r=i(0),s=i.n(r),a=i(268),c=i(240),l=i(25),m=i(233);s.a.use(a.a),t.default={name:"v-scroll",props:{id:String,value:{type:Array,default:function(){return[]}},func:Function,funcType:{type:String,default:"page"},enabled:{type:Boolean,default:!0},pullAbled:{type:Boolean,default:!1},toper:{type:Boolean,default:!1},scrollDistance:{type:Number,default:100},tombstone:{type:Boolean,default:!1}},components:{"v-spinner":c.a},data:function(){return{uid:this._uid,currentValue:this.value,goTopTag:!1,oTime:-1,pageSize:l.a.LIMIT,offset:0,limit:l.a.LIMIT,page:1,pageNum:l.a.LIMIT,hasData:!0,hasMore:!0,isLoading:!1,scrollEndTxt:!1,refreshTag:!1,isEnabled:this.enabled,scrollTarget:null}},computed:{isShowText:function(){return!(!this.hasData||this.hasMore)}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},enabled:function(e){this.$logger.log("v-scroll.watch.enabled! "),this.isEnabled=e,!0===e&&this.value.length<=0&&this.refreshList()}},created:function(){this.$logger.log("[v-scroll]."+this._uid+".created..."),m.a.$on("v-scroll.refreshList",this.refreshList),m.a.$on("v-scroll.getList",this.getList),this.init()},mounted:function(){this.$logger.log("[v-scroll]."+this._uid+".mounted...",this.$route.name,this.$parent.$route.name)},activated:function(){this.$logger.log("*[v-scroll]."+this._uid+".activated...",this._inactive),this.isEnabled=this.enabled,this.$router.direct()&&this.init()},deactivated:function(){this.$logger.log("*[v-scroll]."+this._uid+".deactivated...",this._inactive),this.isEnabled=!1},beforeDestroy:function(){this.$logger.log("*[v-scroll]."+this._uid+".beforeDestroy...")},methods:{reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetData,i=void 0===t||t;this.oTime=-1,this.pageSize=l.a.LIMIT,this.offset=0,this.limit=l.a.LIMIT,this.page=1,this.pageNum=l.a.LIMIT,this.hasMore=!0,this.hasData=!0,this.scrollEndTxt=!1,i&&(this.currentValue=[])},init:function(){this.$logger.log("[v-scroll]."+this._uid+".init..."),this.reset(),this.tombstone||this.getList()},goTop:function(){var e=this.scrollTarget;this.$logger.log("[v-scroll]."+this._uid+".getList.after: ",e.scrollHeight,e.offsetHeight),e===window?window.scrollTo(0,0):e.scrollTop>0&&(e.scrollTop-=1e3,setTimeout(this.goTop,30))},getList:function(){var e=this;if(this.$logger.log("[v-scroll]."+this._uid+".getList.befor: !!!"),this.isEnabled){!this.scrollEndTxt&&this.scrollTarget&&(this.scrollEndTxt=this.scrollTarget.scrollHeight>5*this.scrollTarget.offsetHeight/4);var t=this.scrollTarget;if(this.$logger.log("[v-scroll]."+this._uid+".getList.befor: ",t),"function"==typeof this.func&&this.hasMore){var i=null;if("section"===this.funcType?i=this.getListBySection:"limit"===this.funcType?i=this.getListByLimit:"page"===this.funcType?i=this.getListByPage:"time"===this.funcType&&(i=this.getListByTime),"function"==typeof i)try{i().then(function(t){t&&t.length&&(e.currentValue=e.currentValue.concat(t)),e.scrollTarget&&(e.$logger.log("[v-scroll]."+e._uid+".getList.after: ",e.scrollTarget.scrollHeight,e.scrollTarget.offsetHeight),e.$nextTick(function(){e.scrollEndTxt=e.scrollTarget.scrollHeight>5*e.scrollTarget.offsetHeight/4}))})}catch(e){this.$logger.error("[v-scroll]."+this._uid+".getList.after.error: "+e)}}}},getListBySection:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,o=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListBySection...");try{this.isLoading=!0;var r=this.offset,s=this.offset+this.limit;return this.tombstone&&(this.offset+=this.limit),this.func({offset:r,limit:s,refresh:o}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListBySection.success: "+t,e.offset,e.limit),t&&t.length>0?(e.hasData=!0,e.tombstone||(e.offset+=t.length)):e.offset<=0&&(e.hasData=!1),(!t||t.length<e.limit)&&(e.hasMore=!1),e.isLoading=!1,n.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListBySection.error: "+t),e.isLoading=!1,n.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListBySection.error: "+e),this.isLoading=!1,n.a.reject(e)}},getListByLimit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,o=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListByLimit...");try{return this.isLoading=!0,this.func({offset:this.offset,limit:this.limit,refresh:o}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListByLimit.success: "+t,e.offset,e.limit),t&&t.length>0?(e.hasData=!0,e.offset+=t.length):e.offset<=0&&(e.hasData=!1),(!t||t.length<e.limit)&&(e.hasMore=!1),e.isLoading=!1,n.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListByLimit.error: "+t),e.isLoading=!1,n.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListByLimit.error: "+e),this.isLoading=!1,n.a.reject(e)}},getListByPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,o=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListByPage...",this.page,this.pageNum);try{return this.isLoading=!0,this.func({page:this.page,pageNum:this.pageNum,refresh:o}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListByPage.success: "+t),t&&t.length>0?(e.hasData=!0,e.page+=1):e.page<=1&&(e.hasData=!1),(!t||t.length<e.pageNum)&&(e.hasMore=!1),e.isLoading=!1,n.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListByPage.error: "+t),e.isLoading=!1,n.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListByPage.error: "+e),this.isLoading=!1,n.a.reject(e)}},getListByTime:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.refresh,o=void 0!==i&&i;this.$logger.log("[v-scroll]."+this._uid+".getListByTime...",this.oTime,this.pageSize);var r=this;try{return r.isLoading=!0,r.func({oTime:r.oTime,pageSize:r.pageSize,refresh:o}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.res,o=void 0===i?[]:i,s=t.last,a=void 0===s?-1:s;return o&&o.length>0?(r.hasData=!0,r.oTime=a):e.currentValue.length||(r.hasData=!1),(!o||o.length<10)&&(r.hasMore=!1),r.isLoading=!1,n.a.resolve(o,a)}).catch(function(e){return r.isLoading=!1,n.a.reject(e)})}catch(e){return r.isLoading=!1,n.a.reject(e)}},refreshList:function(){var e=this;if(this.isEnabled&&!this._isDestroyed&&(this.$logger.log("!!!v-scroll."+this._uid+".refreshList..."),"function"==typeof this.func)){this.refreshTag=!0;var t=null;if("section"===this.funcType?t=this.getListBySection:"limit"===this.funcType?t=this.getListByLimit:"page"===this.funcType?t=this.getListByPage:"time"===this.funcType&&(t=this.getListByTime),"function"==typeof t)try{this.reset({resetData:!1}),t({refresh:!0}).then(function(t){e.$logger.log("[v-scroll]."+e._uid+".refreshList.after: ",e.currentValue.length),t&&t.length?e.currentValue=t:e.currentValue=[],e.refreshTag=!1}).then(function(t){e.scrollTarget&&(e.$logger.log("[v-scroll]."+e._uid+".refreshList.after: ",e.scrollTarget.scrollHeight,e.scrollTarget.offsetHeight),e.scrollEndTxt=e.scrollTarget.scrollHeight>5*e.scrollTarget.offsetHeight/4)}).catch(function(t){e.refreshTag=!1,e.$logger.error("[v-scroll]."+e._uid+".refreshList.after.error: "+t)})}catch(e){this.refreshTag=!1,this.$logger.error("[v-scroll]."+this._uid+".refreshList.after.error: "+e)}}}}}},272:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-btn{width:100%;display:block;background:#3395ff;color:#fff}.v-btn .v-btn__text{font-size:.42667rem;line-height:2}.v-btn.default{border:.02667rem solid #3395ff;background:#3395ff;color:#fff}.v-btn.danger{border:.02667rem solid #fa5a5a;background:#fa5a5a;color:#fff}.v-btn.primary{border:.02667rem solid #f7b64b;background:#f7b64b;color:#fff}.v-btn.info{border:.02667rem solid #3395ff;background:transparent;color:#3395ff}.v-btn.small{width:auto;height:auto;padding:0 .4rem;display:inline-block}.v-btn.small .v-btn__text{font-size:.32rem}.v-btn.full{border-radius:0}.v-btn.radius{border-radius:.10667rem}.v-btn.rectangle{border-radius:0}.v-btn.circle{border-radius:2.66667rem}.v-btn:active{opacity:.6}.v-btn.is-disabled{border:1px solid #85bffe;background:#85bffe}",""])},273:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-scroll{height:100%}.v-scroll-container{height:100%;overflow:scroll;-webkit-overflow-scrolling:touch}.v-scroll-refresh{width:100%;height:.96rem;position:absolute;padding:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-scroll-refresh .v-spinner{text-align:center}.v-scroll-bottom{padding:.53333rem 0}.v-scroll-bottom .v-spinner{text-align:center}.v-scroll-bottom-txt{text-align:center;font-size:.4rem;color:#c1c1c1}.v-scroll-empty{width:100%;min-height:2.66667rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-scroll-top{width:1.01333rem;height:1.01333rem;position:fixed;z-index:99;bottom:2.26667rem;right:.58667rem;font-size:.61333rem;text-align:center;line-height:1.01333rem;color:#fff;border-radius:50%;background:#ccc;box-shadow:0 0 .08rem #999}",""])},274:function(e,t,i){var o=i(272);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("4cd210a0",o,!0)},275:function(e,t,i){var o=i(273);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("4ee257c1",o,!0)},276:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"v-btn",class:[""+e.type,""+e.size,""+e.styles,{"is-disabled":e.disabled}],style:e.cusStyle,attrs:{type:e.nativeType,disabled:e.disabled},on:{click:e.handleClick}},[i("label",{staticClass:"v-btn__text"},[e._t("default")],2)])},staticRenderFns:[]}},277:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEnabled,expression:"isEnabled"}],staticClass:"v-scroll"},[i("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.getList,expression:"getList"},{name:"scroll-position",rawName:"v-scroll-position"}],ref:"container",staticClass:"v-scroll-container",attrs:{id:"combScroll_"+e._uid,"scroll-disabled":"isLoading","scroll-distance":"scrollDistance","scroll-enabled":"isEnabled","scroll-tombstone":"tombstone"}},[i("div",{ref:"content",staticClass:"v-scroll-content"},[e._t("default")],2),e._v(" "),!e.refreshTag&&(e.isLoading||e.isShowText&&e.scrollEndTxt&&e.currentValue.length>0)?i("div",{staticClass:"v-scroll-bottom"},[i("transition",{attrs:{name:"fade"}},[i("v-spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{color:"#BBBAC2",type:"triple-bounce"}})],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading&&e.isShowText&&e.scrollEndTxt&&e.currentValue.length>0,expression:"!isLoading && isShowText && scrollEndTxt && currentValue.length > 0"}],staticClass:"v-scroll-bottom-txt"},[e._v("· END ·")])])],1):e._e(),e._v(" "),!e.hasData&&e.currentValue.length<=0?i("div",{staticClass:"v-scroll-empty"},[e._t("empty",[e._v("暂无数据")])],2):e._e()]),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.toper&&e.goTopTag,expression:"toper && goTopTag"}],staticClass:"v-scroll-top icon icon-top",on:{click:e.goTop}})])],1)},staticRenderFns:[]}},279:function(e,t,i){"use strict";var o=i(0),n=i.n(o),r=i(25),s=i(26),a=i(73),c=i(16),l=i(76),m=i(75);if(void 0===d)var d=m.a;var u={currentItem:null,setCurrentItem:function(e){e&&(this.currentItem=e)},getCurrentItem:function(){return this.currentItem},clearCurrentItem:function(){this.currentItem=null},retry_num:0,retry_max:3,getToken:function(){if(!a.d||"function"!=typeof a.d)return d.reject("无效token，请在api中实现vGetMicroBbsToken方法");var e=this;return this.retry_num<this.retry_max?(this.retry_num+=1,a.d().then(function(t){return e.retry_num=0,d.resolve(t)})):d.reject("token尝试超过限制，请刷新页面重试")},getForumList:function(){s.a.log("[BBS].getForumList：");var e=this,t=r.a.BBS_URL+"/forum/list",i={appId:r.a.BBS_APPID};return r.a.BBS_TOKEN?(i.appId=r.a.BBS_APPID,i.token=r.a.BBS_TOKEN,i.toonType=r.a.toonType||100,n.a.http.post(t,i).then(function(t){var i=t.data;return s.a.log("[BBS].getForumList.SUCCESS: ",i),i.meta&&1001===i.meta.code?e.getToken().then(function(t){return r.a.BBS_TOKEN=t,e.getForumList()}):i.meta&&0!==i.meta.code?d.reject(i):d.resolve(i.data.dataList)})):this.getToken().then(function(t){return r.a.BBS_TOKEN=t,e.getForumList()})},getTopicList:function(e){var t=e.forumId,i=void 0===t?0:t,o=e.page,a=void 0===o?1:o,l=e.pageNum,m=void 0===l?r.a.BBS_LIMIT:l;s.a.log("[BBS].getTopicList：");var u=this,f=r.a.BBS_URL+"/topic/list",p={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100,loginUserId:c.a.getters.userInfo.id};return r.a.BBS_TOKEN?(p.forumIds=i,p.page=a,p.pageLimit=m,n.a.http.post(f,p).then(function(e){var t=e.data;return s.a.log("[BBS].getTopicList.SUCCESS: ",t),t.meta&&1001===t.meta.code?u.getToken().then(function(e){return r.a.BBS_TOKEN=e,u.getTopicList({forumId:i,page:a,pageNum:m})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.data.dataList)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,u.getTopicList({forumId:i,page:a,pageNum:m})})},getTopicSearch:function(e){var t=e.forumId,i=void 0===t?0:t,o=e.keyword,a=void 0===o?"":o,l=e.page,m=void 0===l?1:l,u=e.pageNum,f=void 0===u?r.a.BBS_LIMIT:u;s.a.log("[BBS].getTopicSearch：");var p=this,h=r.a.BBS_URL+"/topic/search",g={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100,loginUserId:c.a.getters.userInfo.id};return r.a.BBS_TOKEN?(g.forumIds=i,g.keyword=a,g.page=m,g.pageLimit=f,n.a.http.post(h,g).then(function(e){var t=e.data;return s.a.log("[BBS].getTopicSearch.SUCCESS: ",t),t.meta&&1001===t.meta.code?p.getToken().then(function(e){return r.a.BBS_TOKEN=e,p.getTopicSearch({forumId:i,keyword:a,page:m,pageNum:f})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.data.dataList)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,p.getTopicSearch({forumId:i,keyword:a,page:m,pageNum:f})})},getTopicDetail:function(e){var t=e.forumId,i=void 0===t?0:t,o=e.topicId,a=void 0===o?0:o;s.a.log("[BBS].getTopicDetail：");var l=this,m=r.a.BBS_URL+"/topic/detail",u={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100,loginUserId:c.a.getters.userInfo.id};return r.a.BBS_TOKEN?(u.forumIds=parseInt(i)||0,u.id=parseInt(a)||0,n.a.http.post(m,u).then(function(e){var t=e.data;return s.a.log("[BBS].getTopicDetail.SUCCESS: ",t),t.meta&&1001===t.meta.code?l.getToken().then(function(e){return r.a.BBS_TOKEN=e,l.getTopicDetail({forumId:i,topicId:a})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.data)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,l.getTopicDetail({forumId:i,topicId:a})})},addTopic:function(e){var t=e.forumId,i=void 0===t?0:t,o=e.title,a=void 0===o?"":o,l=e.content,m=void 0===l?"":l,u=e.pics,f=void 0===u?[]:u,p=e.poi,h=void 0===p?{longitude:116.123456,latitude:39.654321}:p;if(s.a.log("[BBS].addTopic："),s.a.log("[BBS].addTopic：",f),!i)return d.reject("请选择板块");if(!a)return d.reject("请输入标题");if(!m)return d.reject("请输内容");var g=this,v=r.a.BBS_URL+"/topic/add",b={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(b.forumId=parseInt(i)||0,b.title=a,b.content=m,b.userInfo={userId:c.a.getters.userInfo.id,name:c.a.getters.userInfo.title,subtitle:c.a.getters.userInfo.subtitle,avatar:c.a.getters.userInfo.avatarId},b.poi=h,f&&f.length>0&&(b.pics=[],f.forEach(function(e){b.pics.push({imageType:e.imageType,size:e.size,url:e.url,width:e.width,height:e.height})})),n.a.http.post(v,b).then(function(e){var t=e.data;return s.a.log("[BBS].addTopic.SUCCESS: ",t),t.meta&&1001===t.meta.code?g.getToken().then(function(e){return r.a.BBS_TOKEN=e,g.addTopic({forumId:i,title:a,content:m,pics:f})}):t.meta&&0!==t.meta.code?d.reject(t.meta.message):(g.setCurrentItem({OPT:1,id:t.topicId||0,forumId:b.forumId,title:b.title,abstract:b.content,pics:b.pics,userInfo:b.userInfo,poi:b.poi,addtm:new Date}),d.resolve(t))})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,g.addTopic({forumId:i,title:a,content:m,pics:f})})},delTopic:function(e){var t=e.topicId,i=void 0===t?0:t;s.a.log("[BBS].delTopic：");var o=this,a=r.a.BBS_URL+"/topic/delete",l={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(l.id=parseInt(i),l.userId=c.a.getters.userInfo.id,n.a.http.post(a,l).then(function(e){var t=e.data;return s.a.log("[BBS].delTopic.SUCCESS: ",t),t.meta&&1001===t.meta.code?o.getToken().then(function(e){return r.a.BBS_TOKEN=e,o.delTopic({topicId:i})}):t.meta&&0!==t.meta.code?d.reject(t.meta.message):(o.setCurrentItem({OPT:0,id:l.id}),d.resolve(t))})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,o.delTopic({topicId:i})})},getBannerList:function(e){var t=e.forumId,i=void 0===t?0:t;s.a.log("[BBS].getBannerList：");var o=this,a=r.a.BBS_URL+"/forum/banner",c={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(c.id=i,n.a.http.post(a,c).then(function(e){var t=e.data;return s.a.log("[BBS].getBannerList.SUCCESS: ",t),t.meta&&1001===t.meta.code?o.getToken().then(function(e){return r.a.BBS_TOKEN=e,o.getBannerList({forumId:i})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.data.dataList)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,o.getBannerList({forumId:i})})},getComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,o=e.page,a=void 0===o?1:o,l=e.pageNum,m=void 0===l?r.a.BBS_LIMIT:l,u=this,f=r.a.BBS_URL+"/v1/comment/list",p={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(p.topicId=parseInt(i),p.loginUserId=c.a.getters.userInfo.id,p.page=a,p.pageLimit=m,p.appId?n.a.http.post(f,p).then(function(e){var t=e.data;return s.a.log("[BBS].getComments.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return r.a.BBS_TOKEN=e,u.getComments({topicId:i,page:a,pageNum:m})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.data.dataList)}):new d(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,u.getComments({topicId:i,page:a,pageNum:m})})},getPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,o=e.commentId,a=void 0===o?0:o,c=e.page,l=void 0===c?1:c,m=e.pageNum,u=void 0===m?r.a.BBS_LIMIT:m,f=this,p=r.a.BBS_URL+"/v1/like/list",h={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(h.topicId=parseInt(i),h.cId=parseInt(a),h.page=l,h.pageLimit=u,h.appId?n.a.http.post(p,h).then(function(e){var t=e.data;return s.a.log("[BBS].getPraise.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return r.a.BBS_TOKEN=e,f.getPraise({topicId:i,commentId:a,page:l,pageNum:u})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.data.dataList)}):new d(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,f.getPraise({topicId:i,commentId:a,page:l,pageNum:u})})},addComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,o=e.content,a=void 0===o?"":o,l=e.toId,m=void 0===l?0:l,u=e.toUserId,f=void 0===u?0:u,p=this,h=r.a.BBS_URL+"/v1/comment/add",g={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(g.topicId=parseInt(i),g.userInfo={userId:c.a.getters.userInfo.id,name:c.a.getters.userInfo.title,subtitle:c.a.getters.userInfo.subtitle,avatar:c.a.getters.userInfo.avatarId},g.content=a.replace(/(^\s*)|(\s*$)/g,""),g.toId=parseInt(m),g.toUserId=parseInt(f),g.appId?n.a.http.post(h,g).then(function(e){var t=e.data;return s.a.log("[BBS].addComment.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return r.a.BBS_TOKEN=e,p.addComment({topicId:i,content:a,toId:m,toUserId:f})}):t.meta&&0!==t.meta.code?d.reject(t):(p.setCurrentItem({OPT:1}),d.resolve(t))}):new d(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,p.addComment({topicId:i,content:a,toId:m,toUserId:f})})},delComment:function(e){var t=e.topicId,i=void 0===t?0:t,o=e.commentId,a=void 0===o?0:o;s.a.log("[BBS].delComment：");var l=this,m=r.a.BBS_URL+"/v1/comment/del",u={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(u.topicId=parseInt(i),u.cId=parseInt(a),u.userId=c.a.getters.userInfo.id,n.a.http.post(m,u).then(function(e){var t=e.data;return s.a.log("[BBS].delComment.SUCCESS: ",t),t.meta&&1001===t.meta.code?l.getToken().then(function(e){return r.a.BBS_TOKEN=e,l.delComment({topicId:i,commentId:a})}):t.meta&&0!==t.meta.code?d.reject(t.meta.message):(l.setCurrentItem({OPT:0}),d.resolve(t))})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,l.delComment({topicId:i,commentId:a})})},addPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,o=e.toId,s=void 0===o?0:o,a=this,l=r.a.BBS_URL+"/v1/like/add",m={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(m.topicId=parseInt(i),m.userInfo={userId:c.a.getters.userInfo.id,name:c.a.getters.userInfo.title,subtitle:c.a.getters.userInfo.subtitle,avatar:c.a.getters.userInfo.avatarId},m.toId=parseInt(s),n.a.http.post(l,m).then(function(e){var t=e.data;return t.meta&&1001===t.meta.code?a.getToken().then(function(e){return r.a.BBS_TOKEN=e,a.addPraise({topicId:i,toId:s})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.Res)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,a.addPraise({topicId:i,toId:s})})},delPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,i=void 0===t?0:t,o=e.commentId,s=void 0===o?0:o,a=this,l=r.a.BBS_URL+"/v1/like/del",m={appId:r.a.BBS_APPID,token:r.a.BBS_TOKEN,toonType:r.a.toonType||100};return r.a.BBS_TOKEN?(m.topicId=parseInt(i),m.userId=c.a.getters.userInfo.id,m.cId=parseInt(s),n.a.http.post(l,m).then(function(e){var t=e.data;return t.meta&&1001===t.meta.code?a.getToken().then(function(e){return r.a.BBS_TOKEN=e,a.delPraise({topicId:i,commentId:s})}):t.meta&&0!==t.meta.code?d.reject(t):d.resolve(t.Res)})):this.getToken().then(function(e){return r.a.BBS_TOKEN=e,a.delPraise({topicId:i,commentId:s})})},checkFeed:function(){var e=this;if(c.a.getters.userInfo.feedId)return d.resolve();i.i(l.a)({functionType:"1"},"card/chooseCard",function(t){e.$logger.log("获取名片信息：：：：",t),e.feedId=t.feedId,t&&t.feedId&&n.a.http.get("/user/feed?feedId="+encodeURIComponent(t.feedId),function(e){return 0===e.code?d.resolve():d.reject("error")})},function(){return d.reject("未返回信息")})}};t.a=u},289:function(e,t,i){i(297);var o=i(41)(i(292),i(300),null,null);e.exports=o.exports},292:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-swipe-label",props:{id:String,fixed:{type:Boolean,default:!1}},data:function(){return{position:0,isSticky:!1,isFixed:!1,floatClass:"",startX:0,lastX:0,lastMoveTime:0,lastMoveStart:0,stopMovingTag:!1,minl:0,maxl:-8e3,conStyle:{left:"0px"},left:0}},computed:{oh:function(){return this.$el.getBoundingClientRect().top}},watch:{"$route.name":function(e){this.fixed&&(this._inactive?(this.$logger.log("v-swipe-label.watch.back..."),window.removeEventListener("scroll",this.scrollHandle)):(this.$logger.log("v-swipe-label.watch.in..."),window.addEventListener("scroll",this.scrollHandle)))}},created:function(){this.$logger.log("v-swipe-label created...")},mounted:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{init:function(){if(this.maxl=-(this.$refs.content.offsetWidth-this.$refs.container.offsetWidth),this.fixed){this.getScrollEventTarget(this.$el).addEventListener("scroll",this.throttle(this.scrollHandle,10)),this.position=this.$el.getBoundingClientRect().top}},throttle:function(e,t){var i=void 0,o=void 0,n=void 0,r=void 0,s=void 0,a=function(){e.apply(r,s),o=i};return function(){if(r=this,s=arguments,i=Date.now(),n&&(clearTimeout(n),n=null),o){var e=t-(i-o);e<0?a():n=setTimeout(function(){a()},e)}else a()}},getScrollEventTarget:function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var i=document.defaultView.getComputedStyle(t).overflowY;if("scroll"===i||"auto"===i)return t;t=t.parentNode}return window},scrollHandle:function(e){var t=e.target.scrollTop;this.fixed&&t>this.position?!function(){var e=window.navigator.userAgent,t=e.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/);return t&&t[2]&&parseInt(t[2].replace(/_/g,"."),10)>=6}()?this.isFixed=!0:this.isSticky=!0:(this.isFixed=!1,this.isSticky=!1)},swipe:function(e){this.$logger.log(">>>>>>>>>>>>>  swipe in v-swipe-label...",e),e.srcEvent.stopPropagation()},touchStart:function(e){if(!(this.maxl>=0)){var t=e.changedTouches[0];this.startX=this.lastX=t.clientX,this.lastMoveStart=this.lastX,this.lastMoveTime=Date.now(),this.stopMovingTag=!0}},touchMoving:function(e){if(!(this.maxl>=0)){var t=e.changedTouches[0],i=t.clientX,o=i-this.lastX,n=parseInt(this.left)+o;if(!(n>=this.minl||n<this.maxl)){this.left=n,this.lastX=i;var r=Date.now();this.stopMovingTag=!0,r-this.lastMoveTime>300&&(this.lastMoveTime=r,this.lastMoveStart=i)}}},touchEnd:function(e){if(!(this.maxl>=0)){var t=this,i=e.changedTouches[0],o=i.clientX,n=o-this.lastX,r=parseInt(this.left)+parseInt(n);r>=t.minl&&(r=t.minl),r<t.maxl&&(r=t.maxl),this.left=r,this.lastX=o;var s=Date.now(),a=(o-this.lastMoveStart)/(s-this.lastMoveTime);this.stopMovingTag=!1,function(e,i,o){function n(){if(!t.stopMovingTag){var a=Date.now(),c=a-i,l=e+c*s;if(!(r*l>0)){var m=(e+l)/2*c;o+m>=t.minl&&(o=t.minl,m=0),o+m<t.maxl&&(o=t.maxl,m=0),t.left=o+m,setTimeout(n,10)}}}var r=e>0?-1:1,s=9e-4*r;n()}(a,s,r)}}}}},294:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-swipe-label{width:100%;z-index:98!important}.v-swipe-label.sticky{position:-webkit-sticky;position:sticky;top:0;left:0}.v-swipe-label__container{position:relative;width:100%;overflow-y:hidden;overflow-x:auto;background:#fff;z-index:99!important}.v-swipe-label__container.fixed{position:fixed;top:0;left:0}.v-swipe-label__container::-webkit-scrollbar{display:none}.v-swipe-label__content{white-space:nowrap}.v-swipe-label__content>div{display:inline-block;font-size:.37333rem;line-height:1.01333rem;padding:0 .26667rem;margin:0 .26667rem;border-color:#fff}@-webkit-keyframes animat{0%{opacity:.5;filter:alpha(opacity=50)}10%{opacity:1;filter:alpha(opacity=100)}}@keyframes animat{0%{opacity:.5;filter:alpha(opacity=50)}10%{opacity:1;filter:alpha(opacity=100)}}",""])},297:function(e,t,i){var o=i(294);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("aa90924a",o,!0)},300:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-swipe-label",class:{sticky:e.fixed&&e.isSticky}},[i("div",{ref:"container",staticClass:"v-swipe-label__container",class:{fixed:e.fixed&&e.isFixed},on:{touchend:function(e){e.stopPropagation()}}},[i("div",{ref:"content",staticClass:"v-swipe-label__content",style:{left:e.left+"px"}},[e._t("default")],2)])])},staticRenderFns:[]}},332:function(e,t,i){i(345);var o=i(41)(i(334),i(350),null,null);e.exports=o.exports},334:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(45),n=i.n(o),r=i(234),s=i.n(r),a=i(279),c=i(27),l=i(26),m=i(74);i.n(m);t.default={name:"v-comment-bar",props:{id:String,value:{type:Object,default:function(){}},delTopicEnable:{type:Boolean,default:!1},delCommentEnable:{type:Boolean,default:!1},praiseEnable:{type:Boolean,default:!1},commentEnable:{type:Boolean,default:!1}},data:function(){return{comment:this.value||{Id:0}}},computed:s()({},i.i(m.mapState)({subjects:function(e){return e.forum.forumSubjects},comments:function(e){return e.forum.forumComments},formatedCreateDt:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)?c.b(this.subjects[this.comment.Id].Tm):this.comments.hasOwnProperty(this.comment.CommentId)?c.b(this.comments[this.comment.CommentId].Tm):""},formatedPraiseNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeNum?this.subjects[this.comment.Id].LikeNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeNum?this.comments[this.comment.CommentId].LikeNum:"赞"},formatedCommentNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].CommentNum?this.subjects[this.comment.Id].CommentNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].CommentNum?this.comments[this.comment.CommentId].CommentNum:"评论"},formatedLikeFlag:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeFlag?this.subjects[this.comment.Id].LikeFlag:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeFlag?this.comments[this.comment.CommentId].LikeFlag:0}}),{delTopicEnableTag:function(){return this.delTopicEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)},delCommentEnableTag:function(){return this.delCommentEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)}}),watch:{value:function(e){this.comment=e},comment:function(e){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_FORUM_COMMENT",n()(this.comment)):this.$store.commit("SET_FORUM_COMMENT",n()(this.comment)),this.$emit("input",e)},"comment.LikeFlag":function(e){this.$emit("input",this.comment)}},mounted:function(){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_FORUM_COMMENT",n()(this.comment)):this.$store.commit("SET_FORUM_COMMENT",n()(this.comment))},methods:{togglePraise:function(e){var t=this;this.praiseEnable&&(e.stopPropagation(),this.comment.LikeFlag?a.a.delPraise({topicId:this.comment.Id||0,commentId:this.comment.CommentId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!1),t.$set(t.comment,"LikeNum",t.comment.LikeNum-1),t.$store.commit("DEL_FORUM_PRAISE",t.comment)}).catch(function(e){t.$logger.error("p-forum-reply.delete praise error: ",e)}):a.a.addPraise({topicId:this.comment.Id||0,toId:this.comment.CommentId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!0),t.$set(t.comment,"LikeNum",t.comment.LikeNum+1),t.$store.commit("ADD_FORUM_PRAISE",t.comment)}).catch(function(e){t.$logger.error("p-forum-reply.post praise error: ",e)}))},delTopic:function(){var e=this;a.a.delTopic({topicId:this.comment.Id||0}).then(function(t){e.$logger.log("p-forum-comments.delTopic.SUCCESS: ",t),e.$router.go(-1)}).catch(function(t){e.$logger.error("p-forum-comments.delTopic.ERROR: ",t)})},delComment:function(){var e=this;a.a.delComment({topicId:this.comment.Id,commentId:this.comment.CommentId}).then(function(t){e.$logger.log("p-forum-comments.delComment.SUCCESS: ",t),e.$store.commit("DEL_FORUM_COMMENT_NUM",{Id:e.comment.Id}),e.$emit("handle-del-comment",t)}).catch(function(t){e.$logger.error("p-forum-comments.delComment.ERROR: ",t)})},addComment:function(e){if(this.commentEnable){l.a.log("p-forum-comments.addComment..."),e.stopPropagation();var t=this.comment.CommentId?this.comment.UserId:0;this.$router.push({name:"forum-reply",params:{forumId:this.$route.params.forumId,topicId:this.comment.Id},query:{toid:this.comment.CommentId,touid:t}})}}}}},341:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".v-comment-bar{padding:.48rem 0;background:#fff;-webkit-box-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-comment-bar,.v-comment-bar>div{display:-webkit-box;display:flex;display:-webkit-flex}.v-comment-bar>div{color:#8e8e93;-moz-flex-grow:0;-webkit-flex-grow:0;flex-grow:0;-webkit-box-flex:0;-webkit-flex-shrink:0;flex-shrink:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar>div:first-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1}.v-comment-bar>div p{font-size:.32rem;line-height:.4rem}.v-comment-bar .v-comment-bar__dt{margin-left:.4rem;-webkit-flex-shrink:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar .v-comment-bar__del{margin-left:.4rem;-webkit-flex-shrink:1;flex-shrink:1;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-flex-basis:auto;flex-basis:auto;color:#3395ff}.v-comment-bar .v-comment-bar__del p{display:inline}.v-comment-bar .icon{width:.4rem;height:.4rem;font-size:.4rem;margin-right:.13333rem}.v-comment-bar .icon.icon-heart-o{color:#fb434f}.v-comment-bar__praise{width:1.49333rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.v-comment-bar__praise .icon.done{-webkit-animation:shake .5s 1;animation:shake .5s 1}.v-comment-bar__praise .icon.cancel{-webkit-animation:shake2 .5s 1;animation:shake2 .5s 1}.v-comment-bar__praise.act{-webkit-animation:shake .1s 1;animation:shake .1s 1}@-webkit-keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@-webkit-keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}.v-comment-bar__comment{width:1.49333rem;margin-right:.4rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}",""])},345:function(e,t,i){var o=i(341);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("29b12d52",o,!0)},350:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-comment-bar"},[i("div",[i("div",{staticClass:"v-comment-bar__dt"}),e._v(" "),e.delTopicEnableTag?i("div",{staticClass:"v-comment-bar__del"},[i("p",{on:{click:e.delTopic}},[e._v("删除主题")])]):e._e(),e._v(" "),e.delCommentEnableTag?i("div",{staticClass:"v-comment-bar__del"},[i("p",{on:{click:e.delComment}},[e._v("删除评论")])]):e._e()]),e._v(" "),i("div",{staticClass:"v-comment-bar__praise",on:{click:e.togglePraise}},[i("span",{class:["icon",{"icon-heart cancel":!e.formatedLikeFlag},{"icon-heart-o done":e.formatedLikeFlag}]}),e._v(" "),i("p",{domProps:{textContent:e._s(e.formatedPraiseNum)}})]),e._v(" "),i("div",{staticClass:"v-comment-bar__comment",on:{click:e.addComment}},[i("span",{staticClass:"icon icon-comment"}),e._v(" "),i("p",{domProps:{textContent:e._s(e.formatedCommentNum)}})])])},staticRenderFns:[]}},425:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(72),n=i.n(o),r=i(234),s=i.n(r),a=i(25),c=i(26),l=i(232),m=i.n(l),d=i(239),u=i.n(d),f=i(289),p=i.n(f),h=i(332),g=i.n(h),v=i(774),b=i.n(v),_=i(279),y=i(74),I=(i.n(y),i(269)),k=i.n(I);t.default={props:{value:{type:Object,default:function(){}},topicId:{type:String|Number,default:0}},components:{vFeed:m.a,vText:u.a,pForumCommentsBar:g.a,vSwipeLabel:p.a,pForumReplyBtn:b.a,vScroll:k.a},data:function(){return{labs:[{id:0,txt:"评论"},{id:1,txt:"点赞"}],currentLab:0,comment:{},listData:[],praiseList:[]}},computed:s()({},i.i(y.mapState)({commentNum:function(e){return!this.comment.CommentId&&e.forum.forumSubjects.hasOwnProperty(this.comment.Id)&&e.forum.forumSubjects[this.comment.Id].CommentNum?e.forum.forumSubjects[this.comment.Id].CommentNum:e.forum.forumComments.hasOwnProperty(this.comment.CommentId)&&e.forum.forumComments[this.comment.CommentId].CommentNum?e.forum.forumComments[this.comment.CommentId].CommentNum:""},likeNum:function(e){return!this.comment.CommentId&&e.forum.forumSubjects.hasOwnProperty(this.comment.Id)&&e.forum.forumSubjects[this.comment.Id].LikeNum?e.forum.forumSubjects[this.comment.Id].LikeNum:e.forum.forumComments.hasOwnProperty(this.comment.CommentId)&&e.forum.forumComments[this.comment.CommentId].LikeNum?e.forum.forumComments[this.comment.CommentId].LikeNum:""}})),watch:{value:function(e){this.comment=e},comment:function(e){this.$emit("input",e)},"comment.LikeFlag":function(e){c.a.log("!!!watch: item ===> ",this.comment.LikeFlag,e),this.praiseList=[]}},created:function(){c.a.log("p-forum-comments.created... "),this.init()},methods:{init:function(){c.a.log("p-forum-comments.init... "),this.$set(this.labs[0],"txt",this.labs[0].txt+this.comment.CommentNum),this.$set(this.labs[1],"txt",this.labs[1].txt+this.comment.LikeNum)},clickLabel:function(e){this.currentLab=e},getList:function(e){var t=this,i=e.page,o=void 0===i?1:i,r=e.pageNum,s=void 0===r?a.a.BBS_MAX:r;return _.a.getComments({topicId:this.topicId,page:o,pageNum:s}).then(function(e){return c.a.log("===> p-forum-comments.getList: ",e),e.length&&e.forEach(function(e){e.ToUserId&&e.toUserInfo.name&&(e.Content='回复<span class="re">@'+e.toUserInfo.name+":</span>"+e.Content),e.comment={Id:e.SubjectId,CommentId:parseInt(e.Id),UserId:e.UserId,Content:e.Content,CommentFlag:e.CommentFlag,CommentNum:e.CommentNum,LikeFlag:e.LikeFlag,LikeNum:e.LikeNum}}),t.listData=t.listData.concat(e),n.a.resolve(e)})},getPraise:function(e){var t=this,i=e.page,o=void 0===i?1:i,r=e.pageNum,s=void 0===r?a.a.BBS_MAX:r;return _.a.getPraise({topicId:this.topicId,page:o,pageNum:s}).then(function(e){return c.a.log("comment-info.getPraise: ",e),t.praiseList=t.praiseList.concat(e),n.a.resolve(e)})},handleDelComment:function(e){var t=_.a.getCurrentItem();t&&1===t.OPT?this.$logger.log("p-forum-comments.handleDelComment: add..."):this.$logger.log("p-forum-comments.handleDelComment: del..."),_.a.clearCurrentItem(),this.listData=[]},reply:function(e,t,i){c.a.log("v-forum-comments.reply...",e,t),i.stopPropagation(),this.$router.push({name:"forum-reply",params:{forumId:this.$route.params.forumId,topicId:this.topicId},query:{toid:e,touid:t}})}}}},426:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(234),n=i.n(o),r=i(259),s=i.n(r),a=i(279),c=i(74);i.n(c);t.default={name:"p-comment-btn",components:{vButton:s.a},props:{value:{type:Object,default:function(){return{LikeFlag:0}}},commentNum:Number,praiseNum:Number},data:function(){return{comment:this.value,isLock:!1,comments:this.commentNum,praises:this.praiseNum}},computed:n()({},i.i(c.mapState)({formatedLikeFlag:function(e){return e.forum.forumSubjects[this.comment.Id]&&e.forum.forumSubjects[this.comment.Id].LikeFlag?e.forum.forumSubjects[this.comment.Id].LikeFlag:0}}),{praiseTxt:function(){return this.comment&&this.comment.LikeFlag?"已点赞":"点赞"}}),watch:{value:function(e){this.comment=e},comment:function(e){this.$emit("input",e)},isZan:function(e){this.praise=e},commentNum:function(e){this.comments=e},praiseNum:function(e){this.praises=e}},mounted:function(){},methods:{goToComment:function(){this.$router.push({name:"forum-reply",params:{forumId:this.$route.params.forumId,topicId:this.comment.Id},query:{commentNum:this.comment.CommentNum,likeNum:this.comment.LikeNum,likeFlag:this.comment.LikeFlag}})},togglePraise:function(e){var t=this;this.$logger.log("p-forum-reply.method.togglePraise..."),e.stopPropagation(),this.comment.LikeFlag?a.a.delPraise({topicId:this.$route.params.topicId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!1),t.$set(t.comment,"LikeNum",t.comment.LikeNum-1),t.$store.commit("DEL_FORUM_PRAISE",t.comment)}).catch(function(e){t.$logger.error("p-forum-reply.delete praise error: ",e)}):a.a.addPraise({topicId:this.comment.Id||0}).then(function(e){t.$set(t.comment,"LikeFlag",!0),t.$set(t.comment,"LikeNum",t.comment.LikeNum+1),t.$store.commit("ADD_FORUM_PRAISE",t.comment)}).catch(function(e){t.$logger.error("p-forum-reply.post praise error: ",e)})}}}},492:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(232),n=i.n(o),r=i(239),s=i.n(r),a=i(279),c=i(773),l=i.n(c),m=i(332),d=i.n(m);t.default={components:{vFeed:n.a,vText:s.a,pForumComments:l.a,pForumCommentsBar:d.a},data:function(){return{detail:{userInfo:{}},forumList:[]}},computed:{screenWidth:function(){return document.body.offsetWidth}},created:function(){this.$logger.log("forum-topics-detail.mounted... ")},activated:function(){if(this.$store.getters.position.hasOwnProperty(this.$route.query.timestamp)){this.$logger.log("forum-topics-detail.activated: back!");var e=a.a.getCurrentItem();e&&e.OPT?(this.$store.commit("ADD_FORUM_COMMENT_NUM",{Id:this.$route.params.topicId}),this.$store.commit("DEL_POSITION",this.$route.query.timestamp)):e&&0===e.OPT&&this.$store.commit("DEL_POSITION",this.$route.query.timestamp),a.a.clearCurrentItem()}else this.$logger.log("forum-topics-detail.activated: in~"),this.init()},methods:{init:function(){var e=this;this.detail={userInfo:{},comment:{}},this.$logger.log("forum-topics-detail.init... "),a.a.getTopicDetail({topicId:this.$route.params.topicId}).then(function(t){if(e.$logger.log("forum-topics-detail.getTopicDetail... ",t),t.pics){var i=[];t.pics.forEach(function(e){"string"==typeof e?i.push({url:e}):e.url&&e.width&&i.push({url:e.url,width:e.width,height:e.height})}),t.album=i}t.comment={Id:t.id,UserId:t.userId,CommentFlag:t.CommentFlag,CommentNum:t.CommentNum,LikeFlag:t.LikeFlag,LikeNum:t.LikeNum},e.detail=t})},goViewer:function(e){var t=this;this.$logger.log("forum-topics-detail.goViewer: ",e),this.$root.img=[],this.detail.pics.forEach(function(e,i){t.$root.img.push(e.url)}),this.$router.push({name:"viewer",query:{idx:e}})}}}},543:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".p-comments-btn{height:1.46667rem;width:100%;position:fixed;bottom:0;left:0;border-top:1px solid #dddee3;background:#fff;z-index:999;color:#5c5c5c}.p-comments-btn,.p-comments-btn>div{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.p-comments-btn>div{height:100%;-webkit-box-flex:0;-webkit-flex:0 0 1.6rem;flex:0 0 1.6rem;border-right:1px solid #dddee3;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.p-comments-btn>div:last-child{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto;border-right:0}.p-comments-btn .icon{font-size:.48rem;margin-bottom:.18667rem}.p-comments-btn .icon.icon-heart-o{color:#f55151}.p-comments-btn_comment{padding:.26667rem;font-size:.4rem}",""])},588:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".page-forum-topics-detail ul.end{border-bottom:.26667rem solid #f2f2f4}.page-forum-topics-detail .v-scroll-container{height:auto!important;overflow:initial!important}",""])},605:function(e,t,i){t=e.exports=i(150)(),t.push([e.i,".p-forum-comments{width:100%;overflow:hidden}.p-forum-comments .v-swipe-label{border-bottom:.02667rem solid #f2f2f4}.p-forum-comments .v-scroll-container{padding-bottom:1.33333rem}.p-forum-comments .comment-list li{border-bottom:.02667rem solid #f2f2f4}.p-forum-comments .praise-list li{background:#fff}",""])},654:function(e,t,i){var o=i(543);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("2469d908",o,!0)},699:function(e,t,i){var o=i(588);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("1fb674e6",o,!0)},716:function(e,t,i){var o=i(605);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(151)("4de1342a",o,!0)},773:function(e,t,i){i(716);var o=i(41)(i(425),i(864),null,null);e.exports=o.exports},774:function(e,t,i){i(654);var o=i(41)(i(426),i(802),null,null);e.exports=o.exports},802:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-comments-btn"},[i("div",{staticClass:"p-comments-btn_praise",on:{click:e.togglePraise}},[i("i",{staticClass:"icon",class:[{"icon-heart":!e.formatedLikeFlag},{"icon-heart-o":e.formatedLikeFlag}]}),e._v(" "),i("p",[e._v(e._s(e.praiseTxt))])]),e._v(" "),i("div",{staticClass:"p-comments-btn_comment"},[i("v-button",{on:{click:function(t){t.stopPropagation(),e.goToComment(t)}}},[e._v("评论")])],1)])},staticRenderFns:[]}},847:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page page-forum-topics-detail"},[i("ul",[i("li",[i("div",{staticClass:"info"},[i("v-feed",{attrs:{feedId:e.detail.userInfo.feedId,imgUrl:e.detail.userInfo.avatar,title:e.detail.userInfo.name,subtitle:e.detail.userInfo.subtitle,desc:e._f("specialTime")(parseInt(e.detail.addtm)),classes:"title small no-border"}}),e._v(" "),i("v-text",{attrs:{classes:"tit",value:e.detail.title}}),e._v(" "),i("v-text",{attrs:{classes:"con",value:e.detail.abstract}})],1)])]),e._v(" "),i("ul",{staticClass:"listview-info-img"},e._l(e.detail.pics,function(t,o){return i("li",{style:{height:t.height&&t.width?parseInt(e.screenWidth/(t.width/t.height))+"px":"auto"},on:{click:function(t){t.stopPropagation(),e.goViewer(o)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.url,expression:"img.url"}]})])})),e._v(" "),i("ul",{staticClass:"end"},[i("li",[i("p-forum-comments-bar",{attrs:{"del-topic-enable":!0,praiseEnable:!0,commentEnable:!0},model:{value:e.detail.comment,callback:function(t){e.detail.comment=t},expression:"detail.comment"}})],1)]),e._v(" "),i("p-forum-comments",{attrs:{"topic-id":e.$route.params.topicId},model:{value:e.detail.comment,callback:function(t){e.detail.comment=t},expression:"detail.comment"}})],1)},staticRenderFns:[]}},864:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-forum-comments"},[i("v-swipe-label",{attrs:{id:"vSwipeLableComments",fixed:!1}},[i("div",{class:["itm",{cur:0==e.currentLab}],on:{click:function(t){e.clickLabel(0)}}},[e._v("评论"+e._s(e.commentNum))]),e._v(" "),i("div",{class:["itm",{cur:1==e.currentLab}],on:{click:function(t){e.clickLabel(1)}}},[e._v("点赞"+e._s(e.likeNum))])]),e._v(" "),i("v-scroll",{attrs:{func:e.getList,"func-type":"limit",enabled:0===e.currentLab},model:{value:e.listData,callback:function(t){e.listData=t},expression:"listData"}},[0==e.currentLab?i("ul",{staticClass:"comment-list"},e._l(e.listData,function(t,o){return i("li",{staticClass:"height-auto",attrs:{id:"commentLi"+o}},[i("v-feed",{attrs:{feedId:t.userInfo.feedId,imgUrl:t.userInfo.avatar,title:t.userInfo.name,subtitle:t.userInfo.subtitle,desc:e._f("specialTime")(t.Tm),classes:"title small no-border"}}),e._v(" "),i("v-text",{attrs:{classes:"content no-border",value:t.comment.Content},nativeOn:{click:function(i){e.reply(t.comment.Id,t.UserId,i)}}}),e._v(" "),i("p-forum-comments-bar",{attrs:{classes:"footer",delCommentEnable:!0,praiseEnable:!0,commentEnable:!0},on:{"handle-del-comment":e.handleDelComment},model:{value:t.comment,callback:function(e){t.comment=e},expression:"item.comment"}})],1)})):e._e(),e._v(" "),i("div",{slot:"empty"},[i("div",{staticClass:"empty_bg"}),e._v(" "),i("p",{staticClass:"empty_content"},[e._v("快来发表第一个评论吧")])])]),e._v(" "),i("v-scroll",{attrs:{func:e.getPraise,"func-type":"limit",enabled:1===e.currentLab},model:{value:e.praiseList,callback:function(t){e.praiseList=t},expression:"praiseList"}},[1==e.currentLab?i("ul",{staticClass:"praise-list"},e._l(e.praiseList,function(t,o){return i("li",{staticClass:"height-auto",attrs:{id:"praiseLi"+o}},[i("v-feed",{attrs:{feedId:t.userInfo.feedId,imgUrl:t.userInfo.avatar,title:t.userInfo.name,subtitle:t.userInfo.subtitle,desc:e._f("specialTime")(t.Tm),classes:"title small no-border"}})],1)})):e._e(),e._v(" "),i("div",{slot:"empty"},[i("div",{staticClass:"empty_bg"}),e._v(" "),i("p",{staticClass:"empty_content"},[e._v("快来点个赞吧")])])]),e._v(" "),i("p-forum-reply-btn",{model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)},staticRenderFns:[]}}});