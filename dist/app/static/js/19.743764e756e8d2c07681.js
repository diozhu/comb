webpackJsonp([19],{177:function(e,t,n){n(746);var i=n(43)(n(489),n(907),null,null);e.exports=i.exports},246:function(e,t,n){n(251);var i=n(43)(n(249),n(253),null,null);e.exports=i.exports},247:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=new r.a;t.a=o},248:function(e,t,n){"use strict";var i=n(268),r=n.n(i);n.d(t,"a",function(){return r.a})},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.default={name:"v-feed",props:{id:String,feedId:String,imgUrl:String,msgNum:String,title:String,subtitle:String,sex:String,age:String,desc:String,classes:String,iconFunc:Function},data:function(){return{}},computed:{feedImg:function(){return i.d(this.imgUrl)},feedClass:function(){return/^o_/.test(this.feedId)||/^s_/.test(this.feedId)?"square":/^g_/.test(this.feedId)?"hexagon":"circle"}},created:function(){},methods:{handleClick:function(e){this.iconFunc&&"function"==typeof this.iconFunc&&(e.stopPropagation(),e.preventDefault(),this.iconFunc(),this.$toast({message:"您是不是想去个人中心？",duration:1e3,position:"bottom"}))}}}},250:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,'.v-feed{height:1.81333rem;background:#fff;border-bottom:1px solid #dddee3;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-feed>div{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 auto;flex:0 0 auto}.v-feed>div:last-child{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.v-feed__img{width:1.44rem;height:1.44rem;margin-left:.26667rem;margin-right:.26667rem;position:relative;border:0}.v-feed__img img{width:100%}.v-feed__img.circle{border-radius:50%;overflow:hidden}.v-feed__img.hexagon{height:1.22667rem;overflow:hidden}.v-feed__img.hexagon:before{left:0;border-right:.32rem solid transparent}.v-feed__img.hexagon:after,.v-feed__img.hexagon:before{content:"";width:0;height:0;position:absolute;top:0;border-top:.61333rem solid #fff;border-bottom:.61333rem solid #fff}.v-feed__img.hexagon:after{right:0;border-left:.32rem solid transparent}.small{height:1.38667rem}.small .v-feed__img{width:.85333rem;height:.85333rem;margin-left:.4rem}.small .v-feed__tit{font-size:.37333rem}.small .v-feed__sub,.v-feed__num{font-size:.32rem}.v-feed__num{width:.48rem;height:.48rem;border-radius:50%;background:#ff3b2f;position:absolute;right:.16rem;top:-.10667rem;color:#fff;line-height:.48rem;text-align:center}.v-feed__num.mix{width:.26667rem;height:.26667rem;color:transparent;right:.21333rem;top:-.05333rem}.v-feed__con{margin-right:.26667rem;-webkit-box-orient:vertical;-webkit-flex-direction:column;flex-direction:column}.v-feed__con,.v-feed__con-info{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal}.v-feed__con-info{-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-feed__con-info>div:last-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1;-webkit-flex-basis:auto;flex-basis:auto}.v-feed__tit{font-size:.45333rem;line-height:1}.v-feed__sex{width:.32rem;height:.32rem;margin:.02667rem .13333rem;text-align:center;font-size:.32rem;line-height:.32rem;color:#ff88b2;border-radius:.05333rem}.v-feed__sex.icon-male{color:#4392ec}.v-feed__age{font-size:.26667rem;line-height:.45333rem;color:#777e8c}.v-feed__desc{text-align:right;font-size:.32rem;line-height:1;color:#8e8e93}.v-feed__sub{margin-top:.18667rem;font-size:.37333rem;line-height:1;color:#777e8c}',""])},251:function(e,t,n){var i=n(250);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("1e8d48d0",i,!0)},252:function(e,t,n){n(278);var i=n(43)(n(274),null,null,null);e.exports=i.exports},253:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-feed",class:[e.classes]},[n("div",{on:{click:e.handleClick}},[n("div",{staticClass:"v-feed__img",class:[e.feedClass]},[n("img",{attrs:{src:e.feedImg}})]),e.msgNum>0?n("i",{staticClass:"v-feed__num",class:[{mix:e.msgNum>9}],domProps:{textContent:e._s(e.msgNum)}}):e._e()]),e._v(" "),n("div",{staticClass:"v-feed__con"},[n("div",{staticClass:"v-feed__con-info"},[n("div",{staticClass:"v-feed__tit",domProps:{textContent:e._s(e.title)}}),e._v(" "),e.sex?n("div",{staticClass:"v-feed__sex icon",class:[{"icon-male":"1"==e.sex},{"icon-female":"2"==e.sex}]}):e._e(),e._v(" "),e.age?n("div",{staticClass:"v-feed__age",domProps:{textContent:e._s(e.age)}}):e._e(),e._v(" "),e.desc?n("div",{staticClass:"v-feed__desc",domProps:{textContent:e._s(e.desc)}}):e._e()]),e._v(" "),n("div",{staticClass:"v-feed__sub",domProps:{textContent:e._s(e.subtitle)}})])])},staticRenderFns:[]}},254:function(e,t,n){n(277);var i=n(43)(n(273),n(279),null,null);e.exports=i.exports},255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"fading-circle",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}},created:function(){if(!this.$isServer){this.styleNode=document.createElement("style");var e=".circle-color-"+this._uid+" > div::before { background-color: "+this.spinnerColor+"; }";this.styleNode.type="text/css",this.styleNode.rel="stylesheet",this.styleNode.title="fading circle style",document.getElementsByTagName("head")[0].appendChild(this.styleNode),this.styleNode.appendChild(document.createTextNode(e))}},destroyed:function(){this.styleNode&&this.styleNode.parentNode.removeChild(this.styleNode)}}},256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"snake",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}}}},257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"triple-bounce",props:{size:Number,color:String},computed:{bounceStyle:function(){return{backgroundColor:this.spinnerColor}}}}},258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["snake","triple-bounce","fading-circle"],r=function(e){return"[object Number]"==={}.toString.call(e)?(i.length<=e&&(console.warn("'"+e+"' spinner not found, use the default spinner."),e=0),i[e]):(-1===i.indexOf(e)&&(console.warn("'"+e+"' spinner not found, use the default spinner."),e=i[0]),e)};t.default={name:"mt-spinner",computed:{spinner:function(){return"spinner-"+r(this.type)}},components:{SpinnerSnake:n(266),SpinnerTripleBounce:n(267),SpinnerFadingCircle:n(265)},props:{type:{default:0},size:{type:Number,default:28},color:{type:String,default:"#ccc"}}}},259:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,'.v-spinner__fading-circle{width:.74667rem;height:.74667rem;position:relative}.v-spinner__fading-circle .circle{background:transparent;border:0;width:100%;height:100%;size:.74667rem;position:absolute}.v-spinner__fading-circle .circle:before{width:15%;height:15%;content:" ";display:block;margin:0 auto;size:.21333rem;border-radius:50%;-webkit-animation:v-spinner__fading-circle--opacity 1.2s infinite ease-in-out both;animation:v-spinner__fading-circle--opacity 1.2s infinite ease-in-out both}.v-spinner__fading-circle .circle.is-circle1{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.v-spinner__fading-circle .circle.is-circle1:before{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.v-spinner__fading-circle .circle.is-circle2{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.v-spinner__fading-circle .circle.is-circle2:before{-webkit-animation-delay:-1s;animation-delay:-1s}.v-spinner__fading-circle .circle.is-circle3{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.v-spinner__fading-circle .circle.is-circle3:before{-webkit-animation-delay:-.9s;animation-delay:-.9s}.v-spinner__fading-circle .circle.is-circle4{-webkit-transform:rotate(120deg);transform:rotate(120deg)}.v-spinner__fading-circle .circle.is-circle4:before{-webkit-animation-delay:-.8s;animation-delay:-.8s}.v-spinner__fading-circle .circle.is-circle5{-webkit-transform:rotate(150deg);transform:rotate(150deg)}.v-spinner__fading-circle .circle.is-circle5:before{-webkit-animation-delay:-.7s;animation-delay:-.7s}.v-spinner__fading-circle .circle.is-circle6{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.v-spinner__fading-circle .circle.is-circle6:before{-webkit-animation-delay:-.6s;animation-delay:-.6s}.v-spinner__fading-circle .circle.is-circle7{-webkit-transform:rotate(210deg);transform:rotate(210deg)}.v-spinner__fading-circle .circle.is-circle7:before{-webkit-animation-delay:-.5s;animation-delay:-.5s}.v-spinner__fading-circle .circle.is-circle8{-webkit-transform:rotate(240deg);transform:rotate(240deg)}.v-spinner__fading-circle .circle.is-circle8:before{-webkit-animation-delay:-.4s;animation-delay:-.4s}.v-spinner__fading-circle .circle.is-circle9{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.v-spinner__fading-circle .circle.is-circle9:before{-webkit-animation-delay:-.3s;animation-delay:-.3s}.v-spinner__fading-circle .circle.is-circle10{-webkit-transform:rotate(300deg);transform:rotate(300deg)}.v-spinner__fading-circle .circle.is-circle10:before{-webkit-animation-delay:-.2s;animation-delay:-.2s}.v-spinner__fading-circle .circle.is-circle11{-webkit-transform:rotate(330deg);transform:rotate(330deg)}.v-spinner__fading-circle .circle.is-circle11:before{-webkit-animation-delay:-.1s;animation-delay:-.1s}.v-spinner__fading-circle .circle.is-circle12{-webkit-transform:rotate(1turn);transform:rotate(1turn)}.v-spinner__fading-circle .circle.is-circle12:before{-webkit-animation-delay:0s;animation-delay:0s}@-webkit-keyframes v-spinner__fading-circle--opacity{0%,39%,to{opacity:0;filter:alpha(opacity=0)}40%{opacity:1;filter:alpha(opacity=100)}}@keyframes v-spinner__fading-circle--opacity{0%,39%,to{opacity:0;filter:alpha(opacity=0)}40%{opacity:1;filter:alpha(opacity=100)}}',""])},260:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-spinner__triple-bounce .bounce1,.v-spinner__triple-bounce .bounce2,.v-spinner__triple-bounce .bounce3{width:.16rem;height:.16rem;background-color:#acb3bf;display:inline-block;border-radius:100%;-webkit-animation:v-spinner__triple-bounce--scale 1.4s infinite ease-in-out both;animation:v-spinner__triple-bounce--scale 1.4s infinite ease-in-out both}.v-spinner__triple-bounce .bounce1{-webkit-animation-delay:-.32s;animation-delay:-.32s}.v-spinner__triple-bounce .bounce2{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes v-spinner__triple-bounce--scale{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes v-spinner__triple-bounce--scale{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},261:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-spinner__snake{width:.74667rem;height:.74667rem;-webkit-animation:v-spinner__snake--rotate .8s infinite linear;animation:v-spinner__snake--rotate .8s infinite linear;border-width:.05333rem;border-style:solid;border-radius:50%}@-webkit-keyframes v-spinner__snake--rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes v-spinner__snake--rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},262:function(e,t,n){var i=n(259);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("ad680f12",i,!0)},263:function(e,t,n){var i=n(260);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("2dd5026d",i,!0)},264:function(e,t,n){var i=n(261);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("da457690",i,!0)},265:function(e,t,n){n(262);var i=n(43)(n(255),n(269),null,null);e.exports=i.exports},266:function(e,t,n){n(264);var i=n(43)(n(256),n(272),null,null);e.exports=i.exports},267:function(e,t,n){n(263);var i=n(43)(n(257),n(271),null,null);e.exports=i.exports},268:function(e,t,n){var i=n(43)(n(258),n(270),null,null);e.exports=i.exports},269:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["v-spinner__fading-circle circle-color-"+e._uid]},e._l(12,function(e){return n("div",{staticClass:"circle",class:["is-circle"+e]})}))},staticRenderFns:[]}},270:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"v-spinner"},[n(e.spinner,{tag:"component"})],1)},staticRenderFns:[]}},271:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-spinner__triple-bounce"},[n("div",{staticClass:"bounce1"}),e._v(" "),n("div",{staticClass:"bounce2"}),e._v(" "),n("div",{staticClass:"bounce3"})])}]}},272:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"v-spinner__snake",style:{"border-top-color":"transparent","border-right-color":e.spinnerColor,"border-left-color":e.spinnerColor,"border-bottom-color":e.spinnerColor}})},staticRenderFns:[]}},273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-button",props:{nativeType:String,type:{type:String,default:"default",validator:function(e){return["default","danger","primary","info"].indexOf(e)>-1}},styles:{type:String,default:"radius",validator:function(e){return["radius","rectangle","circle"].indexOf(e)>-1}},cusClass:String,cusStyle:String,disableClass:String,disabled:Boolean,size:{type:String,default:"normal",validator:function(e){return["normal","small","full"].indexOf(e)>-1}}},data:function(){return{}},methods:{handleClick:function(e){this.$emit("click",e)}}}},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(44);t.default={name:"v-text",props:{value:String,limit:{type:Number,default:0},expandEnabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){var e="limit"+this.limit;n.i(i.d)(this.$el,e)?n.i(i.c)(this.$el,e):n.i(i.b)(this.$el,e)}},render:function(e){var t={attrs:{id:"vText"+this._uid},class:["v-text",1===this.limit?"single":this.limit?"limit"+this.limit:""]};return this.expandEnabled&&(t.on={click:this.handleClick}),e("p",t,this.value)}}},275:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-btn{width:100%;display:block;background:#3395ff;color:#fff}.v-btn .v-btn__text{font-size:.42667rem;line-height:2}.v-btn.default{border:.02667rem solid #3395ff;background:#3395ff;color:#fff}.v-btn.danger{border:.02667rem solid #fa5a5a;background:#fa5a5a;color:#fff}.v-btn.primary{border:.02667rem solid #f7b64b;background:#f7b64b;color:#fff}.v-btn.info{border:.02667rem solid #3395ff;background:transparent;color:#3395ff}.v-btn.small{width:auto;height:auto;padding:0 .4rem;display:inline-block}.v-btn.small .v-btn__text{font-size:.32rem}.v-btn.full{border-radius:0}.v-btn.radius{border-radius:.10667rem}.v-btn.rectangle{border-radius:0}.v-btn.circle{border-radius:2.66667rem}.v-btn:active{opacity:.6}.v-btn.is-disabled{border:1px solid #85bffe;background:#85bffe}",""])},276:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-text{font-size:.4rem;line-height:1.2;text-align:justify}.v-text.single{white-space:nowrap}.v-text.single,.v-text[class*=limit]{overflow:hidden;text-overflow:ellipsis}.v-text[class*=limit]{text-align:left;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.v-text.limit2{-webkit-line-clamp:2}.v-text.limit3{-webkit-line-clamp:3}.v-text.limit4{-webkit-line-clamp:4}.v-text.limit5{-webkit-line-clamp:5}.v-text .re{display:inline-table;font-size:.4rem;line-height:.50667rem;color:#007aff}",""])},277:function(e,t,n){var i=n(275);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("0fe4f863",i,!0)},278:function(e,t,n){var i=n(276);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("6f94e38c",i,!0)},279:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"v-btn",class:[""+e.type,""+e.size,""+e.styles,{"is-disabled":e.disabled}],style:e.cusStyle,attrs:{type:e.nativeType,disabled:e.disabled},on:{click:e.handleClick}},[n("label",{staticClass:"v-btn__text"},[e._t("default")],2)])},staticRenderFns:[]}},280:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(27),a=n(28),s=n(77),c=n(81),l=n(16);if(void 0===u)var u=c.a;var m={currentItem:null,setCurrentItem:function(e){e&&(this.currentItem=e)},getCurrentItem:function(){return this.currentItem},clearCurrentItem:function(){this.currentItem=null},comments_retry_num:0,comments_retry_max:3,getToken:function(){if(!s.h||"function"!=typeof s.h)return u.reject("无效token，请在api中实现vGetMicroCommentToken方法");var e=this;return this.comments_retry_num<this.comments_retry_max?(this.comments_retry_num+=1,s.h().then(function(t){return e.comments_retry_num=0,u.resolve(t)})):u.reject("token尝试超过限制，请刷新页面重试")},addComment:function(e){var t=e.subjectId,n=void 0===t?0:t,i=e.userId,s=void 0===i?0:i,c=e.content,l=void 0===c?"":c,m=e.toUserId,d=void 0===m?0:m,f=e.toId,p=void 0===f?0:f,h=e.parent,g=void 0===h?0:h,v=this,b=o.a.COMMENT_UTL+"/v1/comment",_={appId:o.a.COMMENT_APPID,token:o.a.COMMENT_TOKEN};return o.a.COMMENT_TOKEN?(_.subjectId=parseInt(n),_.userId=parseInt(s),_.content=l.replace(/(^\s*)|(\s*$)/g,""),_.toUserId=parseInt(d),_.toId=parseInt(p),_.parent=parseInt(g),_.appId?r.a.http.post(b,_).then(function(e){var t=e.data;return a.a.log("[comments].addComment.SUCCESS: ",t),1002===t.Code?this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,v.addComment(n,s,l,d,p)}):0!==t.Code?u.reject(t):(v.setCurrentItem({OPT:1}),u.resolve(t))}):new u(function(e,t){t("微服务配置信息错误，请确认config.js的配置(COMMENT_APPID)")})):this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,v.addComment(n,s,l,d,p)})},delComment:function(e){var t=e.subjectId,n=void 0===t?0:t,i=e.commentId,s=void 0===i?0:i;a.a.log("[comments].delComment：");var c=this,m=o.a.COMMENT_UTL+"/v1/comment/"+s+"?",d=void 0,f={appId:o.a.COMMENT_APPID,token:o.a.COMMENT_TOKEN};if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,c.delComment({subjectId:n,commentId:s})});f.subjectId=parseInt(n),f.userId=parseInt(l.a.getters.userInfo.id);for(d in f)f.hasOwnProperty(d)&&(m+=d+"="+encodeURIComponent(f[d])+"&");return r.a.http.delete(m,f).then(function(e){var t=e.data;return a.a.log("[comments].delComment.SUCCESS: ",t),1002===t.Code?c.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,c.delComment({subjectId:n,commentId:s})}):0!==t.Code?u.reject(t):(c.setCurrentItem({OPT:0}),u.resolve(t.Res))})},getSubject:function(e){var t=this;if(a.a.log("[comments].getSubject：",e),!e)return u.resolve(null);var n=[e],i=o.a.COMMENT_UTL+"/v1/comment/subject?",s={ids:"["+n.toString()+"]"},c=void 0;if(!s.ids)return u.reject({msg:"无效的SubjectIds"});if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(n){return o.a.COMMENT_TOKEN=n,t.getSubject(e)});s.appId=o.a.COMMENT_APPID,s.token=o.a.COMMENT_TOKEN,s.userId=parseInt(l.a.getters.userInfo.id)||0;for(c in s)s.hasOwnProperty(c)&&(i+=c+"="+encodeURIComponent(s[c])+"&");return r.a.http.get(i).then(function(n){var i=n.data;return a.a.log("[comments].getSubject.SUCCESS: ",i),1002===i.Code?t.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,this.getSubject(e)}):0!==i.Code?u.reject(i):u.resolve(i.Res[0]||null)})},getSubjectList:function(e){if(a.a.log("[comments].getSubjectList：",e),!e)return u.resolve([]);var t=[];e.forEach(function(e){t.push(e.id)});var n=this,i=o.a.COMMENT_UTL+"/v1/comment/subject?",s={ids:"["+t.toString()+"]"},c=void 0;if(!s.ids)return u.reject({msg:"无效的SubjectIds"});if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,n.getSubjectList(e)});s.appId=o.a.COMMENT_APPID,s.token=o.a.COMMENT_TOKEN,s.userId=parseInt(l.a.getters.userInfo.id)||0;for(c in s)s.hasOwnProperty(c)&&(i+=c+"="+encodeURIComponent(s[c])+"&");return r.a.http.get(i).then(function(t){var i=t.data;return a.a.log("[comments].getSubjectList.SUCCESS: ",i),1002===i.Code?n.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,n.getSubjectList(e)}):0!==i.Code?u.reject(i):u.resolve(i.Res)})},getComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,i=e.offset,s=void 0===i?1:i,c=e.limit,m=void 0===c?o.a.COMMENT_LIMIT:c,d=this,f={},p=void 0,h=o.a.COMMENT_UTL+"/v1/comment?";if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,d.getComments({subjectId:n,offset:s,limit:m})});a.a.log("MicroComment.getComments: ",n,s,m),f.appId=o.a.COMMENT_APPID,f.token=o.a.COMMENT_TOKEN,f.userId=parseInt(l.a.getters.userInfo.id)||0,f.subjectId=n,f.offset=s,f.limit=m;for(p in f)f.hasOwnProperty(p)&&(h+=p+"="+encodeURIComponent(f[p])+"&");return r.a.http.get(h).then(function(e){var t=e.data;return 1002===t.Code?d.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,d.getComments({subjectId:n,offset:s,limit:m})}):0!==t.Code?u.reject(t):u.resolve(t.Res)})},getCommentsReply:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,i=e.offset,s=void 0===i?1:i,c=e.limit,m=void 0===c?o.a.COMMENT_LIMIT:c,d=this,f={},p=void 0,h=o.a.COMMENT_UTL+"/v1/comment/list?";if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,d.getCommentsReply({subjectId:n,offset:s,limit:m})});a.a.log("MicroComment.getCommentsReply: ",n,s,m),f.appId=o.a.COMMENT_APPID,f.token=o.a.COMMENT_TOKEN,f.userId=parseInt(l.a.getters.userInfo.id)||0,f.subjectId=n,f.offset=s,f.limit=m;for(p in f)f.hasOwnProperty(p)&&(h+=p+"="+encodeURIComponent(f[p])+"&");return r.a.http.get(h).then(function(e){var t=e.data;return 1002===t.Code?d.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,d.getCommentsReply({subjectId:n,offset:s,limit:m})}):0!==t.Code?u.reject(t):u.resolve(t.Res)})},getPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,i=e.offset,s=void 0===i?1:i,c=e.limit,m=void 0===c?15:c,d=this,f={},p=void 0,h=o.a.COMMENT_UTL+"/v1/like?";if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,d.getPraise({subjectId:n,offset:s,limit:m})});a.a.log("MicroComment.getPraise: ",n,s,m),f.appId=o.a.COMMENT_APPID,f.token=o.a.COMMENT_TOKEN,f.userId=parseInt(l.a.getters.userInfo.id)||0,f.subjectId=n,f.offset=s,f.limit=m;for(p in f)f.hasOwnProperty(p)&&(h+=p+"="+encodeURIComponent(f[p])+"&");return r.a.http.get(h).then(function(e){var t=e.data;return 1002===t.Code?d.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,d.getPraise({subjectId:n,offset:s,limit:m})}):0!==t.Code?u.reject(t):u.resolve(t.Res)})},addPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,i=e.toId,a=void 0===i?0:i,s=e.type,c=void 0===s?1:s,m=this,d=o.a.COMMENT_UTL+"/v1/like",f={};return o.a.COMMENT_TOKEN?(f.appId=o.a.COMMENT_APPID,f.token=o.a.COMMENT_TOKEN,f.subjectId=parseInt(n),f.userId=parseInt(l.a.getters.userInfo.id)||0,f.toId=parseInt(a),f.type=parseInt(c),r.a.http.post(d,f).then(function(e){var t=e.data;return 1002===t.Code?m.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,m.addPraise({subjectId:n,toId:a,type:c})}):0!==t.Code?u.reject(t):u.resolve(t.Res)})):this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,m.addPraise({subjectId:n,toId:a,type:c})})},delPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cId,n=void 0===t?0:t,i=e.subjectId,a=void 0===i?0:i,s=e.userId,c=void 0===s?0:s,l=this,m=o.a.COMMENT_UTL+"/v1/like?",d={},f=void 0;if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,l.delPraise({cId:n,subjectId:a,userId:c})});d.appId=o.a.COMMENT_APPID,d.token=o.a.COMMENT_TOKEN,d.userId=parseInt(c),d.cId=parseInt(n),d.subjectId=parseInt(a);for(f in d)d.hasOwnProperty(f)&&(m+=f+"="+encodeURIComponent(d[f])+"&");return r.a.http.delete(m).then(function(e){var t=e.data;return 1002===t.Code?l.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,l.delPraise({cId:n,subjectId:a,userId:c})}):0!==t.Code?u.reject(t):u.resolve(t.Res)})},getUserComments:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userId,i=void 0===n?parseInt(l.a.getters.userInfo.id)||0:n,s=t.subjectId,c=void 0===s?0:s,m=t.page,d=void 0===m?1:m,f=t.pageNum,p=void 0===f?o.a.COMMENT_LIMIT:f;if(!i)return u.resolve([]);var h=o.a.COMMENT_UTL+"/v1/comment/user?",g={appId:o.a.COMMENT_APPID,token:o.a.COMMENT_TOKEN};if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,e.getUserComments({userId:i,subjectId:c,page:d,pageNum:p})});g.userId=parseInt(i),g.subjectId=parseInt(c),g.page=parseInt(d),g.pageNum=parseInt(p);for(var v in g)g.hasOwnProperty(v)&&(h+=v+"="+encodeURIComponent(g[v])+"&");return r.a.http.get(h).then(function(t){var n=t.data;return a.a.log("[comments].getSubjectList.SUCCESS: ",n),1002===n.Code?e.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,e.getUserComments({userId:i,subjectId:c,page:d,pageNum:p})}):0!==n.Code?u.reject(n):u.resolve(n.Res)})},getUserPrises:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userId,i=void 0===n?parseInt(l.a.getters.userInfo.id)||0:n,s=t.subjectId,c=void 0===s?0:s,m=t.page,d=void 0===m?1:m,f=t.pageNum,p=void 0===f?o.a.COMMENT_LIMIT:f;if(!i)return u.resolve([]);var h=o.a.COMMENT_UTL+"/v1/like/user?",g={appId:o.a.COMMENT_APPID,token:o.a.COMMENT_TOKEN};if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,e.getUserPrises({userId:i,subjectId:c,page:d,pageNum:p})});g.userId=parseInt(i),g.subjectId=parseInt(c),g.page=parseInt(d),g.pageNum=parseInt(p);for(var v in g)g.hasOwnProperty(v)&&(h+=v+"="+encodeURIComponent(g[v])+"&");return r.a.http.get(h).then(function(t){var n=t.data;return a.a.log("[comments].getSubjectList.SUCCESS: ",n),1002===n.Code?e.getToken().then(function(t){return o.a.COMMENT_TOKEN=t,e.getUserPrises({userId:i,subjectId:c,page:d,pageNum:p})}):0!==n.Code?u.reject(n):u.resolve(n.Res)})},getCommentsNum:function(e){var t=this,n=e.userId,i=void 0===n?parseInt(l.a.getters.userInfo.id)||0:n,s=e.subjectId,c=void 0===s?0:s,m=o.a.COMMENT_UTL+"/v1/comment/user/num?",d={appId:o.a.COMMENT_APPID,token:o.a.COMMENT_TOKEN};if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,t.getCommentsNum({userId:i,subjectId:c})});d.userId=parseInt(i),d.subjectId=parseInt(c);for(var f in d)d.hasOwnProperty(f)&&(m+=f+"="+encodeURIComponent(d[f])+"&");return r.a.http.get(m).then(function(e){var n=e.data;return a.a.log("[comments].getCommentsNum.SUCCESS: ",n),1002===n.Code?t.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,t.getCommentsNum({userId:i,subjectId:c})}):0!==n.Code?u.reject(n):u.resolve(n.Res)})},getPraisesNum:function(e){var t=this,n=e.userId,i=void 0===n?parseInt(l.a.getters.userInfo.id)||0:n,s=e.subjectId,c=void 0===s?0:s,m=o.a.COMMENT_UTL+"/v1/like/user/num?",d={appId:o.a.COMMENT_APPID,token:o.a.COMMENT_TOKEN};if(!o.a.COMMENT_TOKEN)return this.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,t.getPraisesNum({userId:i,subjectId:c})});d.userId=parseInt(i),d.subjectId=parseInt(c);for(var f in d)d.hasOwnProperty(f)&&(m+=f+"="+encodeURIComponent(d[f])+"&");return r.a.http.get(m).then(function(e){var n=e.data;return a.a.log("[comments].getPraisesNum.SUCCESS: ",n),1002===n.Code?t.getToken().then(function(e){return o.a.COMMENT_TOKEN=e,t.getPraisesNum({userId:i,subjectId:c})}):0!==n.Code?u.reject(n):u.resolve(n.Res)})}};t.a=m},282:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o="@@Scroll",a=function(e,t){var n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=function(){e.apply(o,a),i=n};return function(){if(o=this,a=arguments,n=Date.now(),r&&(clearTimeout(r),r=null),i){var e=t-(n-i);e<0?s():r=setTimeout(function(){s()},e)}else s()}},s=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},c=r.a.prototype.$isServer?{}:document.defaultView.getComputedStyle,l=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=c(t).overflowY;if("scroll"===n||"auto"===n)return t;t=t.parentNode}return window},u=function(e){return e===window?document.documentElement.clientHeight:e.clientHeight},m=function(e){return e===window?s(window):e.getBoundingClientRect().top+s(window)},d=function(e){for(var t=e.parentNode;t;){if("HTML"===t.tagName)return!0;if(11===t.nodeType)return!1;t=t.parentNode}return!1},f=function(){if(!this.binded){this.binded=!0;var e=this,t=e.el,n=t.getAttribute("scroll-tombstone"),i=Boolean(e.vm[n]);e.isBottom=!1,e.scrollEventTarget=l(t),!0!==i&&(e.scrollListener=a(p.bind(e),50),e.scrollEventTarget.addEventListener("scroll",e.scrollListener)),console.log("v-scroll.doBind: directive.scrollEventTarget = ",this.vm,e.scrollEventTarget.className),this.vm.$set(this.vm,"scrollTarget",e.scrollEventTarget);var r=t.getAttribute("scroll-disabled"),o=!1;r&&(this.vm.$watch(r,function(t){e.disabled=t,!t&&e.immediateCheck&&p.call(e)}),o=Boolean(e.vm[r])),e.disabled=o;var s=t.getAttribute("scroll-distance"),c=0;s&&(c=Number(e.vm[s]||s),isNaN(c)&&(c=0)),e.distance=c;var u=t.getAttribute("scroll-immediate-check"),m=!1;u&&(m=Boolean(e.vm[u])),e.immediateCheck=m,m&&p.call(e);var d=t.getAttribute("scroll-listen-for-event");d&&e.vm.$on(d,function(){p.call(e)})}},p=function(e){var t=this.scrollEventTarget,n=this.el,i=this.distance;if(!0===e||!this.disabled){var r=s(t),o=r+u(t),a=!1,c=n.getAttribute("scroll-scrolling-func");if(t.scrollHeight<o||t.scrollHeight===o?this.isBottom=!0:this.isBottom=!1,c&&this.vm[c]&&"function"==typeof this.vm[c]&&this.vm[c](t,r),t===n)a=t.scrollHeight-o<=i;else{a=o+i>=m(n)-m(t)+n.offsetHeight+r}a&&this.expression&&(console.log("[v-scroll.js] ==> doCheck.trigger..."),this.expression())}},h={bind:function(e,t,n){e[o]={el:e,vm:n.context,expression:t.value};var i=arguments;e[o].vm.$on("hook:mounted",function(){e[o].vm.$nextTick(function(){if(d(e))return void f.call(e[o],i);e[o].bindTryCount=0;!function t(){e[o].bindTryCount>10||(e[o].bindTryCount++,d(e)?f.call(e[o],i):setTimeout(t,50))}()})})},unbind:function(e){e[o].scrollEventTarget.removeEventListener("scroll",e[o].scrollListener)}},g=function(e){e.directive("Scroll",h)};!r.a.prototype.$isServer&&window.Vue&&(window.Scroll=h,r.a.use(g)),h.install=g,t.a=h},283:function(e,t,n){n(286);var i=n(43)(n(284),n(287),null,null);e.exports=i.exports},284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),r=n.n(i),o=n(0),a=n.n(o),s=n(282),c=n(248),l=n(27),u=n(247);a.a.use(s.a),t.default={name:"v-scroll",props:{from:String,id:String,value:{type:Array,default:function(){return[]}},func:Function,endFunc:Function,scrollingFunc:Function,funcType:{type:String,default:"page"},enabled:{type:Boolean,default:!0},pullAbled:{type:Boolean,default:!1},toper:{type:Boolean,default:!1},scrollDistance:{type:Number,default:100},tombstone:{type:Boolean,default:!1},hasDataParent:{type:Boolean,default:!0},isGoInit:{type:Boolean,default:!0},scrollEndFlowTag:{type:Boolean,default:!1},endFuncEnable:{type:Boolean,default:!1}},components:{"v-spinner":c.a},data:function(){return{pageHeight:0,uid:this._uid,currentValue:this.value,goTopTag:!1,oTime:-1,pageSize:l.a.LIMIT,offset:0,limit:l.a.LIMIT,page:1,pageNum:l.a.LIMIT,hasMore:!0,hasMoreTotal:!0,isLoading:!1,scrollEndTxt:!1,refreshTag:!1,hasData:!0,isEnabled:this.enabled,scrollTarget:null}},computed:{isShowText:function(){return!(!this.hasData||this.hasMore)}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},enabled:function(e){this.$logger.log("v-scroll.watch.enabled! "),this.isEnabled=e,!0===e&&this.value.length<=0&&this.refreshList()}},created:function(){this.$logger.log("[v-scroll]."+this._uid+".created..."),u.a.$on("v-scroll.refreshList",this.refreshList),u.a.$on("v-scroll.getList",this.getList),this.$route.meta&&this.$route.meta.keepAlive||this.init()},mounted:function(){this.pageHeight=window.screen.height,this.$logger.log("[v-scroll]."+this._uid+".mounted...",this.$route.name,this.$parent.$route.name)},activated:function(){if(this.$logger.log("*[v-scroll]."+this._uid+".activated...",this._inactive,this.$router.direct()),this.isEnabled=this.enabled,this.$router.direct()){if(!this.isGoInit)return!1;this.init()}},deactivated:function(){this.$logger.log("*[v-scroll]."+this._uid+".deactivated...",this._inactive),this.isEnabled=!1},beforeDestroy:function(){this.$logger.log("*[v-scroll]."+this._uid+".beforeDestroy...")},methods:{reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetData,n=void 0===t||t,i=e.goTop,r=void 0===i||i;this.oTime=-1,this.pageSize=l.a.LIMIT,this.offset=0,this.limit=l.a.LIMIT,this.page=1,this.pageNum=l.a.LIMIT,this.hasMore=!0,this.hasData=!0,this.scrollEndTxt=!1,n&&(this.currentValue=[]),r&&this.scrollTarget&&(this.scrollTarget.scrollTop=0),this.hasMoreTotal=!0},init:function(){this.$logger.log("[v-scroll]."+this._uid+".init..."),this.reset(),this.tombstone||this.getList()},goTop:function(){var e=this.scrollTarget;this.$logger.log("[v-scroll]."+this._uid+".getList.after: ",e.scrollHeight,e.offsetHeight),e===window?window.scrollTo(0,0):e.scrollTop>0&&(e.scrollTop-=1e3,setTimeout(this.goTop,30))},getList:function(){var e=this;if(this.isEnabled){!this.scrollEndTxt&&this.scrollTarget&&(this.scrollEndTxt=!!this.scrollEndFlowTag||this.scrollTarget.scrollHeight>5*this.scrollTarget.offsetHeight/4);var t=this.scrollTarget;if("function"==typeof this.func){if("function"==typeof this.endFunc&&!this.hasMore&&this.hasMoreTotal&&this.endFuncEnable)try{if(this.isLoading)return;if(this.isEnding)return;this.isEnding=!0,this.isLoading=!0,this.endFunc().then(function(t){t?(e.$logger.log("[v-scroll]."+e._uid+".endFunc.after: ",t),e.reset({resetData:!1,goTop:!1})):e.hasMoreTotal=!1,e.isEnding=!1,e.isLoading=!1})}catch(e){this.$logger.error("[v-scroll]."+this._uid+".endFunc.after.error: "+e)}if(this.hasMore){this.$logger.log("[v-scroll]."+this._uid+".getList.befor: ",t);var n=null;if("section"===this.funcType?n=this.getListBySection:"limit"===this.funcType?n=this.getListByLimit:"page"===this.funcType?n=this.getListByPage:"time"===this.funcType&&(n=this.getListByTime),"function"==typeof n)try{n().then(function(t){t&&t.length&&(e.currentValue=e.currentValue.concat(t)),e.scrollTarget&&(e.$logger.log("[v-scroll]."+e._uid+".getList.after: ",e.scrollTarget.scrollHeight,e.scrollTarget.offsetHeight),e.$nextTick(function(){e.scrollEndTxt=!!e.scrollEndFlowTag||e.scrollTarget.scrollHeight>5*e.scrollTarget.offsetHeight/4})),e.endFunc&&"function"==typeof e.endFunc&&(e.currentValue&&e.currentValue.length>0?e.hasData=!0:e.hasData=!1)})}catch(e){this.$logger.error("[v-scroll]."+this._uid+".getList.after.error: "+e)}}}}},getListBySection:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.refresh,i=void 0!==n&&n;this.$logger.log("[v-scroll]."+this._uid+".getListBySection...");try{this.isLoading=!0;var o=this.offset,a=this.offset+this.limit;return this.tombstone&&(this.offset+=this.limit),this.func({offset:o,limit:a,refresh:i}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListBySection.success: "+t,e.offset,e.limit),t&&t.length>0?(e.hasData=!0,e.tombstone||(e.offset+=t.length)):e.offset<=0&&(e.hasData=!1),(!t||t.length<e.limit)&&(e.hasMore=!1),e.isLoading=!1,r.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListBySection.error: "+t),e.isLoading=!1,r.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListBySection.error: "+e),this.isLoading=!1,r.a.reject(e)}},getListByLimit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.refresh,i=void 0!==n&&n;this.$logger.log("[v-scroll]."+this._uid+".getListByLimit...");try{return this.isLoading=!0,this.func({offset:this.offset,limit:this.limit,refresh:i}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListByLimit.success: "+t,e.offset,e.limit),t&&t.length>0?(e.hasData=!0,e.offset+=t.length):e.offset<=0&&(e.hasData=!1),(!t||t.length<e.limit)&&(e.hasMore=!1),e.isLoading=!1,r.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListByLimit.error: "+t),e.isLoading=!1,r.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListByLimit.error: "+e),this.isLoading=!1,r.a.reject(e)}},getListByPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.refresh,i=void 0!==n&&n;this.$logger.log("[v-scroll]."+this._uid+".getListByPage...",this.page,this.pageNum);try{return this.isLoading=!0,this.func({page:this.page,pageNum:this.pageNum,refresh:i}).then(function(t){return e.$logger.log("[v-scroll]."+e._uid+".getListByPage.success: "+t),t&&t.length>0?(e.hasData=!0,e.page+=1):e.page<=1&&(e.hasData=!1),(!t||t.length<e.pageNum)&&(e.hasMore=!1),e.isLoading=!1,r.a.resolve(t)}).catch(function(t){return e.$logger.error("[v-scroll]."+e._uid+".getListByPage.error: "+t),e.isLoading=!1,r.a.reject(t)})}catch(e){return this.$logger.error("[v-scroll]."+this._uid+".getListByPage.error: "+e),this.isLoading=!1,r.a.reject(e)}},getListByTime:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.refresh,i=void 0!==n&&n;this.$logger.log("[v-scroll]."+this._uid+".getListByTime...",this.oTime,this.pageSize);var o=this;try{return o.isLoading=!0,o.func({oTime:o.oTime,pageSize:o.pageSize,refresh:i}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.res,i=void 0===n?[]:n,a=t.last,s=void 0===a?-1:a;return i&&i.length>0?(o.hasData=!0,o.oTime=s):e.currentValue.length||(o.hasData=!1),(!i||i.length<10)&&(o.hasMore=!1),o.isLoading=!1,r.a.resolve(i,s)}).catch(function(e){return o.isLoading=!1,r.a.reject(e)})}catch(e){return o.isLoading=!1,r.a.reject(e)}},refreshList:function(){var e=this;if(this.isEnabled&&!this._isDestroyed&&(this.$logger.log("!!!v-scroll."+this._uid+".refreshList..."),"function"==typeof this.func)){this.refreshTag=!0;var t=null;if("section"===this.funcType?t=this.getListBySection:"limit"===this.funcType?t=this.getListByLimit:"page"===this.funcType?t=this.getListByPage:"time"===this.funcType&&(t=this.getListByTime),"function"==typeof t)try{this.reset({resetData:!1,goTop:!0}),t({refresh:!0}).then(function(t){e.$logger.log("[v-scroll]."+e._uid+".refreshList.after: ",e.currentValue.length),t&&t.length?e.currentValue=t:e.currentValue=[],e.refreshTag=!1}).then(function(t){e.scrollTarget&&(e.$logger.log("[v-scroll]."+e._uid+".refreshList.after: ",e.scrollTarget.scrollHeight,e.scrollTarget.offsetHeight),e.scrollEndTxt=!!e.scrollEndFlowTag||e.scrollTarget.scrollHeight>5*e.scrollTarget.offsetHeight/4)}).catch(function(t){e.refreshTag=!1,e.$logger.error("[v-scroll]."+e._uid+".refreshList.after.error: "+t)})}catch(e){this.refreshTag=!1,this.$logger.error("[v-scroll]."+this._uid+".refreshList.after.error: "+e)}}}}}},285:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-scroll{height:100%}.v-scroll-container{height:100%;overflow:scroll;-webkit-overflow-scrolling:touch}.v-scroll-refresh{width:100%;height:.96rem;position:absolute;padding:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-scroll-refresh .v-spinner{text-align:center}.v-scroll-bottom{height:1.2rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-scroll-bottom .v-spinner{text-align:center}.v-scroll-bottom-txt{text-align:center;font-size:.4rem;color:#c1c1c1}.v-scroll-empty{width:100%;min-height:2.66667rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-scroll-top{width:1.01333rem;height:1.01333rem;position:fixed;z-index:99;bottom:2.26667rem;right:.58667rem;font-size:.61333rem;text-align:center;line-height:1.01333rem;color:#fff;border-radius:50%;background:#ccc;box-shadow:0 0 .08rem #999}.null-search-box{padding:0 0 1.06667rem;background:#fff;color:#777e8c;position:fixed;top:4.82667rem;width:100%}.null-search-box .text{font-size:.37333rem;color:#777e8c;letter-spacing:0;line-height:22px;text-align:center}.null-search-box .text .error-img{text-align:center;padding-bottom:.93333rem}.null-search-box .text .error-img img{width:1.86667rem;height:1.86667rem}.null-search-box .text .error-content{color:#4a4a4a;font-size:.42667rem;line-height:.58667rem;text-align:center}",""])},286:function(e,t,n){var i=n(285);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("55b94912",i,!0)},287:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isEnabled,expression:"isEnabled"}],staticClass:"v-scroll"},[n("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.getList,expression:"getList"},{name:"scroll-position",rawName:"v-scroll-position"}],ref:"container",staticClass:"v-scroll-container",attrs:{id:"combScroll_"+e._uid,"scroll-disabled":"isLoading","scroll-distance":"scrollDistance","scroll-enabled":"isEnabled","scroll-tombstone":"tombstone","scroll-scrolling-func":"scrollingFunc"}},[n("div",{ref:"content",staticClass:"v-scroll-content"},[e._t("default")],2),e._v(" "),"function"==typeof e.endFunc||!e.refreshTag&&(e.isLoading||e.isShowText&&e.scrollEndTxt&&e.currentValue.length>0)?n("div",{staticClass:"v-scroll-bottom"},[n("transition",{attrs:{name:"fade"}},[n("v-spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{color:"#BBBAC2",type:"triple-bounce"}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading&&e.isShowText&&e.scrollEndTxt&&e.currentValue.length>0,expression:"!isLoading && isShowText && scrollEndTxt && currentValue.length > 0"}],staticClass:"v-scroll-bottom-txt"},[e._t("endText",[e._v("· 我是有底线的 ·")])],2)])],1):e._e(),e._v(" "),!e.hasData&&e.currentValue.length<=0?n("div",{staticClass:"v-scroll-empty"},[e._t("empty",[e._v("暂无数据")])],2):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.toper&&e.goTopTag,expression:"toper && goTopTag"}],staticClass:"v-scroll-top icon icon-top",on:{click:e.goTop}})])],1)},staticRenderFns:[]}},288:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(27),a=n(28),s=n(77),c=n(16),l=n(80),u=n(81);if(void 0===m)var m=u.a;var d={currentItem:null,setCurrentItem:function(e){e&&(this.currentItem=e)},getCurrentItem:function(){return this.currentItem},clearCurrentItem:function(){this.currentItem=null},retry_num:0,retry_max:3,getToken:function(){if(!s.d||"function"!=typeof s.d)return m.reject("无效token，请在api中实现vGetMicroBbsToken方法");var e=this;return this.retry_num<this.retry_max?(this.retry_num+=1,s.d().then(function(t){return e.retry_num=0,m.resolve(t)})):m.reject("token尝试超过限制，请刷新页面重试")},getForumList:function(){a.a.log("[BBS].getForumList：");var e=this,t=o.a.BBS_URL+"/forum/list",n={appId:o.a.BBS_APPID};return o.a.BBS_TOKEN?(n.appId=o.a.BBS_APPID,n.token=o.a.BBS_TOKEN,n.toonType=o.a.toonType||100,r.a.http.post(t,n).then(function(t){var n=t.data;return a.a.log("[BBS].getForumList.SUCCESS: ",n),n.meta&&1001===n.meta.code?e.getToken().then(function(t){return o.a.BBS_TOKEN=t,e.getForumList()}):n.meta&&0!==n.meta.code?m.reject(n):m.resolve(n.data.dataList)})):this.getToken().then(function(t){return o.a.BBS_TOKEN=t,e.getForumList()})},getTopicList:function(e){var t=e.forumId,n=void 0===t?0:t,i=e.page,s=void 0===i?1:i,l=e.pageNum,u=void 0===l?o.a.BBS_LIMIT:l;a.a.log("[BBS].getTopicList：");var d=this,f=o.a.BBS_URL+"/topic/list",p={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100,loginUserId:c.a.getters.userInfo.id};return o.a.BBS_TOKEN?(p.forumIds=n,p.page=s,p.pageLimit=u,r.a.http.post(f,p).then(function(e){var t=e.data;return a.a.log("[BBS].getTopicList.SUCCESS: ",t),t.meta&&1001===t.meta.code?d.getToken().then(function(e){return o.a.BBS_TOKEN=e,d.getTopicList({forumId:n,page:s,pageNum:u})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.data.dataList)})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,d.getTopicList({forumId:n,page:s,pageNum:u})})},getTopicSearch:function(e){var t=e.forumId,n=void 0===t?0:t,i=e.keyword,s=void 0===i?"":i,l=e.page,u=void 0===l?1:l,d=e.pageNum,f=void 0===d?o.a.BBS_LIMIT:d;a.a.log("[BBS].getTopicSearch：");var p=this,h=o.a.BBS_URL+"/topic/search",g={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100,loginUserId:c.a.getters.userInfo.id};return o.a.BBS_TOKEN?(g.forumIds=n,g.keyword=s,g.page=u,g.pageLimit=f,r.a.http.post(h,g).then(function(e){var t=e.data;return a.a.log("[BBS].getTopicSearch.SUCCESS: ",t),t.meta&&1001===t.meta.code?p.getToken().then(function(e){return o.a.BBS_TOKEN=e,p.getTopicSearch({forumId:n,keyword:s,page:u,pageNum:f})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.data.dataList)})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,p.getTopicSearch({forumId:n,keyword:s,page:u,pageNum:f})})},getTopicDetail:function(e){var t=e.forumId,n=void 0===t?0:t,i=e.topicId,s=void 0===i?0:i;a.a.log("[BBS].getTopicDetail：");var l=this,u=o.a.BBS_URL+"/topic/detail",d={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100,loginUserId:c.a.getters.userInfo.id};return o.a.BBS_TOKEN?(d.forumIds=parseInt(n)||0,d.id=parseInt(s)||0,r.a.http.post(u,d).then(function(e){var t=e.data;return a.a.log("[BBS].getTopicDetail.SUCCESS: ",t),t.meta&&1001===t.meta.code?l.getToken().then(function(e){return o.a.BBS_TOKEN=e,l.getTopicDetail({forumId:n,topicId:s})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.data)})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,l.getTopicDetail({forumId:n,topicId:s})})},addTopic:function(e){var t=e.forumId,n=void 0===t?0:t,i=e.title,s=void 0===i?"":i,l=e.content,u=void 0===l?"":l,d=e.pics,f=void 0===d?[]:d,p=e.poi,h=void 0===p?{longitude:116.123456,latitude:39.654321}:p;if(a.a.log("[BBS].addTopic："),a.a.log("[BBS].addTopic：",f),!n)return m.reject("请选择板块");if(!s)return m.reject("请输入标题");if(!u)return m.reject("请输内容");var g=this,v=o.a.BBS_URL+"/topic/add",b={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(b.forumId=parseInt(n)||0,b.title=s,b.content=u,b.userInfo={userId:c.a.getters.userInfo.id,name:c.a.getters.userInfo.title,subtitle:c.a.getters.userInfo.subtitle,avatar:c.a.getters.userInfo.avatarId},b.poi=h,f&&f.length>0&&(b.pics=[],f.forEach(function(e){b.pics.push({imageType:e.imageType,size:e.size,url:e.url,width:e.width,height:e.height})})),r.a.http.post(v,b).then(function(e){var t=e.data;return a.a.log("[BBS].addTopic.SUCCESS: ",t),t.meta&&1001===t.meta.code?g.getToken().then(function(e){return o.a.BBS_TOKEN=e,g.addTopic({forumId:n,title:s,content:u,pics:f})}):t.meta&&0!==t.meta.code?m.reject(t.meta.message):(g.setCurrentItem({OPT:1,id:t.topicId||0,forumId:b.forumId,title:b.title,abstract:b.content,pics:b.pics,userInfo:b.userInfo,poi:b.poi,addtm:new Date}),m.resolve(t))})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,g.addTopic({forumId:n,title:s,content:u,pics:f})})},delTopic:function(e){var t=e.topicId,n=void 0===t?0:t;a.a.log("[BBS].delTopic：");var i=this,s=o.a.BBS_URL+"/topic/delete",l={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(l.id=parseInt(n),l.userId=c.a.getters.userInfo.id,r.a.http.post(s,l).then(function(e){var t=e.data;return a.a.log("[BBS].delTopic.SUCCESS: ",t),t.meta&&1001===t.meta.code?i.getToken().then(function(e){return o.a.BBS_TOKEN=e,i.delTopic({topicId:n})}):t.meta&&0!==t.meta.code?m.reject(t.meta.message):(i.setCurrentItem({OPT:0,id:l.id}),m.resolve(t))})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,i.delTopic({topicId:n})})},getBannerList:function(e){var t=e.forumId,n=void 0===t?0:t;a.a.log("[BBS].getBannerList：");var i=this,s=o.a.BBS_URL+"/forum/banner",c={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(c.id=n,r.a.http.post(s,c).then(function(e){var t=e.data;return a.a.log("[BBS].getBannerList.SUCCESS: ",t),t.meta&&1001===t.meta.code?i.getToken().then(function(e){return o.a.BBS_TOKEN=e,i.getBannerList({forumId:n})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.data.dataList)})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,i.getBannerList({forumId:n})})},getComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,n=void 0===t?0:t,i=e.page,s=void 0===i?1:i,l=e.pageNum,u=void 0===l?o.a.BBS_LIMIT:l,d=this,f=o.a.BBS_URL+"/v1/comment/list",p={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(p.topicId=parseInt(n),p.loginUserId=c.a.getters.userInfo.id,p.page=s,p.pageLimit=u,p.appId?r.a.http.post(f,p).then(function(e){var t=e.data;return a.a.log("[BBS].getComments.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return o.a.BBS_TOKEN=e,d.getComments({topicId:n,page:s,pageNum:u})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.data.dataList)}):new m(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,d.getComments({topicId:n,page:s,pageNum:u})})},getPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,n=void 0===t?0:t,i=e.commentId,s=void 0===i?0:i,c=e.page,l=void 0===c?1:c,u=e.pageNum,d=void 0===u?o.a.BBS_LIMIT:u,f=this,p=o.a.BBS_URL+"/v1/like/list",h={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(h.topicId=parseInt(n),h.cId=parseInt(s),h.page=l,h.pageLimit=d,h.appId?r.a.http.post(p,h).then(function(e){var t=e.data;return a.a.log("[BBS].getPraise.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return o.a.BBS_TOKEN=e,f.getPraise({topicId:n,commentId:s,page:l,pageNum:d})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.data.dataList)}):new m(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,f.getPraise({topicId:n,commentId:s,page:l,pageNum:d})})},addComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,n=void 0===t?0:t,i=e.content,s=void 0===i?"":i,l=e.toId,u=void 0===l?0:l,d=e.toUserId,f=void 0===d?0:d,p=this,h=o.a.BBS_URL+"/v1/comment/add",g={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(g.topicId=parseInt(n),g.userInfo={userId:c.a.getters.userInfo.id,name:c.a.getters.userInfo.title,subtitle:c.a.getters.userInfo.subtitle,avatar:c.a.getters.userInfo.avatarId},g.content=s.replace(/(^\s*)|(\s*$)/g,""),g.toId=parseInt(u),g.toUserId=parseInt(f),g.appId?r.a.http.post(h,g).then(function(e){var t=e.data;return a.a.log("[BBS].addComment.SUCCESS: ",t),t.meta&&1001===t.meta.code?this.getToken().then(function(e){return o.a.BBS_TOKEN=e,p.addComment({topicId:n,content:s,toId:u,toUserId:f})}):t.meta&&0!==t.meta.code?m.reject(t):(p.setCurrentItem({OPT:1}),m.resolve(t))}):new m(function(e,t){t("微服务配置信息错误，请确认config.js的配置(BBS_APPID)")})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,p.addComment({topicId:n,content:s,toId:u,toUserId:f})})},delComment:function(e){var t=e.topicId,n=void 0===t?0:t,i=e.commentId,s=void 0===i?0:i;a.a.log("[BBS].delComment：");var l=this,u=o.a.BBS_URL+"/v1/comment/del",d={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(d.topicId=parseInt(n),d.cId=parseInt(s),d.userId=c.a.getters.userInfo.id,r.a.http.post(u,d).then(function(e){var t=e.data;return a.a.log("[BBS].delComment.SUCCESS: ",t),t.meta&&1001===t.meta.code?l.getToken().then(function(e){return o.a.BBS_TOKEN=e,l.delComment({topicId:n,commentId:s})}):t.meta&&0!==t.meta.code?m.reject(t.meta.message):(l.setCurrentItem({OPT:0}),m.resolve(t))})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,l.delComment({topicId:n,commentId:s})})},addPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,n=void 0===t?0:t,i=e.toId,a=void 0===i?0:i,s=this,l=o.a.BBS_URL+"/v1/like/add",u={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(u.topicId=parseInt(n),u.userInfo={userId:c.a.getters.userInfo.id,name:c.a.getters.userInfo.title,subtitle:c.a.getters.userInfo.subtitle,avatar:c.a.getters.userInfo.avatarId},u.toId=parseInt(a),r.a.http.post(l,u).then(function(e){var t=e.data;return t.meta&&1001===t.meta.code?s.getToken().then(function(e){return o.a.BBS_TOKEN=e,s.addPraise({topicId:n,toId:a})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.Res)})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,s.addPraise({topicId:n,toId:a})})},delPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topicId,n=void 0===t?0:t,i=e.commentId,a=void 0===i?0:i,s=this,l=o.a.BBS_URL+"/v1/like/del",u={appId:o.a.BBS_APPID,token:o.a.BBS_TOKEN,toonType:o.a.toonType||100};return o.a.BBS_TOKEN?(u.topicId=parseInt(n),u.userId=c.a.getters.userInfo.id,u.cId=parseInt(a),r.a.http.post(l,u).then(function(e){var t=e.data;return t.meta&&1001===t.meta.code?s.getToken().then(function(e){return o.a.BBS_TOKEN=e,s.delPraise({topicId:n,commentId:a})}):t.meta&&0!==t.meta.code?m.reject(t):m.resolve(t.Res)})):this.getToken().then(function(e){return o.a.BBS_TOKEN=e,s.delPraise({topicId:n,commentId:a})})},checkFeed:function(){var e=this;if(c.a.getters.userInfo.feedId)return m.resolve();n.i(l.a)({functionType:"1"},"card/chooseCard",function(t){e.$logger.log("获取名片信息：：：：",t),e.feedId=t.feedId,t&&t.feedId&&r.a.http.get("/user/feed?feedId="+encodeURIComponent(t.feedId),function(e){return 0===e.code?m.resolve():m.reject("error")})},function(){return m.reject("未返回信息")})}};t.a=d},300:function(e,t,n){n(310);var i=n(43)(n(305),n(312),null,null);e.exports=i.exports},301:function(e,t,n){var i,r;(function(){function o(e){function t(t,n,i,r,o,a){for(;o>=0&&a>o;o+=e){var s=r?r[o]:o;i=n(i,t[s],s,t)}return i}return function(n,i,r,o){i=C(i,o,4);var a=!O(n)&&k.keys(n),s=(a||n).length,c=e>0?0:s-1;return arguments.length<3&&(r=n[a?a[c]:c],c+=e),t(n,i,r,a,c,s)}}function a(e){return function(t,n,i){n=x(n,i);for(var r=B(t),o=e>0?0:r-1;o>=0&&r>o;o+=e)if(n(t[o],o,t))return o;return-1}}function s(e,t,n){return function(i,r,o){var a=0,s=B(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=t(h.call(i,a,s),k.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&s>o;o+=e)if(i[o]===r)return o;return-1}}function c(e,t){var n=$.length,i=e.constructor,r=k.isFunction(i)&&i.prototype||d,o="constructor";for(k.has(e,o)&&!k.contains(t,o)&&t.push(o);n--;)(o=$[n])in e&&e[o]!==r[o]&&!k.contains(t,o)&&t.push(o)}var l=this,u=l._,m=Array.prototype,d=Object.prototype,f=Function.prototype,p=m.push,h=m.slice,g=d.toString,v=d.hasOwnProperty,b=Array.isArray,_=Object.keys,I=f.bind,y=Object.create,T=function(){},k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};void 0!==e&&e.exports&&(t=e.exports=k),t._=k,k.VERSION="1.8.3";var C=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return null==e?k.identity:k.isFunction(e)?C(e,t,n):k.isObject(e)?k.matcher(e):k.property(e)};k.iteratee=function(e,t){return x(e,t,1/0)};var w=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],a=e(o),s=a.length,c=0;s>c;c++){var l=a[c];t&&void 0!==n[l]||(n[l]=o[l])}return n}},N=function(e){if(!k.isObject(e))return{};if(y)return y(e);T.prototype=e;var t=new T;return T.prototype=null,t},E=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,B=E("length"),O=function(e){var t=B(e);return"number"==typeof t&&t>=0&&S>=t};k.each=k.forEach=function(e,t,n){t=C(t,n);var i,r;if(O(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else{var o=k.keys(e);for(i=0,r=o.length;r>i;i++)t(e[o[i]],o[i],e)}return e},k.map=k.collect=function(e,t,n){t=x(t,n);for(var i=!O(e)&&k.keys(e),r=(i||e).length,o=Array(r),a=0;r>a;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o},k.reduce=k.foldl=k.inject=o(1),k.reduceRight=k.foldr=o(-1),k.find=k.detect=function(e,t,n){var i;return i=O(e)?k.findIndex(e,t,n):k.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},k.filter=k.select=function(e,t,n){var i=[];return t=x(t,n),k.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},k.reject=function(e,t,n){return k.filter(e,k.negate(x(t)),n)},k.every=k.all=function(e,t,n){t=x(t,n);for(var i=!O(e)&&k.keys(e),r=(i||e).length,o=0;r>o;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},k.some=k.any=function(e,t,n){t=x(t,n);for(var i=!O(e)&&k.keys(e),r=(i||e).length,o=0;r>o;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},k.contains=k.includes=k.include=function(e,t,n,i){return O(e)||(e=k.values(e)),("number"!=typeof n||i)&&(n=0),k.indexOf(e,t,n)>=0},k.invoke=function(e,t){var n=h.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matcher(t))},k.findWhere=function(e,t){return k.find(e,k.matcher(t))},k.max=function(e,t,n){var i,r,o=-1/0,a=-1/0;if(null==t&&null!=e){e=O(e)?e:k.values(e);for(var s=0,c=e.length;c>s;s++)(i=e[s])>o&&(o=i)}else t=x(t,n),k.each(e,function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&o===-1/0)&&(o=e,a=r)});return o},k.min=function(e,t,n){var i,r,o=1/0,a=1/0;if(null==t&&null!=e){e=O(e)?e:k.values(e);for(var s=0,c=e.length;c>s;s++)i=e[s],o>i&&(o=i)}else t=x(t,n),k.each(e,function(e,n,i){r=t(e,n,i),(a>r||1/0===r&&1/0===o)&&(o=e,a=r)});return o},k.shuffle=function(e){for(var t,n=O(e)?e:k.values(e),i=n.length,r=Array(i),o=0;i>o;o++)t=k.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},k.sample=function(e,t,n){return null==t||n?(O(e)||(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))},k.sortBy=function(e,t,n){return t=x(t,n),k.pluck(k.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,i){var r={};return n=x(n,i),k.each(t,function(i,o){var a=n(i,o,t);e(r,i,a)}),r}};k.groupBy=L(function(e,t,n){k.has(e,n)?e[n].push(t):e[n]=[t]}),k.indexBy=L(function(e,t,n){e[n]=t}),k.countBy=L(function(e,t,n){k.has(e,n)?e[n]++:e[n]=1}),k.toArray=function(e){return e?k.isArray(e)?h.call(e):O(e)?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:O(e)?e.length:k.keys(e).length},k.partition=function(e,t,n){t=x(t,n);var i=[],r=[];return k.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:k.initial(e,e.length-t)},k.initial=function(e,t,n){return h.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:k.rest(e,Math.max(0,e.length-t))},k.rest=k.tail=k.drop=function(e,t,n){return h.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var M=function(e,t,n,i){for(var r=[],o=0,a=i||0,s=B(e);s>a;a++){var c=e[a];if(O(c)&&(k.isArray(c)||k.isArguments(c))){t||(c=M(c,t,n));var l=0,u=c.length;for(r.length+=u;u>l;)r[o++]=c[l++]}else n||(r[o++]=c)}return r};k.flatten=function(e,t){return M(e,t,!1)},k.without=function(e){return k.difference(e,h.call(arguments,1))},k.uniq=k.unique=function(e,t,n,i){k.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=x(n,i));for(var r=[],o=[],a=0,s=B(e);s>a;a++){var c=e[a],l=n?n(c,a,e):c;t?(a&&o===l||r.push(c),o=l):n?k.contains(o,l)||(o.push(l),r.push(c)):k.contains(r,c)||r.push(c)}return r},k.union=function(){return k.uniq(M(arguments,!0,!0))},k.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=B(e);r>i;i++){var o=e[i];if(!k.contains(t,o)){for(var a=1;n>a&&k.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},k.difference=function(e){var t=M(arguments,!0,!0,1);return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){return k.unzip(arguments)},k.unzip=function(e){for(var t=e&&k.max(e,B).length||0,n=Array(t),i=0;t>i;i++)n[i]=k.pluck(e,i);return n},k.object=function(e,t){for(var n={},i=0,r=B(e);r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.findIndex=a(1),k.findLastIndex=a(-1),k.sortedIndex=function(e,t,n,i){n=x(n,i,1);for(var r=n(t),o=0,a=B(e);a>o;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o},k.indexOf=s(1,k.findIndex,k.sortedIndex),k.lastIndexOf=s(-1,k.findLastIndex),k.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;i>o;o++,e+=n)r[o]=e;return r};var j=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=N(e.prototype),a=e.apply(o,r);return k.isObject(a)?a:o};k.bind=function(e,t){if(I&&e.bind===I)return I.apply(e,h.call(arguments,1));if(!k.isFunction(e))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),i=function(){return j(e,i,t,this,n.concat(h.call(arguments)))};return i},k.partial=function(e){var t=h.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),a=0;r>a;a++)o[a]=t[a]===k?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return j(e,n,this,this,o)};return n},k.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=k.bind(e[n],e);return e},k.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return k.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},k.delay=function(e,t){var n=h.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=k.partial(k.delay,k,1),k.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:k.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var l=k.now();s||!1!==n.leading||(s=l);var u=t-(l-s);return i=this,r=arguments,0>=u||u>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(c,u)),o}},k.debounce=function(e,t,n){var i,r,o,a,s,c=function(){var l=k.now()-a;t>l&&l>=0?i=setTimeout(c,t-l):(i=null,n||(s=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=k.now();var l=n&&!i;return i||(i=setTimeout(c,t)),l&&(s=e.apply(o,r),o=r=null),s}},k.wrap=function(e,t){return k.partial(t,e)},k.negate=function(e){return function(){return!e.apply(this,arguments)}},k.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},k.once=k.partial(k.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),$=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];k.keys=function(e){if(!k.isObject(e))return[];if(_)return _(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return P&&c(e,t),t},k.allKeys=function(e){if(!k.isObject(e))return[];var t=[];for(var n in e)t.push(n);return P&&c(e,t),t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},k.mapObject=function(e,t,n){t=x(t,n);for(var i,r=k.keys(e),o=r.length,a={},s=0;o>s;s++)i=r[s],a[i]=t(e[i],i,e);return a},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=w(k.allKeys),k.extendOwn=k.assign=w(k.keys),k.findKey=function(e,t,n){t=x(t,n);for(var i,r=k.keys(e),o=0,a=r.length;a>o;o++)if(i=r[o],t(e[i],i,e))return i},k.pick=function(e,t,n){var i,r,o={},a=e;if(null==a)return o;k.isFunction(t)?(r=k.allKeys(a),i=C(t,n)):(r=M(arguments,!1,!1,1),i=function(e,t,n){return t in n},a=Object(a));for(var s=0,c=r.length;c>s;s++){var l=r[s],u=a[l];i(u,l,a)&&(o[l]=u)}return o},k.omit=function(e,t,n){if(k.isFunction(t))t=k.negate(t);else{var i=k.map(M(arguments,!1,!1,1),String);t=function(e,t){return!k.contains(i,t)}}return k.pick(e,t,n)},k.defaults=w(k.allKeys,!0),k.create=function(e,t){var n=N(e);return t&&k.extendOwn(n,t),n},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e},k.isMatch=function(e,t){var n=k.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;i>o;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0};var U=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=g.call(e);if(r!==g.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!U(e[c],t[c],n,i))return!1}else{var l,u=k.keys(e);if(c=u.length,k.keys(t).length!==c)return!1;for(;c--;)if(l=u[c],!k.has(t,l)||!U(e[l],t[l],n,i))return!1}return n.pop(),i.pop(),!0};k.isEqual=function(e,t){return U(e,t)},k.isEmpty=function(e){return null==e||(O(e)&&(k.isArray(e)||k.isString(e)||k.isArguments(e))?0===e.length:0===k.keys(e).length)},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=b||function(e){return"[object Array]"===g.call(e)},k.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},k.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){k["is"+e]=function(t){return g.call(t)==="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return k.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(e){return"function"==typeof e||!1}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!==+e},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===g.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return null!=e&&v.call(e,t)},k.noConflict=function(){return l._=u,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.noop=function(){},k.property=E,k.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},k.matcher=k.matches=function(e){return e=k.extendOwn({},e),function(t){return k.isMatch(t,e)}},k.times=function(e,t,n){var i=Array(Math.max(0,e));t=C(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=k.invert(K),F=function(e){var t=function(t){return e[t]},n="(?:"+k.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};k.escape=F(K),k.unescape=F(D),k.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),k.isFunction(i)?i.call(e):i};var A=0;k.uniqueId=function(e){var t=++A+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+z[e]};k.template=function(e,t,n){!t&&n&&(t=n),t=k.defaults({},t,k.templateSettings);var i=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,a,s){return o+=e.slice(r,s).replace(V,H),r=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,k)};return s.source="function("+(t.variable||"obj")+"){\n"+o+"}",s},k.chain=function(e){var t=k(e);return t._chain=!0,t};var q=function(e,t){return e._chain?k(t).chain():t};k.mixin=function(e){k.each(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),q(this,n.apply(k,e))}})},k.mixin(k),k.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=m[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],q(this,n)}}),k.each(["concat","join","slice"],function(e){var t=m[e];k.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),k.prototype.value=function(){return this._wrapped},k.prototype.valueOf=k.prototype.toJSON=k.prototype.value,k.prototype.toString=function(){return""+this._wrapped},n(303)&&(i=[],void 0!==(r=function(){return k}.apply(t,i))&&(e.exports=r))}).call(this)},303:function(e,t){(function(t){e.exports=t}).call(t,{})},304:function(e,t,n){n(309);var i=n(43)(n(306),n(311),null,null);e.exports=i.exports},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46),r=n.n(i),o=n(79),a=n.n(o),s=n(27),c=n(280),l=n(26),u=n(78);n.n(u);t.default={name:"v-comment-bar",props:{id:{type:Number|String,default:0},value:{type:Object,default:function(){return{Tm:""}}},delTopicEnable:{type:Boolean,default:!1},delCommentEnable:{type:Boolean,default:!1},praiseEnable:{type:Boolean,default:!1},commentEnable:{type:Boolean,default:!1}},data:function(){return{comment:this.value||{}}},computed:a()({},n.i(u.mapState)({subjects:function(e){return e.comment.subjects},comments:function(e){return e.comment.comments},formatedCreateDt:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)?l.b(this.subjects[this.comment.Id].Tm):this.comments.hasOwnProperty(this.comment.CommentId)?l.b(this.comments[this.comment.CommentId].Tm):""},formatedPraiseNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeNum?this.subjects[this.comment.Id].LikeNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeNum?this.comments[this.comment.CommentId].LikeNum:"赞"},formatedCommentNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].CommentNum?this.subjects[this.comment.Id].CommentNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].CommentNum?this.comments[this.comment.CommentId].CommentNum:"评论"},formatedLikeFlag:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeFlag?this.subjects[this.comment.Id].LikeFlag:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeFlag?this.comments[this.comment.CommentId].LikeFlag:0}}),{delTopicEnableTag:function(){return this.delTopicEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)},delCommentEnableTag:function(){return this.delCommentEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)}}),watch:{value:function(e){this.comment=e},comment:function(e){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_COMMENT",r()(this.comment)):this.$store.commit("SET_COMMENT",r()(this.comment)),this.$emit("input",e)},"comment.LikeFlag":function(e){this.$emit("input",this.comment)}},mounted:function(){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_COMMENT",r()(this.comment)):this.$store.commit("SET_COMMENT",r()(this.comment))},methods:{togglePraise:function(e){var t=this;if(this.praiseEnable){e.stopPropagation();({}).userId=this.comment.UserId||0,this.comment.LikeFlag?c.a.delPraise({cId:this.comment.CommentId||0,subjectId:this.comment.Id,userId:s.a.loginData.userInfo.userId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!1),t.$set(t.comment,"LikeNum",t.comment.LikeNum-1),t.$store.commit("DEL_PRAISE",t.comment)}).catch(function(e){t.$logger.error("delete praise error: ",e)}):c.a.addPraise({subjectId:this.comment.Id,toId:this.comment.CommentId||0,type:1}).then(function(e){t.$set(t.comment,"LikeFlag",!0),t.$set(t.comment,"LikeNum",t.comment.LikeNum+1),t.$store.commit("ADD_PRAISE",t.comment)}).catch(function(e){t.$logger.error("post praise error: ",e)})}},addComment:function(e){if(this.commentEnable){this.$logger.log("v-comment-bar.method.addComment..."),e.stopPropagation();var t=this.comment.CommentId?this.comment.Parent?this.comment.Parent:this.comment.CommentId:0,n=this.comment.CommentId?this.comment.UserId:0;this.$router.push({name:"comment-create",params:{id:this.comment.Id},query:{toid:this.comment.CommentId,touid:n,pid:t}})}},delTopic:function(){},delComment:function(){var e=this;c.a.delComment({subjectId:this.$route.params.id,commentId:this.comment.CommentId}).then(function(t){e.$logger.log("v-comment-bar.delComment.SUCCESS: ",t),e.$store.commit("DEL_COMMENT_NUM",{Id:e.comment.Id}),e.$emit("handle-del-comment",t)}).catch(function(t){e.$logger.error("v-comment-bar.delComment.ERROR: ",t)})}}}},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-swipe-label",props:{id:String,fixed:{type:Boolean,default:!1},showBottomLine:{type:Boolean,default:!1},dark:{type:Boolean,default:!1}},data:function(){return{position:0,isSticky:!1,isFixed:!1,floatClass:"",startX:0,lastX:0,lastMoveTime:0,lastMoveStart:0,stopMovingTag:!1,minl:0,maxl:-8e3,conStyle:{left:"0px"},left:0}},computed:{oh:function(){return this.$el.getBoundingClientRect().top}},watch:{"$route.name":function(e){this.fixed&&(this._inactive?(this.$logger.log("v-swipe-label.watch.back..."),window.removeEventListener("scroll",this.scrollHandle)):(this.$logger.log("v-swipe-label.watch.in..."),window.addEventListener("scroll",this.scrollHandle)))}},created:function(){this.$logger.log("v-swipe-label created...")},mounted:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{init:function(){if(this.maxl=-(this.$refs.content.offsetWidth-this.$refs.container.offsetWidth),this.fixed){this.getScrollEventTarget(this.$el).addEventListener("scroll",this.throttle(this.scrollHandle,10)),this.position=this.$el.getBoundingClientRect().top}},throttle:function(e,t){var n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=function(){e.apply(o,a),i=n};return function(){if(o=this,a=arguments,n=Date.now(),r&&(clearTimeout(r),r=null),i){var e=t-(n-i);e<0?s():r=setTimeout(function(){s()},e)}else s()}},getScrollEventTarget:function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t).overflowY;if("scroll"===n||"auto"===n)return t;t=t.parentNode}return window}}}},307:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-swipe-label{position:relative;width:100%}.v-swipe-label .line{width:100%;height:1px;position:absolute;bottom:0;box-shadow:0 1px 1px #3a3e39}.v-swipe-label__container{position:relative;width:100%}.v-swipe-label__content{overflow-x:auto;white-space:nowrap}.v-swipe-label__content ::-webkit-scrollbar{height:0}.v-swipe-label__content>div{box-sizing:border-box;position:relative;display:inline-block;font-size:.37333rem;line-height:1.01333rem;padding:0 .26667rem;margin:0 .26667rem}.v-swipe-label__content>div ::-webkit-scrollbar{height:0}.dark{background:#1b1b20}.dark .v-swipe-label__content{display:-webkit-box;display:-webkit-flex;display:flex}.dark .v-swipe-label__content .itm{-webkit-box-flex:1;-webkit-flex:1;flex:1}",""])},308:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-comment-bar{padding:.48rem 0;background:#fff;-webkit-box-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-comment-bar,.v-comment-bar>div{display:-webkit-box;display:flex;display:-webkit-flex}.v-comment-bar>div{color:#8e8e93;-moz-flex-grow:0;-webkit-flex-grow:0;flex-grow:0;-webkit-box-flex:0;-webkit-flex-shrink:0;flex-shrink:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar>div:first-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1}.v-comment-bar>div p{font-size:.32rem;line-height:.4rem}.v-comment-bar .v-comment-bar__dt{margin-left:.4rem;-webkit-flex-shrink:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar .v-comment-bar__del{margin-left:.4rem;-webkit-flex-shrink:1;flex-shrink:1;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-flex-basis:auto;flex-basis:auto;color:#3395ff}.v-comment-bar .v-comment-bar__del p{display:inline}.v-comment-bar .icon{width:.4rem;height:.4rem;font-size:.4rem;margin-right:.13333rem}.v-comment-bar .icon.icon-heart-o{color:#fb434f}.v-comment-bar__dt{margin-left:.4rem}.v-comment-bar__praise{width:1.49333rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.v-comment-bar__praise .icon.done{-webkit-animation:shake .5s 1;animation:shake .5s 1}.v-comment-bar__praise .icon.cancel{-webkit-animation:shake2 .5s 1;animation:shake2 .5s 1}.v-comment-bar__praise.act{-webkit-animation:shake .1s 1;animation:shake .1s 1}@-webkit-keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@-webkit-keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}.v-comment-bar__comment{width:1.49333rem;margin-right:.4rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}",""])},309:function(e,t,n){var i=n(307);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("2fe4b618",i,!0)},310:function(e,t,n){var i=n(308);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("09bd6bba",i,!0)},311:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["v-swipe-label",{dark:e.dark}]},[n("div",{ref:"container",staticClass:"v-swipe-label__container",on:{touchmove:function(e){e.stopPropagation()},touchend:function(e){e.stopPropagation()}}},[n("div",{ref:"content",staticClass:"v-swipe-label__content",style:{left:e.left+"px"}},[e._t("default")],2),e._v(" "),e.showBottomLine?n("p",{staticClass:"line"}):e._e()])])},staticRenderFns:[]}},312:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-comment"},[n("div",{staticClass:"v-comment-bar"},[n("div",[n("div",{staticClass:"v-comment-bar__dt"},[e._v(e._s(e._f("specialTime")(e.comment.Tm)))]),e._v(" "),e.delTopicEnableTag?n("div",{staticClass:"v-comment-bar__del"},[n("p",{on:{click:e.delTopic}},[e._v("删除主题")])]):e._e(),e._v(" "),e.delCommentEnableTag?n("div",{staticClass:"v-comment-bar__del"},[n("p",{on:{click:e.delComment}},[e._v("删除评论")])]):e._e()]),e._v(" "),n("div",{staticClass:"v-comment-bar__praise",on:{click:e.togglePraise}},[n("span",{class:["icon",{"icon-heart cancel":!e.formatedLikeFlag},{"icon-heart-o done":e.formatedLikeFlag}]}),e._v(" "),n("p",{domProps:{textContent:e._s(e.formatedPraiseNum)}})]),e._v(" "),n("div",{staticClass:"v-comment-bar__comment",on:{click:e.addComment}},[n("span",{staticClass:"icon icon-comment"}),e._v(" "),n("p",{domProps:{textContent:e._s(e.formatedCommentNum)}})])])])},staticRenderFns:[]}},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},props:{value:{type:Array,default:function(){return[]}},detail:{type:Object,default:function(){}},limit:{type:Number,default:5},totalShow:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},computed:{totalShowTag:function(){return this.totalShow&&this.currentValue.length>this.limit}},watch:{value:function(e){this.currentValue=e}},mounted:function(){},methods:{goReply:function(e){var t=e.CommentId?e.Parent?e.Parent:e.CommentId:0;this.totalShow?this.$router.push({name:"comment-create",params:{id:e.Id},query:{toid:e.CommentId,touid:e.UserId,pid:t}}):this.$router.replace({name:"comment-create",params:{id:e.Id},query:{toid:e.CommentId,touid:e.UserId,pid:t}})}}}},322:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,'.p-comments-reply{position:relative;background:#f6f6f6;margin:0 .4rem .4rem;padding:.21333rem}.p-comments-reply:before{width:0;height:0;content:"";display:block;position:absolute;top:-.10667rem;left:.26667rem;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:.16rem;border-color:#f6f6f6 transparent transparent #f6f6f6;border-style:solid;border-top-left-radius:.05333rem}.p-comments-reply__con{padding-bottom:.13333rem}.p-comments-reply__con .p-comments-reply__con-txt{font-size:.37333rem;line-height:.56rem}.p-comments-reply__con .p-comments-reply__con-txt span{font-size:.37333rem;line-height:.53333rem;color:#576b95}.p-comments-reply__con .p-comments-reply__con-tm{padding:0 .4rem .4rem 0;text-align:right}.p-comments-reply__total{font-size:.34667rem;color:#777e8c;letter-spacing:0;line-height:1;text-align:right;border-top:1px solid #d8d8d8;padding-top:.26667rem}.p-comments-reply.max{margin:.26667rem 0 0;padding:.4rem 0 0 1.33333rem;background:#fafafa;border-top:1px solid #d8d8d8;border-bottom:1px solid #d8d8d8}.p-comments-reply.max:before{border-color:#fff;box-shadow:1px 1px 0 0 #d8d8d8;top:-.16rem;left:1.33333rem}.p-comments-reply.max li{border-bottom:1px solid #d8d8d8}.p-comments-reply.max li:last-child{border:0}.p-comments-reply.max .p-comments-reply__con{padding-bottom:0}.p-comments-reply.max .p-comments-reply__con .p-comments-reply__con-txt{padding:.4rem .4rem .26667rem 0}',""])},325:function(e,t,n){var i=n(322);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("153b0304",i,!0)},328:function(e,t,n){n(325);var i=n(43)(n(319),n(329),null,null);e.exports=i.exports},329:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentValue.length>0?n("div",{staticClass:"p-comments-reply",class:[{max:!e.totalShow}]},[n("ul",{staticClass:"p-comments-reply__con"},e._l(e.currentValue,function(t,i){return e.totalShow&&i<e.limit||!e.totalShow?n("li",[n("div",{staticClass:"p-comments-reply__con-txt",on:{click:function(n){e.goReply(t)}}},[n("span",[e._v(e._s(t.userInfo.title||""))]),e._v(" "),t.CtId!=e.detail.CommentId&&t.ToUserId?[e._v("回复"),n("span",[e._v(" @"+e._s(t.toUserInfo.title))])]:e._e(),e._v("\n                : "+e._s(t.Content||"")+"\n            ")],2),e._v(" "),e.totalShow?e._e():n("div",{staticClass:"p-comments-reply__con-tm"},[e._v(e._s(e._f("specialTime")(t.Tm)))])]):e._e()})),e._v(" "),e.totalShowTag?n("div",{staticClass:"p-comments-reply__total"},[e._t("total")],2):e._e()]):e._e()},staticRenderFns:[]}},332:function(e,t,n){n(343);var i=n(43)(n(334),n(345),null,null);e.exports=i.exports},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(79),r=n.n(i),o=n(254),a=n.n(o),s=n(280),c=n(27),l=n(78);n.n(l);t.default={name:"p-comment-btn",components:{vButton:a.a},props:{value:{type:Object,default:function(){return{Id:""}}},commentNum:Number,praiseNum:Number},data:function(){return{currentValue:this.value,isLock:!1,comments:this.commentNum,praises:this.praiseNum}},computed:r()({},n.i(l.mapState)({xSubjects:function(e){return e.comment.subjects},formatedLikeFlag:function(e){return this.currentValue.Id&&this.xSubjects.hasOwnProperty(this.currentValue.Id)&&this.xSubjects[this.currentValue.Id].LikeFlag?this.xSubjects[this.currentValue.Id].LikeFlag:this.currentValue.hasOwnProperty("LikeFlag")?this.currentValue.LikeFlag:0}}),{praiseTxt:function(){return this.currentValue&&this.currentValue.LikeFlag?"已点赞":"点赞"}}),watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},isZan:function(e){this.praise=e},commentNum:function(e){this.comments=e},praiseNum:function(e){this.praises=e}},mounted:function(){this.$logger.log("p-paytype-label.mounted: ",this.commentNum,this.praiseNum)},methods:{goToComment:function(){this.$router.push({name:"comment-create",params:{id:this.currentValue.Id},query:{}})},togglePraise:function(e){var t=this;this.$logger.log("p-comments-btn.method.togglePraise...",e.target),e.stopPropagation(),this.currentValue.LikeFlag?s.a.delPraise({cId:this.currentValue.CommentId||0,subjectId:this.currentValue.Id,userId:c.a.loginData.userInfo.userId||0}).then(function(e){t.$set(t.currentValue,"LikeFlag",!1),t.$set(t.currentValue,"LikeNum",t.currentValue.LikeNum-1),t.$store.commit("DEL_PRAISE",t.currentValue)}).catch(function(e){t.$logger.error("delete praise error: ",e)}):s.a.addPraise({subjectId:this.currentValue.Id,toId:this.currentValue.CommentId||0,type:1}).then(function(e){t.$set(t.currentValue,"LikeFlag",!0),t.$set(t.currentValue,"LikeNum",t.currentValue.LikeNum+1),t.$store.commit("ADD_PRAISE",t.currentValue)}).catch(function(e){t.$logger.error("post praise error: ",e)})}}}},341:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".p-comments-btn{height:1.46667rem;width:100%;position:fixed;bottom:0;left:0;border-top:1px solid #dddee3;background:#fff;z-index:999;color:#5c5c5c}.p-comments-btn,.p-comments-btn>div{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.p-comments-btn>div{height:100%;-webkit-box-flex:0;-webkit-flex:0 0 1.6rem;flex:0 0 1.6rem;border-right:1px solid #dddee3;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.p-comments-btn>div:last-child{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto;border-right:0}.p-comments-btn .icon{font-size:.48rem;margin-bottom:.18667rem}.p-comments-btn .icon.icon-heart-o{color:#f55151}.p-comments-btn_comment{padding:.26667rem;font-size:.4rem}",""])},343:function(e,t,n){var i=n(341);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("e13b20a6",i,!0)},345:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-comments-btn"},[n("div",{staticClass:"p-comments-btn_praise",on:{click:e.togglePraise}},[n("i",{staticClass:"icon",class:[{"icon-heart":!e.formatedLikeFlag},{"icon-heart-o":e.formatedLikeFlag}]}),e._v(" "),n("p",[e._v(e._s(e.praiseTxt))])]),e._v(" "),n("div",{staticClass:"p-comments-btn_comment"},[n("v-button",{on:{click:function(t){t.stopPropagation(),e.goToComment(t)}}},[e._v("评论")])],1)])},staticRenderFns:[]}},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),r=n.n(i),o=n(79),a=n.n(o),s=n(27),c=n(77),l=n(26),u=n(28),m=n(246),d=n.n(m),f=n(252),p=n.n(f),h=n(300),g=n.n(h),v=n(280),b=n(301),_=n.n(b),I=n(304),y=n.n(I),T=n(332),k=n.n(T),C=n(78),x=(n.n(C),n(328)),w=n.n(x),N=n(283),E=n.n(N);t.default={name:"p-comments",props:{value:{type:Object,default:function(){return{Id:0,CommentNum:0,ListNum:0}}},subjectId:{type:Number|String,default:0},replyMode:{type:Boolean,default:!1}},components:{vFeed:d.a,vText:p.a,vCommentBar:g.a,vSwipeLabel:y.a,pCommentsBtn:k.a,pCommentsReply:w.a,vScroll:E.a},data:function(){return{labs:[{id:0,txt:"评论"},{id:1,txt:"点赞"}],currentLab:0,comment:{Id:0,CommentNum:0,LikeNum:0},listData:[],praiseList:[]}},computed:a()({},n.i(C.mapState)({commentNum:function(e){return!this.comment.CommentId&&e.comment.subjects.hasOwnProperty(this.comment.Id)&&e.comment.subjects[this.comment.Id].CommentNum?e.comment.subjects[this.comment.Id].CommentNum:e.comment.comments.hasOwnProperty(this.comment.CommentId)&&e.comment.comments[this.comment.CommentId].CommentNum?e.comment.comments[this.comment.CommentId].CommentNum:""},likeNum:function(e){return!this.comment.CommentId&&e.comment.subjects.hasOwnProperty(this.comment.Id)&&e.comment.subjects[this.comment.Id].LikeNum?e.comment.subjects[this.comment.Id].LikeNum:e.comment.comments.hasOwnProperty(this.comment.CommentId)&&e.comment.comments[this.comment.CommentId].LikeNum?e.comment.comments[this.comment.CommentId].LikeNum:""}})),watch:{value:function(e){this.comment=e},comment:function(e){this.$emit("input",e)},"comment.LikeFlag":function(e){u.a.log("!!!watch: item ===> ",this.comment.LikeFlag,e),this.praiseList=[]}},created:function(){u.a.log("p-comments.created... "),this.init()},methods:{init:function(){u.a.log("p-comments.init... ",this.comment),this.$set(this.labs[0],"txt",this.labs[0].txt+this.comment.CommentNum),this.$set(this.labs[1],"txt",this.labs[1].txt+this.comment.LikeNum)},clickLabel:function(e){this.currentLab=e},getList:function(e){var t=this,n=e.offset,i=void 0===n?0:n,o=e.limit,a=void 0===o?s.a.limit:o;return v.a.getComments({subjectId:this.subjectId,offset:i,limit:a}).then(function(e){u.a.log("===> comment-info.getList: ",e);var n=e.length;return e&&n>0&&(e.forEach(function(e){e.CommentId=e.Id,e.Id=e.SubjectId,t.listData.push({id:e.SubjectId,userInfo:{feedId:""},comment:e})}),t.getUserInfo(e)),r.a.resolve(e)})},getUserInfo:function(e,t){if(e){var n=this,i=[];return e.forEach(function(e){_.a.contains(i,e.UserId)||i.push(e.UserId),e.ToUserId&&!_.a.contains(i,e.ToUserId)&&i.push(e.ToUserId)}),c.i({uids:i}).then(function(e){u.a.log("[comments].getUserInfo: ",e),t?(n.praiseList.forEach(function(t,i){if(!t.userInfo||!t.userInfo.title){var r=_.a.find(e,function(e){return parseInt(e.userId)===t.comment.UserId})||{avatarId:"",title:"未知用户"};r.avatarId=l.d(r.avatarId),n.$set(n.praiseList[i],"userInfo",r)}!t.comment.ToUserId||t.toUserInfo&&t.toUserInfo.title||n.$set(n.praiseList[i],"toUserInfo",_.a.find(e,function(e){return parseInt(e.userId)===t.comment.ToUserId})||{avatarId:"",title:"未知用户"})}),u.a.log("[comments].getUserInfo: ",n.praiseList)):(n.listData.forEach(function(t,i){if(!t.userInfo||!t.userInfo.title){var r=_.a.find(e,function(e){return parseInt(e.userId)===t.comment.UserId})||{avatarId:"",title:"未知用户"};r.avatarId=l.d(r.avatarId),n.$set(n.listData[i],"userInfo",r)}!t.comment.ToUserId||t.toUserInfo&&t.toUserInfo.title||(n.$set(n.listData[i],"toUserInfo",_.a.find(e,function(e){return parseInt(e.userId)===t.comment.ToUserId})||{avatarId:"",title:"未知用户"}),n.$set(n.listData[i].comment,"Content",'<span class="re">回复@'+n.listData[i].toUserInfo.title+"：</span>"+n.listData[i].comment.Content))}),u.a.log("[comments].getUserInfo: ",n.listData))})}},getPraise:function(e){var t=this,n=e.offset,i=void 0===n?0:n,o=e.limit,a=void 0===o?s.a.limit:o;return v.a.getPraise({subjectId:this.subjectId,offset:i,limit:a}).then(function(e){u.a.log("comment-info.getPraise: ",e);var n=e&&e.length?e.length:0;return e&&n>0&&(0===t.praiseOffset&&(t.praiseList=[]),e.forEach(function(e){t.praiseList.push({id:e.subjectId,formatedTm:l.b(e.Tm),userInfo:{feedId:""},comment:e})}),t.getUserInfo(e,!0)),r.a.resolve(e)})},refreshPraiseList:function(){var e=this;if(this.comment){var t=_.a.find(this.praiseList,function(e){return e.comment.UserId===parseInt(s.a.loginData.userInfo.userId)});u.a.log("-----\x3e ",this.comment.LikeFlag,t,this.praiseList.length),this.comment.LikeFlag&&!t?(u.a.log("===>",this.comment),this.praiseList.push({id:this.comment.subjectId,formatedTm:l.b(new Date),userInfo:s.a.loginData.userInfo,comment:{UserId:parseInt(s.a.loginData.userInfo.userId)}})):!this.comment.LikeFlag&&this.praiseList.length>0&&this.praiseList.forEach(function(t,n){t.comment.UserId===parseInt(s.a.loginData.userInfo.userId)&&e.praiseList.splice(n,1)}),u.a.log("-----\x3e ",this.praiseList)}},handleDelComment:function(e){var t=v.a.getCurrentItem();t&&1===t.OPT?this.$logger.log("p-comments.handleDelComment: add..."):this.$logger.log("p-comments.handleDelComment: del..."),v.a.clearCurrentItem(),this.listData=[]},reply:function(e){var t=e.comment.CommentId?e.comment.Parent?e.comment.Parent:e.comment.CommentId:0;u.a.log("[comments].p-comments.reply: ",e,t),this.$router.push({name:"comment-create",params:{id:this.subjectId},query:{toid:e.comment.CommentId,touid:e.comment.UserId,pid:t}})}}}},400:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".p-comments{width:100%;padding-bottom:1.01333rem}.p-comments .v-swipe-label{border-bottom:.02667rem solid #f2f2f4}.p-comments .v-scroll-container{padding-bottom:.53333rem}.p-comments .comment-list li{border-bottom:.02667rem solid #f2f2f4}.p-comments .praise-list li{background:#fff}",""])},408:function(e,t,n){var i=n(400);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("6a9a655a",i,!0)},417:function(e,t,n){n(408);var i=n(43)(n(392),n(421),null,null);e.exports=i.exports},421:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-comments"},[n("v-swipe-label",{attrs:{id:"vSwipeLableComments",fixed:!1}},[n("div",{class:["itm",{cur:0==e.currentLab}],on:{click:function(t){e.clickLabel(0)}}},[e._v("评论"+e._s(e.commentNum))]),e._v(" "),n("div",{class:["itm",{cur:1==e.currentLab}],on:{click:function(t){e.clickLabel(1)}}},[e._v("点赞"+e._s(e.likeNum))])]),e._v(" "),n("v-scroll",{attrs:{func:e.getList,"func-type":"limit",enabled:0===e.currentLab},model:{value:e.listData,callback:function(t){e.listData=t},expression:"listData"}},[0==e.currentLab?n("ul",{staticClass:"comment-list"},e._l(e.listData,function(t,i){return n("li",{staticClass:"height-auto",attrs:{id:"commentLi"+i}},[n("v-feed",{attrs:{feedId:t.userInfo.feedId,imgUrl:t.userInfo.avatarId,title:t.userInfo.title,subtitle:t.userInfo.subtitle,desc:e._f("specialTime")(t.comment.Tm),classes:"title small no-border"}}),e._v(" "),n("v-text",{attrs:{classes:"content no-border",value:t.comment.Content},nativeOn:{click:function(n){e.reply(t)}}}),e._v(" "),n("v-comment-bar",{attrs:{classes:"footer",delCommentEnable:!0,praiseEnable:!0,commentEnable:!0},on:{"handle-del-comment":e.handleDelComment},model:{value:t.comment,callback:function(n){e.$set(t,"comment",n)},expression:"item.comment"}}),e._v(" "),e.replyMode?n("p-comments-reply",{attrs:{limit:5},model:{value:t.replies,callback:function(n){e.$set(t,"replies",n)},expression:"item.replies"}}):e._e()],1)})):e._e(),e._v(" "),n("div",{staticClass:"is_empty",attrs:{slot:"empty"},slot:"empty"},[n("div",{staticClass:"empty_bg"}),e._v(" "),n("p",{staticClass:"empty_content"},[e._v("快来发表第一个评论吧")])])]),e._v(" "),n("v-scroll",{attrs:{func:e.getPraise,"func-type":"limit",enabled:1===e.currentLab},model:{value:e.praiseList,callback:function(t){e.praiseList=t},expression:"praiseList"}},[1==e.currentLab?n("ul",{staticClass:"praise-list"},e._l(e.praiseList,function(e,t){return n("li",{staticClass:"height-auto",attrs:{id:"praiseLi"+t}},[n("v-feed",{attrs:{feedId:e.userInfo.feedId,imgUrl:e.userInfo.avatarId,title:e.userInfo.title,subtitle:e.userInfo.subtitle,desc:e.formatedTm,classes:"title small no-border"}})],1)})):e._e(),e._v(" "),n("div",{staticClass:"is_empty1",attrs:{slot:"empty"},slot:"empty"},[n("div",{staticClass:"empty_bg"}),e._v(" "),n("p",{staticClass:"empty_content"},[e._v("快来点个赞吧")])])]),e._v(" "),n("p-comments-btn",{model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)},staticRenderFns:[]}},489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(246),r=n.n(i),o=n(252),a=n.n(o),s=n(288),c=n(300),l=n.n(c),u=n(280),m=n(417),d=n.n(m);t.default={components:{vFeed:r.a,vText:a.a,pComments:d.a,vCommentBar:l.a},data:function(){return{detail:{userInfo:{}},comment:null,forumList:[]}},computed:{screenWidth:function(){return document.body.offsetWidth}},created:function(){this.$logger.log("comment-info.mounted... ")},activated:function(){if(this.$store.getters.position.hasOwnProperty(this.$route.query.timestamp)){this.$logger.log("comment-info.activated: back!");var e=u.a.getCurrentItem();e&&e.OPT?(this.$store.commit("ADD_COMMENT_NUM",{Id:this.$route.params.id}),this.$store.commit("DEL_POSITION",this.$route.query.timestamp)):e&&0===e.OPT&&this.$store.commit("DEL_POSITION",this.$route.query.timestamp),u.a.clearCurrentItem()}else this.$logger.log("comment-info.activated: in~"),this.init()},methods:{init:function(){var e=this;this.detail={userInfo:{},comment:{}},this.$logger.log("comment-info.init... "),s.a.getTopicDetail({topicId:this.$route.params.id}).then(function(t){e.$logger.log("comment-info.getTopicDetail... ",t),e.detail=t,e.getComment(e.$route.params.id)})},getComment:function(e){var t=this;u.a.getSubject(e).then(function(n){t.$logger.log("comment-info.getComment: ",n),t.comment={Id:e,UserId:n.UserId||0,CommentFlag:n.CommentFlag,CommentNum:n.CommentNum,LikeFlag:n.LikeFlag,LikeNum:n.LikeNum}}).catch(function(e){t.$logger.error("comment-info.getComment: ",e)})},goViewer:function(e){var t=this;this.$logger.log("comment-info.goViewer: ",e),this.$root.img=[],this.detail.pics.forEach(function(e,n){t.$root.img.push(e.url)}),this.$router.push({name:"viewer",query:{idx:e}})}}}},627:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".page-comment-info ul.end{border-bottom:.26667rem solid #f2f2f4}.page-comment-info .v-scroll-container{height:auto!important;overflow:initial!important}",""])},746:function(e,t,n){var i=n(627);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(161)("b49e424e",i,!0)},907:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page page-comment-info"},[n("ul",[n("li",[n("div",{staticClass:"info"},[n("v-feed",{attrs:{feedId:e.detail.userInfo.feedId,imgUrl:e.detail.userInfo.avatar,title:e.detail.userInfo.name,subtitle:e.detail.userInfo.subtitle,desc:e._f("specialTime")(parseInt(e.detail.addtm)),classes:"title small no-border"}}),e._v(" "),n("v-text",{attrs:{classes:"tit",value:e.detail.title}}),e._v(" "),n("v-text",{attrs:{classes:"con",value:e.detail.abstract}})],1)])]),e._v(" "),n("ul",{staticClass:"listview-info-img"},e._l(e.detail.pics,function(t,i){return n("li",{style:{height:t.height&&t.width?parseInt(e.screenWidth/(t.width/t.height))+"px":"auto"},on:{click:function(t){t.stopPropagation(),e.goViewer(i)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.url,expression:"img.url"}]})])})),e._v(" "),n("ul",{staticClass:"end"},[n("li",[n("v-comment-bar",{attrs:{"del-topic-enable":!0,praiseEnable:!0,commentEnable:!0},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)]),e._v(" "),n("p-comments",{attrs:{"subject-id":e.$route.params.id},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)},staticRenderFns:[]}}});