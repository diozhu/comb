(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"/lTB":function(t,e,s){"use strict";var i=s("x0j7");s.n(i).a},"1MEp":function(t,e,s){"use strict";var i=s("P5Lg"),n={name:"v-text",props:{value:String,limit:{type:Number,default:0},length:Number,expandEnabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){var t="limit"+this.limit;Object(i.d)(this.$el,t)?Object(i.g)(this.$el,t):Object(i.a)(this.$el,t)}},render:function(t){var e={attrs:{id:"vText"+this._uid},class:["v-text",1===this.limit?"single":this.limit?"limit"+this.limit:""]};return this.expandEnabled&&(e.on={click:this.handleClick}),t("p",e,this.length&&this.value?this.value.substring(0,this.length):this.value)}},o=(s("Cwv2"),s("KHd+")),r=Object(o.a)(n,void 0,void 0,!1,null,null,null);e.a=r.exports},"1tEt":function(t,e,s){},"3DT5":function(t,e,s){"use strict";var i=s("MUE/");s.n(i).a},"4uyO":function(t,e,s){},"8dV5":function(t,e,s){},A8F1:function(t,e,s){"use strict";var i=s("8dV5");s.n(i).a},C8RR:function(t,e,s){"use strict";var i=s("qC/i");s.n(i).a},CcUO:function(t,e,s){},Cwv2:function(t,e,s){"use strict";var i=s("CcUO");s.n(i).a},F94j:function(t,e,s){"use strict";var i=s("1tEt");s.n(i).a},"MUE/":function(t,e,s){},NbUc:function(t,e,s){"use strict";var i=s("4uyO");s.n(i).a},R00a:function(t,e,s){"use strict";var i=s("XoBN");s.n(i).a},"RNA+":function(t,e,s){"use strict";var i=s("QbLZ"),n=s.n(i),o=s("uhV7"),r=s("WIBD"),l={name:"p-follow",components:{vButton:o.a},props:{disabled:{type:Boolean,default:!1},userid:{type:Number,default:0},followuid:{type:Number,default:0,required:!0},status:{type:Number,default:0,required:!0},border:{type:Boolean,default:!1}},data:function(){return{stateStr:"+关注",btnClasses:(this.value?"":"red ")+(this.border?"":"no-border ")}},computed:n()({},Object(r.mapState)({followStatus:function(t){var e="";return this.userid===this.followuid?(e="我",this.btnClasses="no-border"):(t.follow.follows[this.followuid]?(e="已关注",this.btnClasses=""):(e="+关注",this.btnClasses="red"),this.border||(this.btnClasses+=" no-border")),e}})),watch:{},created:function(){this.init()},methods:n()({},Object(r.mapMutations)(["GET_FOLLOW"]),{init:function(){void 0===this.$store.state.follow.follows[this.followuid]&&this.followuid&&this.$store.commit("SET_FOLLOW",{uid:this.followuid,status:this.status})},handleClick:function(t){this.userid!==this.followuid&&(this.$store.state.follow.follows[this.followuid]?this.delAttention():this.addAttention())},addAttention:function(){this.$store.dispatch("followAdd",this.followuid),this.$toast({message:"关注成功",duration:500,position:"bottom"})},delAttention:function(){this.$store.dispatch("followDel",this.followuid),this.$toast({message:"已取消关注",duration:500,position:"bottom"})}})},a=(s("fOW3"),s("KHd+")),c=Object(a.a)(l,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-follow"},[s("v-button",{attrs:{type:"info",disabled:t.disabled,"cus-class":t.btnClasses},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)}}},[t._v(t._s(t.followStatus))])],1)},[],!1,null,null,null);e.a=c.exports},UHKU:function(t,e,s){"use strict";s.r(e);var i=s("4d7F"),n=s.n(i),o=s("QbLZ"),r=s.n(o),l=s("1MEp"),a=s("iQJk"),c=s("RNA+"),u=s("XPLT"),d=s("20nU"),h=s("i7/w"),f=s.n(h),g=function(t){f.a.config.silent},v={name:"intersect",abstract:!0,props:{threshold:{type:Array,required:!1,default:function(){return[0,.2]}},root:{type:HTMLElement,required:!1,default:function(){return null}},rootMargin:{type:String,required:!1,default:function(){return"0px 0px 0px 0px"}}},created:function(){var t=this;this.observer=new window.IntersectionObserver(function(e){e[0].isIntersecting?t.$emit("enter",[e[0]]):t.$emit("leave",[e[0]]),t.$emit("change",[e[0]])},{threshold:this.threshold,root:this.root,rootMargin:this.rootMargin})},mounted:function(){var t=this;this.$nextTick(function(){if(t.$slots.default&&1<t.$slots.default.length)g();else if(!t.$slots.default||t.$slots.default.length<1)return void g();t.observer.POLL_INTERVAL=100,t.observer.observe(t.$slots.default[0].elm)})},destroyed:function(){this.observer.disconnect()},render:function(){return this.$slots.default?this.$slots.default[0]:null}},p=s("KHd+"),m=Object(p.a)(v,void 0,void 0,!1,null,null,null).exports,b=s("ywuS"),_=s("626b"),T=s("P5Lg"),y={name:"v-scroll",props:{id:String,value:{type:Array,default:function(){return[]}},func:Function,funcType:{type:String,default:"page"},enabled:{type:Boolean,default:!0},pullAbled:{type:Boolean,default:!1},toper:{type:Boolean,default:!1},scrollDistance:{type:Number,default:100},tombstone:{type:Boolean,default:!1}},components:{vSpinner:u.a,vIntersect:m},data:function(){return{uid:this._uid,currentValue:this.value,goTopTag:!1,oTime:-1,pageSize:d.a.LIMIT,offset:0,limit:d.a.LIMIT,page:1,pageNum:d.a.LIMIT,hasData:!0,hasMore:!0,isLoading:!1,scrollEndTxt:!1,refreshTag:!1,isEnabled:this.enabled}},computed:{isShowText:function(){return!(!this.hasData||this.hasMore)}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t)},enabled:function(t){this.$logger.log("v-scroll.watch.enabled! "),!0===(this.isEnabled=t)&&this.value.length<=0&&this.refreshList()}},created:function(){this.$logger.log("[v-scroll]."+this._uid+".created..."),b.a.$on("v-scroll.refreshList",this.refreshList),b.a.$on("v-scroll.getList",this.getList),this.$route.matched.some(function(t){return t.meta.keepAlive})||this.init()},mounted:function(){this.$logger.log("[v-scroll]."+this._uid+".mounted...",this.$route.name,this.$parent.$route.name,this.$store.state.route.name),this.$logger.log("###### [v-scroll]."+this._uid+".mounted...","IntersectionObserver"in window)},activated:function(){this.$logger.log("*[v-scroll]."+this._uid+".activated...",this._inactive),this.isEnabled=this.enabled,this.$router.direct()&&this.init()},deactivated:function(){this.$logger.log("*[v-scroll]."+this._uid+".deactivated...",this._inactive),this.isEnabled=!1},beforeDestroy:function(){this.$logger.log("*[v-scroll]."+this._uid+".beforeDestroy...")},methods:{reset:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).resetData,e=void 0===t||t;this.oTime=-1,this.pageSize=d.a.LIMIT,this.offset=0,this.limit=d.a.LIMIT,this.page=1,this.pageNum=d.a.LIMIT,this.hasMore=!0,this.hasData=!0,this.scrollEndTxt=!1,e&&(this.currentValue=[])},init:function(){this.$logger.log("[v-scroll]."+this._uid+".init..."),this.scrollTarget=T.c(this.$refs.container),this.reset()},goTop:function(){var t=this.scrollTarget;this.$logger.log("[v-scroll]."+this._uid+".getList.after: ",t.scrollHeight,t.offsetHeight),t===window?window.scrollTo(0,0):0<t.scrollTop&&(t.scrollTop-=1e3,setTimeout(this.goTop,30))},getList:function(){var t=this;if(this.$logger.log("[v-scroll]."+this._uid+".getList.befor: !!!"),this.isEnabled&&!this.isLoading&&(!this.scrollEndTxt&&this.scrollTarget&&(this.scrollEndTxt=this.scrollTarget.scrollHeight>5*this.scrollTarget.offsetHeight/4),"function"==typeof this.func&&this.hasMore))try{return this.isLoading=!0,this.fetcher||(this.fetcher=_.e(this.func,this.funcType)),this.fetcher.fetch().then(function(e){t.$logger.log("[v-scroll]."+t._uid+".getList.api.after.success: ",e),e&&e.length?(t.hasData=!0,t.currentValue=t.currentValue.concat(e)):t.currentValue&&t.currentValue.length||(t.hasData=!1),(!e||e.length<t.fetcher.limit)&&(t.hasMore=!1)}).then(function(e){t.$logger.log("[v-scroll]."+t._uid+".getList.after: ",t.scrollTarget),t.scrollTarget&&(t.$logger.log("[v-scroll]."+t._uid+".getList.after: ",t.scrollTarget.scrollHeight,t.scrollTarget.offsetHeight),t.$nextTick(function(){t.scrollEndTxt=t.scrollTarget.scrollHeight>5*t.scrollTarget.offsetHeight/4})),t.isLoading=!1})}catch(t){this.$logger.error("[v-scroll]."+this._uid+".getList.after.error: "+t),this.isLoading=!1}},refreshList:function(){var t=this;if(this.isEnabled&&!this._isDestroyed&&(this.$logger.log("!!!v-scroll."+this._uid+".refreshList..."),"function"==typeof this.func)){this.refreshTag=!0;var e=null;if("section"===this.funcType?e=this.getListBySection:"limit"===this.funcType?e=this.getListByLimit:"page"===this.funcType?e=this.getListByPage:"time"===this.funcType&&(e=this.getListByTime),"function"==typeof e)try{this.reset({resetData:!1}),e({refresh:!0}).then(function(e){t.$logger.log("[v-scroll]."+t._uid+".refreshList.after: ",t.currentValue.length),e&&e.length?t.currentValue=e:t.currentValue=[],t.refreshTag=!1}).then(function(e){t.scrollTarget&&(t.$logger.log("[v-scroll]."+t._uid+".refreshList.after: ",t.scrollTarget.scrollHeight,t.scrollTarget.offsetHeight),t.scrollEndTxt=t.scrollTarget.scrollHeight>5*t.scrollTarget.offsetHeight/4)}).catch(function(e){t.refreshTag=!1,t.$logger.error("[v-scroll]."+t._uid+".refreshList.after.error: "+e)})}catch(e){this.refreshTag=!1,this.$logger.error("[v-scroll]."+this._uid+".refreshList.after.error: "+e)}}}}},C=(s("R00a"),Object(p.a)(y,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-scroll"},[s("div",{directives:[{name:"scroll-position",rawName:"v-scroll-position"}],ref:"container",staticClass:"v-scroll-container",attrs:{id:"combScroll_"+t._uid}},[s("div",{ref:"content",staticClass:"v-scroll-content"},[t._t("default")],2),t._v(" "),s("v-intersect",{attrs:{threshold:[0,1]},on:{enter:t.getList}},[t.hasMore||t.isShowText&&t.scrollEndTxt&&0<t.currentValue.length?s("div",{staticClass:"v-scroll-bottom"},[s("transition",{attrs:{name:"fade"}},[s("v-spinner",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}],attrs:{color:"#BBBAC2",type:"triple-bounce"}})],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.isShowText&&t.scrollEndTxt&&0<t.currentValue.length,expression:"isShowText && scrollEndTxt && currentValue.length > 0"}],staticClass:"v-scroll-bottom-txt"},[t._v("· END ·")])])],1):t._e()]),t._v(" "),!t.hasData&&t.currentValue.length<=0?s("div",{staticClass:"v-scroll-empty"},[t._t("empty",[t._v("暂无数据")])],2):t._e()],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.toper&&t.goTopTag,expression:"toper && goTopTag"}],staticClass:"v-scroll-top icon icon-top",on:{click:t.goTop}})])],1)},[],!1,null,null,null).exports),$=s("WIBD"),x={components:{vText:l.a,vFeed:a.a,pFollow:c.a,vScroll:C},data:function(){return{flashTag:!0,listData:[]}},computed:r()({},Object($.mapGetters)(["userInfo","follows"])),mounted:function(){this.$logger.log("scroll.mounted... ")},methods:{init:function(){},getList:function(t){var e=this,s=t.offset,i=void 0===s?0:s,o=t.limit,r=void 0===o?d.a.LIMIT:o;return _.i({offset:i,limit:r}).then(function(t){return e.$logger.log("scroll.methods.getList: SUCCESS, ",t),t.length&&0<t.length&&(e.listData=e.listData.concat(t)),n.a.resolve(t)})},goDetail:function(t){this.$router.push({name:"scroll-two",query:{subjectId:this.$route.query.subjectId,id:t.id}})},handleTest:function(){var t=this;this.flashTag=!1,this.listData=[],this.$nextTick(function(){t.flashTag=!0})}}},w=(s("C8RR"),Object(p.a)(x,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page page-scroll-io"},[s("v-scroll",{attrs:{func:t.getList,"func-type":"section",enabled:t.flashTag},model:{value:t.listData,callback:function(e){t.listData=e},expression:"listData"}},[s("h2",[t._v("单滚动条(intersectionObserver) 样例")]),t._v(" "),s("ul",t._l(t.listData,function(e,i){return s("li",{key:i,on:{click:function(s){t.goDetail(e)}}},[s("v-feed",{attrs:{feedId:e.userInfo.feedId,imgUrl:e.userInfo.avatar,title:e.userInfo.title,subtitle:e.userInfo.subtitle,classes:"title small no-border"}}),t._v(" "),s("p-follow",{attrs:{followuid:parseInt(e.userInfo.id),userid:t.userInfo.id||0,status:e.userInfo.isfollow}}),t._v(" "),s("v-text",{attrs:{classes:"content",value:e.title}})],1)}))])],1)},[],!1,null,null,null));e.default=w.exports},XPLT:function(t,e,s){"use strict";var i={name:"snake",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}}},n=(s("NbUc"),s("KHd+")),o=Object(n.a)(i,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"v-spinner__snake",style:{"border-top-color":"transparent","border-right-color":t.spinnerColor,"border-left-color":t.spinnerColor,"border-bottom-color":t.spinnerColor}})},[],!1,null,null,null).exports,r={name:"triple-bounce",props:{size:Number,color:String},computed:{bounceStyle:function(){return{backgroundColor:this.spinnerColor}}}},l=(s("3DT5"),Object(n.a)(r,function(){return this.$createElement,this._self._c,this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"v-spinner__triple-bounce"},[e("div",{staticClass:"bounce1"}),this._v(" "),e("div",{staticClass:"bounce2"}),this._v(" "),e("div",{staticClass:"bounce3"})])}],!1,null,null,null).exports),a={name:"fading-circle",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}},created:function(){if(!this.$isServer){this.styleNode=document.createElement("style");var t=".circle-color-"+this._uid+" > div::before { background-color: "+this.spinnerColor+"; }";this.styleNode.type="text/css",this.styleNode.rel="stylesheet",this.styleNode.title="fading circle style",document.getElementsByTagName("head")[0].appendChild(this.styleNode),this.styleNode.appendChild(document.createTextNode(t))}},destroyed:function(){this.styleNode&&this.styleNode.parentNode.removeChild(this.styleNode)}},c=["snake","triple-bounce","fading-circle"],u={name:"v-spinner",computed:{spinner:function(){return"spinner-"+(t=this.type,"[object Number]"==={}.toString.call(t)?(c.length<=t&&(t=0),c[t]):(-1===c.indexOf(t)&&(t=c[0]),t));var t}},components:{SpinnerSnake:o,SpinnerTripleBounce:l,SpinnerFadingCircle:(s("/lTB"),Object(n.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:["v-spinner__fading-circle circle-color-"+this._uid]},this._l(12,function(t){return e("div",{key:t,staticClass:"circle",class:["is-circle"+t]})}))},[],!1,null,null,null).exports)},props:{type:{default:0},size:{type:Number,default:28},color:{type:String,default:"#ccc"}}},d=Object(n.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"v-spinner"},[e(this.spinner,{tag:"component"})],1)},[],!1,null,null,null).exports;s.d(e,"a",function(){return d})},XoBN:function(t,e,s){},fOW3:function(t,e,s){"use strict";var i=s("xUbe");s.n(i).a},iQJk:function(t,e,s){"use strict";var i=s("YJXF"),n={name:"v-feed",props:{id:String,feedId:String,imgUrl:String,msgNum:String,title:String,subtitle:String,sex:String,age:String,desc:String,classes:String,iconFunc:Function},data:function(){return{}},computed:{feedImg:function(){return i.m(this.imgUrl)},feedClass:function(){return/^o_/.test(this.feedId)||/^s_/.test(this.feedId)?"square":/^g_/.test(this.feedId)?"hexagon":"circle"}},created:function(){},methods:{handleClick:function(t){this.iconFunc&&"function"==typeof this.iconFunc&&(t.stopPropagation(),t.preventDefault(),this.iconFunc(),this.$toast({message:"您是不是想去个人中心？",duration:1e3,position:"bottom"}))}}},o=(s("F94j"),s("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-feed",class:[t.classes]},[s("div",{on:{click:t.handleClick}},[s("div",{staticClass:"v-feed__img",class:[t.feedClass]},[s("img",{attrs:{src:t.feedImg}})]),0<t.msgNum?s("i",{staticClass:"v-feed__num",class:[{mix:9<t.msgNum}],domProps:{textContent:t._s(t.msgNum)}}):t._e()]),t._v(" "),s("div",{staticClass:"v-feed__con"},[s("div",{staticClass:"v-feed__con-info"},[s("div",{staticClass:"v-feed__tit",domProps:{textContent:t._s(t.title)}}),t._v(" "),t.sex?s("div",{staticClass:"v-feed__sex icon",class:[{"icon-male":"1"==t.sex},{"icon-female":"2"==t.sex}]}):t._e(),t._v(" "),t.age?s("div",{staticClass:"v-feed__age",domProps:{textContent:t._s(t.age)}}):t._e(),t._v(" "),t.desc?s("div",{staticClass:"v-feed__desc",domProps:{textContent:t._s(t.desc)}}):t._e()]),t._v(" "),s("div",{staticClass:"v-feed__sub",domProps:{textContent:t._s(t.subtitle)}})])])},[],!1,null,null,null);e.a=r.exports},"qC/i":function(t,e,s){},uhV7:function(t,e,s){"use strict";var i={name:"v-button",props:{nativeType:String,type:{type:String,default:"default",validator:function(t){return-1<["default","danger","primary","info"].indexOf(t)}},styles:{type:String,default:"radius",validator:function(t){return-1<["radius","rectangle","circle"].indexOf(t)}},cusClass:String,cusStyle:String,disableClass:String,disabled:Boolean,size:{type:String,default:"normal",validator:function(t){return-1<["normal","small","full"].indexOf(t)}}},data:function(){return{}},methods:{handleClick:function(t){this.$emit("click",t)}}},n=(s("A8F1"),s("KHd+")),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"v-btn",class:[""+t.type,""+t.size,""+t.styles,{"is-disabled":t.disabled}],style:t.cusStyle,attrs:{type:t.nativeType,disabled:t.disabled},on:{click:t.handleClick}},[s("label",{staticClass:"v-btn__text"},[t._t("default")],2)])},[],!1,null,null,null);e.a=o.exports},x0j7:function(t,e,s){},xUbe:function(t,e,s){}}]);