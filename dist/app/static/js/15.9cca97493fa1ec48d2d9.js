webpackJsonp([15],{175:function(e,t,n){n(784);var o=n(43)(n(487),n(946),null,null);e.exports=o.exports},181:function(e,t,n){n(689);var o=n(43)(n(493),n(851),null,null);e.exports=o.exports},246:function(e,t,n){n(251);var o=n(43)(n(249),n(253),null,null);e.exports=o.exports},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(26);t.default={name:"v-feed",props:{id:String,feedId:String,imgUrl:String,msgNum:String,title:String,subtitle:String,sex:String,age:String,desc:String,classes:String,iconFunc:Function},data:function(){return{}},computed:{feedImg:function(){return o.d(this.imgUrl)},feedClass:function(){return/^o_/.test(this.feedId)||/^s_/.test(this.feedId)?"square":/^g_/.test(this.feedId)?"hexagon":"circle"}},created:function(){},methods:{handleClick:function(e){this.iconFunc&&"function"==typeof this.iconFunc&&(e.stopPropagation(),e.preventDefault(),this.iconFunc(),this.$toast({message:"您是不是想去个人中心？",duration:1e3,position:"bottom"}))}}}},250:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,'.v-feed{height:1.81333rem;background:#fff;border-bottom:1px solid #dddee3;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-feed>div{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 auto;flex:0 0 auto}.v-feed>div:last-child{-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}.v-feed__img{width:1.44rem;height:1.44rem;margin-left:.26667rem;margin-right:.26667rem;position:relative;border:0}.v-feed__img img{width:100%}.v-feed__img.circle{border-radius:50%;overflow:hidden}.v-feed__img.hexagon{height:1.22667rem;overflow:hidden}.v-feed__img.hexagon:before{left:0;border-right:.32rem solid transparent}.v-feed__img.hexagon:after,.v-feed__img.hexagon:before{content:"";width:0;height:0;position:absolute;top:0;border-top:.61333rem solid #fff;border-bottom:.61333rem solid #fff}.v-feed__img.hexagon:after{right:0;border-left:.32rem solid transparent}.small{height:1.38667rem}.small .v-feed__img{width:.85333rem;height:.85333rem;margin-left:.4rem}.small .v-feed__tit{font-size:.37333rem}.small .v-feed__sub,.v-feed__num{font-size:.32rem}.v-feed__num{width:.48rem;height:.48rem;border-radius:50%;background:#ff3b2f;position:absolute;right:.16rem;top:-.10667rem;color:#fff;line-height:.48rem;text-align:center}.v-feed__num.mix{width:.26667rem;height:.26667rem;color:transparent;right:.21333rem;top:-.05333rem}.v-feed__con{margin-right:.26667rem;-webkit-box-orient:vertical;-webkit-flex-direction:column;flex-direction:column}.v-feed__con,.v-feed__con-info{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal}.v-feed__con-info{-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-feed__con-info>div:last-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1;-webkit-flex-basis:auto;flex-basis:auto}.v-feed__tit{font-size:.45333rem;line-height:1}.v-feed__sex{width:.32rem;height:.32rem;margin:.02667rem .13333rem;text-align:center;font-size:.32rem;line-height:.32rem;color:#ff88b2;border-radius:.05333rem}.v-feed__sex.icon-male{color:#4392ec}.v-feed__age{font-size:.26667rem;line-height:.45333rem;color:#777e8c}.v-feed__desc{text-align:right;font-size:.32rem;line-height:1;color:#8e8e93}.v-feed__sub{margin-top:.18667rem;font-size:.37333rem;line-height:1;color:#777e8c}',""])},251:function(e,t,n){var o=n(250);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(161)("1e8d48d0",o,!0)},252:function(e,t,n){n(278);var o=n(43)(n(274),null,null,null);e.exports=o.exports},253:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-feed",class:[e.classes]},[n("div",{on:{click:e.handleClick}},[n("div",{staticClass:"v-feed__img",class:[e.feedClass]},[n("img",{attrs:{src:e.feedImg}})]),e.msgNum>0?n("i",{staticClass:"v-feed__num",class:[{mix:e.msgNum>9}],domProps:{textContent:e._s(e.msgNum)}}):e._e()]),e._v(" "),n("div",{staticClass:"v-feed__con"},[n("div",{staticClass:"v-feed__con-info"},[n("div",{staticClass:"v-feed__tit",domProps:{textContent:e._s(e.title)}}),e._v(" "),e.sex?n("div",{staticClass:"v-feed__sex icon",class:[{"icon-male":"1"==e.sex},{"icon-female":"2"==e.sex}]}):e._e(),e._v(" "),e.age?n("div",{staticClass:"v-feed__age",domProps:{textContent:e._s(e.age)}}):e._e(),e._v(" "),e.desc?n("div",{staticClass:"v-feed__desc",domProps:{textContent:e._s(e.desc)}}):e._e()]),e._v(" "),n("div",{staticClass:"v-feed__sub",domProps:{textContent:e._s(e.subtitle)}})])])},staticRenderFns:[]}},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(44);t.default={name:"v-text",props:{value:String,limit:{type:Number,default:0},expandEnabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{handleClick:function(){var e="limit"+this.limit;n.i(o.d)(this.$el,e)?n.i(o.c)(this.$el,e):n.i(o.b)(this.$el,e)}},render:function(e){var t={attrs:{id:"vText"+this._uid},class:["v-text",1===this.limit?"single":this.limit?"limit"+this.limit:""]};return this.expandEnabled&&(t.on={click:this.handleClick}),e("p",t,this.value)}}},276:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-text{font-size:.4rem;line-height:1.2;text-align:justify}.v-text.single{white-space:nowrap}.v-text.single,.v-text[class*=limit]{overflow:hidden;text-overflow:ellipsis}.v-text[class*=limit]{text-align:left;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.v-text.limit2{-webkit-line-clamp:2}.v-text.limit3{-webkit-line-clamp:3}.v-text.limit4{-webkit-line-clamp:4}.v-text.limit5{-webkit-line-clamp:5}.v-text .re{display:inline-table;font-size:.4rem;line-height:.50667rem;color:#007aff}",""])},278:function(e,t,n){var o=n(276);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(161)("6f94e38c",o,!0)},280:function(e,t,n){"use strict";var o=n(0),i=n.n(o),r=n(27),s=n(28),a=n(77),m=n(81),c=n(16);if(void 0===d)var d=m.a;var l={currentItem:null,setCurrentItem:function(e){e&&(this.currentItem=e)},getCurrentItem:function(){return this.currentItem},clearCurrentItem:function(){this.currentItem=null},comments_retry_num:0,comments_retry_max:3,getToken:function(){if(!a.h||"function"!=typeof a.h)return d.reject("无效token，请在api中实现vGetMicroCommentToken方法");var e=this;return this.comments_retry_num<this.comments_retry_max?(this.comments_retry_num+=1,a.h().then(function(t){return e.comments_retry_num=0,d.resolve(t)})):d.reject("token尝试超过限制，请刷新页面重试")},addComment:function(e){var t=e.subjectId,n=void 0===t?0:t,o=e.userId,a=void 0===o?0:o,m=e.content,c=void 0===m?"":m,l=e.toUserId,u=void 0===l?0:l,f=e.toId,p=void 0===f?0:f,h=e.parent,g=void 0===h?0:h,v=this,b=r.a.COMMENT_UTL+"/v1/comment",_={appId:r.a.COMMENT_APPID,token:r.a.COMMENT_TOKEN};return r.a.COMMENT_TOKEN?(_.subjectId=parseInt(n),_.userId=parseInt(a),_.content=c.replace(/(^\s*)|(\s*$)/g,""),_.toUserId=parseInt(u),_.toId=parseInt(p),_.parent=parseInt(g),_.appId?i.a.http.post(b,_).then(function(e){var t=e.data;return s.a.log("[comments].addComment.SUCCESS: ",t),1002===t.Code?this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,v.addComment(n,a,c,u,p)}):0!==t.Code?d.reject(t):(v.setCurrentItem({OPT:1}),d.resolve(t))}):new d(function(e,t){t("微服务配置信息错误，请确认config.js的配置(COMMENT_APPID)")})):this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,v.addComment(n,a,c,u,p)})},delComment:function(e){var t=e.subjectId,n=void 0===t?0:t,o=e.commentId,a=void 0===o?0:o;s.a.log("[comments].delComment：");var m=this,l=r.a.COMMENT_UTL+"/v1/comment/"+a+"?",u=void 0,f={appId:r.a.COMMENT_APPID,token:r.a.COMMENT_TOKEN};if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,m.delComment({subjectId:n,commentId:a})});f.subjectId=parseInt(n),f.userId=parseInt(c.a.getters.userInfo.id);for(u in f)f.hasOwnProperty(u)&&(l+=u+"="+encodeURIComponent(f[u])+"&");return i.a.http.delete(l,f).then(function(e){var t=e.data;return s.a.log("[comments].delComment.SUCCESS: ",t),1002===t.Code?m.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,m.delComment({subjectId:n,commentId:a})}):0!==t.Code?d.reject(t):(m.setCurrentItem({OPT:0}),d.resolve(t.Res))})},getSubject:function(e){var t=this;if(s.a.log("[comments].getSubject：",e),!e)return d.resolve(null);var n=[e],o=r.a.COMMENT_UTL+"/v1/comment/subject?",a={ids:"["+n.toString()+"]"},m=void 0;if(!a.ids)return d.reject({msg:"无效的SubjectIds"});if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(n){return r.a.COMMENT_TOKEN=n,t.getSubject(e)});a.appId=r.a.COMMENT_APPID,a.token=r.a.COMMENT_TOKEN,a.userId=parseInt(c.a.getters.userInfo.id)||0;for(m in a)a.hasOwnProperty(m)&&(o+=m+"="+encodeURIComponent(a[m])+"&");return i.a.http.get(o).then(function(n){var o=n.data;return s.a.log("[comments].getSubject.SUCCESS: ",o),1002===o.Code?t.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,this.getSubject(e)}):0!==o.Code?d.reject(o):d.resolve(o.Res[0]||null)})},getSubjectList:function(e){if(s.a.log("[comments].getSubjectList：",e),!e)return d.resolve([]);var t=[];e.forEach(function(e){t.push(e.id)});var n=this,o=r.a.COMMENT_UTL+"/v1/comment/subject?",a={ids:"["+t.toString()+"]"},m=void 0;if(!a.ids)return d.reject({msg:"无效的SubjectIds"});if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,n.getSubjectList(e)});a.appId=r.a.COMMENT_APPID,a.token=r.a.COMMENT_TOKEN,a.userId=parseInt(c.a.getters.userInfo.id)||0;for(m in a)a.hasOwnProperty(m)&&(o+=m+"="+encodeURIComponent(a[m])+"&");return i.a.http.get(o).then(function(t){var o=t.data;return s.a.log("[comments].getSubjectList.SUCCESS: ",o),1002===o.Code?n.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,n.getSubjectList(e)}):0!==o.Code?d.reject(o):d.resolve(o.Res)})},getComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,o=e.offset,a=void 0===o?1:o,m=e.limit,l=void 0===m?r.a.COMMENT_LIMIT:m,u=this,f={},p=void 0,h=r.a.COMMENT_UTL+"/v1/comment?";if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,u.getComments({subjectId:n,offset:a,limit:l})});s.a.log("MicroComment.getComments: ",n,a,l),f.appId=r.a.COMMENT_APPID,f.token=r.a.COMMENT_TOKEN,f.userId=parseInt(c.a.getters.userInfo.id)||0,f.subjectId=n,f.offset=a,f.limit=l;for(p in f)f.hasOwnProperty(p)&&(h+=p+"="+encodeURIComponent(f[p])+"&");return i.a.http.get(h).then(function(e){var t=e.data;return 1002===t.Code?u.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,u.getComments({subjectId:n,offset:a,limit:l})}):0!==t.Code?d.reject(t):d.resolve(t.Res)})},getCommentsReply:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,o=e.offset,a=void 0===o?1:o,m=e.limit,l=void 0===m?r.a.COMMENT_LIMIT:m,u=this,f={},p=void 0,h=r.a.COMMENT_UTL+"/v1/comment/list?";if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,u.getCommentsReply({subjectId:n,offset:a,limit:l})});s.a.log("MicroComment.getCommentsReply: ",n,a,l),f.appId=r.a.COMMENT_APPID,f.token=r.a.COMMENT_TOKEN,f.userId=parseInt(c.a.getters.userInfo.id)||0,f.subjectId=n,f.offset=a,f.limit=l;for(p in f)f.hasOwnProperty(p)&&(h+=p+"="+encodeURIComponent(f[p])+"&");return i.a.http.get(h).then(function(e){var t=e.data;return 1002===t.Code?u.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,u.getCommentsReply({subjectId:n,offset:a,limit:l})}):0!==t.Code?d.reject(t):d.resolve(t.Res)})},getPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,o=e.offset,a=void 0===o?1:o,m=e.limit,l=void 0===m?15:m,u=this,f={},p=void 0,h=r.a.COMMENT_UTL+"/v1/like?";if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,u.getPraise({subjectId:n,offset:a,limit:l})});s.a.log("MicroComment.getPraise: ",n,a,l),f.appId=r.a.COMMENT_APPID,f.token=r.a.COMMENT_TOKEN,f.userId=parseInt(c.a.getters.userInfo.id)||0,f.subjectId=n,f.offset=a,f.limit=l;for(p in f)f.hasOwnProperty(p)&&(h+=p+"="+encodeURIComponent(f[p])+"&");return i.a.http.get(h).then(function(e){var t=e.data;return 1002===t.Code?u.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,u.getPraise({subjectId:n,offset:a,limit:l})}):0!==t.Code?d.reject(t):d.resolve(t.Res)})},addPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.subjectId,n=void 0===t?0:t,o=e.toId,s=void 0===o?0:o,a=e.type,m=void 0===a?1:a,l=this,u=r.a.COMMENT_UTL+"/v1/like",f={};return r.a.COMMENT_TOKEN?(f.appId=r.a.COMMENT_APPID,f.token=r.a.COMMENT_TOKEN,f.subjectId=parseInt(n),f.userId=parseInt(c.a.getters.userInfo.id)||0,f.toId=parseInt(s),f.type=parseInt(m),i.a.http.post(u,f).then(function(e){var t=e.data;return 1002===t.Code?l.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,l.addPraise({subjectId:n,toId:s,type:m})}):0!==t.Code?d.reject(t):d.resolve(t.Res)})):this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,l.addPraise({subjectId:n,toId:s,type:m})})},delPraise:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cId,n=void 0===t?0:t,o=e.subjectId,s=void 0===o?0:o,a=e.userId,m=void 0===a?0:a,c=this,l=r.a.COMMENT_UTL+"/v1/like?",u={},f=void 0;if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,c.delPraise({cId:n,subjectId:s,userId:m})});u.appId=r.a.COMMENT_APPID,u.token=r.a.COMMENT_TOKEN,u.userId=parseInt(m),u.cId=parseInt(n),u.subjectId=parseInt(s);for(f in u)u.hasOwnProperty(f)&&(l+=f+"="+encodeURIComponent(u[f])+"&");return i.a.http.delete(l).then(function(e){var t=e.data;return 1002===t.Code?c.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,c.delPraise({cId:n,subjectId:s,userId:m})}):0!==t.Code?d.reject(t):d.resolve(t.Res)})},getUserComments:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userId,o=void 0===n?parseInt(c.a.getters.userInfo.id)||0:n,a=t.subjectId,m=void 0===a?0:a,l=t.page,u=void 0===l?1:l,f=t.pageNum,p=void 0===f?r.a.COMMENT_LIMIT:f;if(!o)return d.resolve([]);var h=r.a.COMMENT_UTL+"/v1/comment/user?",g={appId:r.a.COMMENT_APPID,token:r.a.COMMENT_TOKEN};if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,e.getUserComments({userId:o,subjectId:m,page:u,pageNum:p})});g.userId=parseInt(o),g.subjectId=parseInt(m),g.page=parseInt(u),g.pageNum=parseInt(p);for(var v in g)g.hasOwnProperty(v)&&(h+=v+"="+encodeURIComponent(g[v])+"&");return i.a.http.get(h).then(function(t){var n=t.data;return s.a.log("[comments].getSubjectList.SUCCESS: ",n),1002===n.Code?e.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,e.getUserComments({userId:o,subjectId:m,page:u,pageNum:p})}):0!==n.Code?d.reject(n):d.resolve(n.Res)})},getUserPrises:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userId,o=void 0===n?parseInt(c.a.getters.userInfo.id)||0:n,a=t.subjectId,m=void 0===a?0:a,l=t.page,u=void 0===l?1:l,f=t.pageNum,p=void 0===f?r.a.COMMENT_LIMIT:f;if(!o)return d.resolve([]);var h=r.a.COMMENT_UTL+"/v1/like/user?",g={appId:r.a.COMMENT_APPID,token:r.a.COMMENT_TOKEN};if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,e.getUserPrises({userId:o,subjectId:m,page:u,pageNum:p})});g.userId=parseInt(o),g.subjectId=parseInt(m),g.page=parseInt(u),g.pageNum=parseInt(p);for(var v in g)g.hasOwnProperty(v)&&(h+=v+"="+encodeURIComponent(g[v])+"&");return i.a.http.get(h).then(function(t){var n=t.data;return s.a.log("[comments].getSubjectList.SUCCESS: ",n),1002===n.Code?e.getToken().then(function(t){return r.a.COMMENT_TOKEN=t,e.getUserPrises({userId:o,subjectId:m,page:u,pageNum:p})}):0!==n.Code?d.reject(n):d.resolve(n.Res)})},getCommentsNum:function(e){var t=this,n=e.userId,o=void 0===n?parseInt(c.a.getters.userInfo.id)||0:n,a=e.subjectId,m=void 0===a?0:a,l=r.a.COMMENT_UTL+"/v1/comment/user/num?",u={appId:r.a.COMMENT_APPID,token:r.a.COMMENT_TOKEN};if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,t.getCommentsNum({userId:o,subjectId:m})});u.userId=parseInt(o),u.subjectId=parseInt(m);for(var f in u)u.hasOwnProperty(f)&&(l+=f+"="+encodeURIComponent(u[f])+"&");return i.a.http.get(l).then(function(e){var n=e.data;return s.a.log("[comments].getCommentsNum.SUCCESS: ",n),1002===n.Code?t.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,t.getCommentsNum({userId:o,subjectId:m})}):0!==n.Code?d.reject(n):d.resolve(n.Res)})},getPraisesNum:function(e){var t=this,n=e.userId,o=void 0===n?parseInt(c.a.getters.userInfo.id)||0:n,a=e.subjectId,m=void 0===a?0:a,l=r.a.COMMENT_UTL+"/v1/like/user/num?",u={appId:r.a.COMMENT_APPID,token:r.a.COMMENT_TOKEN};if(!r.a.COMMENT_TOKEN)return this.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,t.getPraisesNum({userId:o,subjectId:m})});u.userId=parseInt(o),u.subjectId=parseInt(m);for(var f in u)u.hasOwnProperty(f)&&(l+=f+"="+encodeURIComponent(u[f])+"&");return i.a.http.get(l).then(function(e){var n=e.data;return s.a.log("[comments].getPraisesNum.SUCCESS: ",n),1002===n.Code?t.getToken().then(function(e){return r.a.COMMENT_TOKEN=e,t.getPraisesNum({userId:o,subjectId:m})}):0!==n.Code?d.reject(n):d.resolve(n.Res)})}};t.a=l},300:function(e,t,n){n(310);var o=n(43)(n(305),n(312),null,null);e.exports=o.exports},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(46),i=n.n(o),r=n(79),s=n.n(r),a=n(27),m=n(280),c=n(26),d=n(78);n.n(d);t.default={name:"v-comment-bar",props:{id:{type:Number|String,default:0},value:{type:Object,default:function(){return{Tm:""}}},delTopicEnable:{type:Boolean,default:!1},delCommentEnable:{type:Boolean,default:!1},praiseEnable:{type:Boolean,default:!1},commentEnable:{type:Boolean,default:!1}},data:function(){return{comment:this.value||{}}},computed:s()({},n.i(d.mapState)({subjects:function(e){return e.comment.subjects},comments:function(e){return e.comment.comments},formatedCreateDt:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)?c.b(this.subjects[this.comment.Id].Tm):this.comments.hasOwnProperty(this.comment.CommentId)?c.b(this.comments[this.comment.CommentId].Tm):""},formatedPraiseNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeNum?this.subjects[this.comment.Id].LikeNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeNum?this.comments[this.comment.CommentId].LikeNum:"赞"},formatedCommentNum:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].CommentNum?this.subjects[this.comment.Id].CommentNum:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].CommentNum?this.comments[this.comment.CommentId].CommentNum:"评论"},formatedLikeFlag:function(e){return!this.comment.CommentId&&this.subjects.hasOwnProperty(this.comment.Id)&&this.subjects[this.comment.Id].LikeFlag?this.subjects[this.comment.Id].LikeFlag:this.comments.hasOwnProperty(this.comment.CommentId)&&this.comments[this.comment.CommentId].LikeFlag?this.comments[this.comment.CommentId].LikeFlag:0}}),{delTopicEnableTag:function(){return this.delTopicEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)},delCommentEnableTag:function(){return this.delCommentEnable&&parseInt(this.comment.UserId)===parseInt(this.$store.getters.userInfo.id)}}),watch:{value:function(e){this.comment=e},comment:function(e){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_COMMENT",i()(this.comment)):this.$store.commit("SET_COMMENT",i()(this.comment)),this.$emit("input",e)},"comment.LikeFlag":function(e){this.$emit("input",this.comment)}},mounted:function(){this.comment.CommentId||this.subjects.hasOwnProperty(this.comment.Id)?this.comments.hasOwnProperty(this.comment.CommentId)||this.$store.commit("SET_COMMENT",i()(this.comment)):this.$store.commit("SET_COMMENT",i()(this.comment))},methods:{togglePraise:function(e){var t=this;if(this.praiseEnable){e.stopPropagation();({}).userId=this.comment.UserId||0,this.comment.LikeFlag?m.a.delPraise({cId:this.comment.CommentId||0,subjectId:this.comment.Id,userId:a.a.loginData.userInfo.userId||0}).then(function(e){t.$set(t.comment,"LikeFlag",!1),t.$set(t.comment,"LikeNum",t.comment.LikeNum-1),t.$store.commit("DEL_PRAISE",t.comment)}).catch(function(e){t.$logger.error("delete praise error: ",e)}):m.a.addPraise({subjectId:this.comment.Id,toId:this.comment.CommentId||0,type:1}).then(function(e){t.$set(t.comment,"LikeFlag",!0),t.$set(t.comment,"LikeNum",t.comment.LikeNum+1),t.$store.commit("ADD_PRAISE",t.comment)}).catch(function(e){t.$logger.error("post praise error: ",e)})}},addComment:function(e){if(this.commentEnable){this.$logger.log("v-comment-bar.method.addComment..."),e.stopPropagation();var t=this.comment.CommentId?this.comment.Parent?this.comment.Parent:this.comment.CommentId:0,n=this.comment.CommentId?this.comment.UserId:0;this.$router.push({name:"comment-create",params:{id:this.comment.Id},query:{toid:this.comment.CommentId,touid:n,pid:t}})}},delTopic:function(){},delComment:function(){var e=this;m.a.delComment({subjectId:this.$route.params.id,commentId:this.comment.CommentId}).then(function(t){e.$logger.log("v-comment-bar.delComment.SUCCESS: ",t),e.$store.commit("DEL_COMMENT_NUM",{Id:e.comment.Id}),e.$emit("handle-del-comment",t)}).catch(function(t){e.$logger.error("v-comment-bar.delComment.ERROR: ",t)})}}}},308:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".v-comment-bar{padding:.48rem 0;background:#fff;-webkit-box-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:space-between;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.v-comment-bar,.v-comment-bar>div{display:-webkit-box;display:flex;display:-webkit-flex}.v-comment-bar>div{color:#8e8e93;-moz-flex-grow:0;-webkit-flex-grow:0;flex-grow:0;-webkit-box-flex:0;-webkit-flex-shrink:0;flex-shrink:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar>div:first-child{-moz-flex-grow:1;-webkit-flex-grow:1;flex-grow:1;-webkit-box-flex:1;-webkit-flex-shrink:1;flex-shrink:1}.v-comment-bar>div p{font-size:.32rem;line-height:.4rem}.v-comment-bar .v-comment-bar__dt{margin-left:.4rem;-webkit-flex-shrink:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-basis:auto;flex-basis:auto}.v-comment-bar .v-comment-bar__del{margin-left:.4rem;-webkit-flex-shrink:1;flex-shrink:1;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-flex-basis:auto;flex-basis:auto;color:#3395ff}.v-comment-bar .v-comment-bar__del p{display:inline}.v-comment-bar .icon{width:.4rem;height:.4rem;font-size:.4rem;margin-right:.13333rem}.v-comment-bar .icon.icon-heart-o{color:#fb434f}.v-comment-bar__dt{margin-left:.4rem}.v-comment-bar__praise{width:1.49333rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.v-comment-bar__praise .icon.done{-webkit-animation:shake .5s 1;animation:shake .5s 1}.v-comment-bar__praise .icon.cancel{-webkit-animation:shake2 .5s 1;animation:shake2 .5s 1}.v-comment-bar__praise.act{-webkit-animation:shake .1s 1;animation:shake .1s 1}@-webkit-keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@-webkit-keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}@keyframes shake2{0%{opacity:.5;filter:alpha(opacity=50);font-size:.32rem}10%{opacity:1;filter:alpha(opacity=100);font-size:.37333rem}20%{font-size:.38667rem}}.v-comment-bar__comment{width:1.49333rem;margin-right:.4rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}",""])},310:function(e,t,n){var o=n(308);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(161)("09bd6bba",o,!0)},312:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-comment"},[n("div",{staticClass:"v-comment-bar"},[n("div",[n("div",{staticClass:"v-comment-bar__dt"},[e._v(e._s(e._f("specialTime")(e.comment.Tm)))]),e._v(" "),e.delTopicEnableTag?n("div",{staticClass:"v-comment-bar__del"},[n("p",{on:{click:e.delTopic}},[e._v("删除主题")])]):e._e(),e._v(" "),e.delCommentEnableTag?n("div",{staticClass:"v-comment-bar__del"},[n("p",{on:{click:e.delComment}},[e._v("删除评论")])]):e._e()]),e._v(" "),n("div",{staticClass:"v-comment-bar__praise",on:{click:e.togglePraise}},[n("span",{class:["icon",{"icon-heart cancel":!e.formatedLikeFlag},{"icon-heart-o done":e.formatedLikeFlag}]}),e._v(" "),n("p",{domProps:{textContent:e._s(e.formatedPraiseNum)}})]),e._v(" "),n("div",{staticClass:"v-comment-bar__comment",on:{click:e.addComment}},[n("span",{staticClass:"icon icon-comment"}),e._v(" "),n("p",{domProps:{textContent:e._s(e.formatedCommentNum)}})])])])},staticRenderFns:[]}},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},props:{value:{type:Array,default:function(){return[]}},detail:{type:Object,default:function(){}},limit:{type:Number,default:5},totalShow:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},computed:{totalShowTag:function(){return this.totalShow&&this.currentValue.length>this.limit}},watch:{value:function(e){this.currentValue=e}},mounted:function(){},methods:{goReply:function(e){var t=e.CommentId?e.Parent?e.Parent:e.CommentId:0;this.totalShow?this.$router.push({name:"comment-create",params:{id:e.Id},query:{toid:e.CommentId,touid:e.UserId,pid:t}}):this.$router.replace({name:"comment-create",params:{id:e.Id},query:{toid:e.CommentId,touid:e.UserId,pid:t}})}}}},322:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,'.p-comments-reply{position:relative;background:#f6f6f6;margin:0 .4rem .4rem;padding:.21333rem}.p-comments-reply:before{width:0;height:0;content:"";display:block;position:absolute;top:-.10667rem;left:.26667rem;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:.16rem;border-color:#f6f6f6 transparent transparent #f6f6f6;border-style:solid;border-top-left-radius:.05333rem}.p-comments-reply__con{padding-bottom:.13333rem}.p-comments-reply__con .p-comments-reply__con-txt{font-size:.37333rem;line-height:.56rem}.p-comments-reply__con .p-comments-reply__con-txt span{font-size:.37333rem;line-height:.53333rem;color:#576b95}.p-comments-reply__con .p-comments-reply__con-tm{padding:0 .4rem .4rem 0;text-align:right}.p-comments-reply__total{font-size:.34667rem;color:#777e8c;letter-spacing:0;line-height:1;text-align:right;border-top:1px solid #d8d8d8;padding-top:.26667rem}.p-comments-reply.max{margin:.26667rem 0 0;padding:.4rem 0 0 1.33333rem;background:#fafafa;border-top:1px solid #d8d8d8;border-bottom:1px solid #d8d8d8}.p-comments-reply.max:before{border-color:#fff;box-shadow:1px 1px 0 0 #d8d8d8;top:-.16rem;left:1.33333rem}.p-comments-reply.max li{border-bottom:1px solid #d8d8d8}.p-comments-reply.max li:last-child{border:0}.p-comments-reply.max .p-comments-reply__con{padding-bottom:0}.p-comments-reply.max .p-comments-reply__con .p-comments-reply__con-txt{padding:.4rem .4rem .26667rem 0}',""])},325:function(e,t,n){var o=n(322);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(161)("153b0304",o,!0)},328:function(e,t,n){n(325);var o=n(43)(n(319),n(329),null,null);e.exports=o.exports},329:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentValue.length>0?n("div",{staticClass:"p-comments-reply",class:[{max:!e.totalShow}]},[n("ul",{staticClass:"p-comments-reply__con"},e._l(e.currentValue,function(t,o){return e.totalShow&&o<e.limit||!e.totalShow?n("li",[n("div",{staticClass:"p-comments-reply__con-txt",on:{click:function(n){e.goReply(t)}}},[n("span",[e._v(e._s(t.userInfo.title||""))]),e._v(" "),t.CtId!=e.detail.CommentId&&t.ToUserId?[e._v("回复"),n("span",[e._v(" @"+e._s(t.toUserInfo.title))])]:e._e(),e._v("\n                : "+e._s(t.Content||"")+"\n            ")],2),e._v(" "),e.totalShow?e._e():n("div",{staticClass:"p-comments-reply__con-tm"},[e._v(e._s(e._f("specialTime")(t.Tm)))])]):e._e()})),e._v(" "),e.totalShowTag?n("div",{staticClass:"p-comments-reply__total"},[e._t("total")],2):e._e()]):e._e()},staticRenderFns:[]}},487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(246),i=n.n(o),r=n(252),s=n.n(r),a=n(300),m=n.n(a),c=n(328),d=n.n(c);t.default={components:{vFeed:i.a,vText:s.a,pCommentsReply:d.a,vCommentBar:m.a},data:function(){return{detail:{userInfo:{}},comment:null,forumList:[]}},computed:{},created:function(){this.$logger.log("comment-info-replies.created... "),this.$root.currentComment||this.$router.go(-1),this.detail=this.$root.currentComment},activated:function(){},methods:{goReply:function(){this.$logger.log("@@@@@@@@@@@@@@@@@@@"),this.$router.replace({name:"comment-create",params:{id:this.detail.comment.Id},query:{toid:this.detail.comment.CommentId,touid:this.detail.comment.UserId,pid:this.detail.comment.CommentId}})}}}},493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(280);t.default={data:function(){return{commentNum:0,praiseNum:0}},mounted:function(){this.$logger.log("comment.mounted... "),this.init()},methods:{init:function(){var e=this;o.a.getCommentsNum({}).then(function(t){e.commentNum=t}),o.a.getPraisesNum({}).then(function(t){e.praiseNum=t})}}}},570:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".page-comment h2{margin-left:.4rem;line-height:1.06667rem}.page-comment .desc{height:.74667rem;font-size:.37333rem;line-height:.74667rem;padding-left:.4rem;color:#777e8c;background:#f2f2f4}.page-comment ul li{width:100%;height:1.33333rem;padding:0 .4rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid #dddee3}.page-comment ul li img{width:.8rem;height:.8rem;-webkit-box-flex:0;-webkit-flex:0 0 auto;flex:0 0 auto}.page-comment ul li p{width:auto;font-size:.48rem;padding-left:.21333rem;-webkit-box-flex:1;-webkit-flex:1 1 auto;flex:1 1 auto}",""])},665:function(e,t,n){t=e.exports=n(160)(),t.push([e.i,".page-comment-info-replies{padding-bottom:1.33333rem;overflow:auto}.page-comment-info-replies ul.end{border-bottom:.26667rem solid #f2f2f4}.page-comment-info-replies .v-scroll-container{height:auto!important;overflow:initial!important}",""])},689:function(e,t,n){var o=n(570);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(161)("163da5cc",o,!0)},784:function(e,t,n){var o=n(665);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(161)("15a374d8",o,!0)},851:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page page-comment"},[n("h2",[e._v("微服务-评论点赞 示例")]),e._v(" "),n("ul",[n("router-link",{attrs:{to:{path:"/comment-list",query:{subjectId:52}},tag:"li"}},[n("p",[e._v("主题列表（普通样式）")]),e._v(" "),n("i",{staticClass:"icon icon-arrow-r v-label__arrow"})]),e._v(" "),n("router-link",{attrs:{to:{path:"/comment-list-reply",query:{subjectId:52}},tag:"li"}},[n("p",[e._v("主题列表（爬楼样式）")]),e._v(" "),n("i",{staticClass:"icon icon-arrow-r v-label__arrow"})]),e._v(" "),n("router-link",{attrs:{to:{path:"/comment-comments",query:{subjectId:52}},tag:"li"}},[n("p",[e._v("我的评论（评论数："+e._s(e.commentNum)+"）")]),e._v(" "),n("i",{staticClass:"icon icon-arrow-r v-label__arrow"})]),e._v(" "),n("router-link",{attrs:{to:{path:"/comment-praises",query:{subjectId:52}},tag:"li"}},[n("p",[e._v("我的点赞（点赞数："+e._s(e.praiseNum)+"）")]),e._v(" "),n("i",{staticClass:"icon icon-arrow-r v-label__arrow"})])],1)])},staticRenderFns:[]}},946:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page page-comment-info-replies"},[n("ul",[n("li",[n("div",{staticClass:"info",on:{click:e.goReply}},[n("v-feed",{attrs:{feedId:e.detail.userInfo.feedId,imgUrl:e.detail.userInfo.avatarId,title:e.detail.userInfo.title,subtitle:e.detail.userInfo.subtitle,desc:e._f("specialTime")(parseInt(e.detail.addtm)),classes:"title small no-border"}}),e._v(" "),n("v-text",{attrs:{value:e.detail.comment.Content}})],1)])]),e._v(" "),n("p-comments-reply",{attrs:{detail:e.detail.comment},model:{value:e.detail.replies,callback:function(t){e.$set(e.detail,"replies",t)},expression:"detail.replies"}})],1)},staticRenderFns:[]}}});