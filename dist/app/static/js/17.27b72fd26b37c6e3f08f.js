(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"2xt5":function(t,e,i){},"5+sV":function(t,e,i){},"Ez9+":function(t,e,i){"use strict";var r=i("QbLZ"),n=i.n(r),s=i("i7/w"),a=i.n(s),l=i("XPLT"),o=i("WIBD"),u="@@vRefresh",c=function(t){for(var e=t.parentNode;e;){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},h=function(t,e){var i=void 0,r=void 0,n=void 0,s=void 0,a=void 0,l=function(){t.apply(s,a),r=i};return function(){if(s=this,a=arguments,i=Date.now(),n&&(clearTimeout(n),n=null),r){var t=e-(i-r);t<0?l():n=setTimeout(function(){l()},t)}else l()}},f=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},v=function(){if(!this.binded){this.binded=!0;var t=this.el;this.pullEventTarget=t,this.pullStartListener=h(d.bind(this),50),this.pullingListener=h(g.bind(this),10),this.pullEndListener=h(m.bind(this),50),this.pullEventTarget.addEventListener("touchstart",this.pullStartListener,!1),this.pullEventTarget.addEventListener("touchmove",this.pullingListener,!1),this.pullEventTarget.addEventListener("touchend",this.pullEndListener,!1)}},d=function(t){this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.startScrollTop=f(this.pullEventTarget),this.pulling=!0},g=function(t){var e=this;if(this.pulling){if(this.startY<this.el.getBoundingClientRect().top&&this.startY>this.el.getBoundingClientRect().bottom)return!0;this.currentX=t.touches[0].clientX,this.currentY=t.touches[0].clientY,this.direction=this.currentY-this.startY>0&&Math.abs(this.currentY-this.startY)>Math.abs(this.currentX-this.startX)?"down":"up";var i=f(this.pullEventTarget),r=this.el.getAttribute("refresh-translate"),n=this.currentY-this.startY;"down"===this.direction&&i<10&&t.preventDefault(),"down"===this.direction&&0===i&&this.expression?(t.preventDefault(),t.stopPropagation(),this.vm[r]=n-this.startScrollTop,this.vm[r]<0&&(this.vm[r]=0),this.vm[r]>30&&(this.vm.refreshTag=!0),this.vm[r]>=this.vm.refreshHeight&&(this.vm[r]=this.vm.refreshHeight+(this.vm[r]-this.vm.refreshHeight)/10)):m.call(this,t),this.touching=!0,setTimeout(function(){e.touching&&m.call(e,t)},500),setTimeout(function(){e.touching=!1},600)}},m=function(t){console.log("[v-refresh].pullEnd: ",this.direction);var e=f(this.pullEventTarget),i=this.el.getAttribute("refresh-translate");"down"===this.direction&&0===e&&this.expression?(this.vm[i]>=this.vm.refreshHeight&&(this.vm[i]=this.vm.refreshHeight),this.expression()):this.vm[i]=0,this.direction="",this.pulling=!1,this.vm.refreshTag=!1},p={bind:function(t,e,i){t[u]={el:t,vm:i.context,expression:e.value};var r=arguments;t[u].vm.$on("hook:mounted",function(){t[u].vm.$nextTick(function(){c(t)?v.call(t[u],r):(t[u].bindTryCount=0,function e(){t[u].bindTryCount>10||(t[u].bindTryCount++,c(t)?v.call(t[u],r):setTimeout(e,50))}())})})},unbind:function(t){t[u].pullEventTarget.removeEventListener("touchstart",t[u].pullStartListener),t[u].pullEventTarget.removeEventListener("touchmove",t[u].pullingListener),t[u].pullEventTarget.removeEventListener("touchend",t[u].pullEndListener)}},b=function(t){t.directive("Refresh",p)};!a.a.prototype.$isServer&&window.Vue&&(window.refresh=p,a.a.use(b)),p.install=b;var _=p,w=i("ywuS");a.a.use(_);var T={name:"v-refresh",props:{func:Function,toper:{type:Boolean,default:!1},value:{type:Number,default:0},swipeLength:{type:Number,default:1}},components:{vSpinner:l.a},data:function(){return{uid:this._uid,currentValue:this.value,refreshTag:!1,startY:0,startScrollTop:0,direction:"",translate:0,refreshHeight:0,refreshTranslate:0,pullTarget:null}},computed:n()({},Object(o.mapState)({position:function(t){return t.status.position}}),{timestamp:function(){return this.$route.query.timestamp||-1}}),watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t)},translate:function(t){t>=this.refreshHeight?this.refreshTranslate=0:this.refreshTranslate=t-this.refreshHeight},refreshTag:function(t){this.$emit("handleRefreshTag",t)}},created:function(){this.$logger.log("v-refresh."+this._uid+".created...",this.$route),this.$route.meta&&this.$route.meta.keepAlive||this.init()},mounted:function(){this.$logger.log("v-refresh."+this._uid+".mounted...")},activated:function(){this.$logger.log("*[v-refresh]."+this._uid+".activated...",this._inactive),this.$router.direct()&&this.init()},deactivated:function(){this.$logger.log("*[v-refresh]."+this._uid+".deactivated...",this._inactive),this.isEnabled=!1},methods:{reset:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resetData},init:function(){var t=this;this.$logger.log("v-refresh."+this._uid+".init..."),this.$nextTick(function(){t.refreshHeight=36*window.lib.flexible.dpr})},inertia:function(t){var e=this,i=Date.now();setTimeout(function r(){var n=Date.now(),s=t/(n-i)/.09;e.refreshTag||0===Math.floor(s)?e.translate=0:(e.translate=s,setTimeout(r,10))},10)},refresh:function(){var t=this;if(this.$logger.log("v-refresh."+this._uid+".refresh.befor: "),"function"==typeof this.func){this.refreshTag=!0;try{this.func().then(function(e){w.a.$emit("v-scroll.refreshList"),t.refreshTag=!1,t.inertia(t.translate),t.$logger.log("v-refresh."+t._uid+".refresh.after: ")}).catch(function(e){t.refreshTag=!1,t.inertia(t.translate),t.$logger.error("v-refresh."+t._uid+".refresh.after.error: "+e)})}catch(t){this.refreshTag=!1,this.inertia(this.translate),this.$logger.error("v-refresh."+this._uid+".refresh.after.error: "+t)}}else w.a.$emit("v-scroll.refreshList"),this.refreshTag=!1,this.inertia(this.translate)}}},$=(i("K5iD"),i("KHd+")),L=Object($.a)(T,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-refresh",attrs:{id:"vRefresh_"+t._uid}},[i("div",{directives:[{name:"refresh",rawName:"v-refresh",value:t.refresh,expression:"refresh"},{name:"scroll-position",rawName:"v-scroll-position"}],ref:"container",staticClass:"v-refresh__container",attrs:{tag:"div","refresh-enabled":"refreshTag","refresh-translate":"translate"}},[i("transition",{attrs:{name:"slide-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.refreshTag,expression:"refreshTag"}],staticClass:"v-refresh__spinner",style:[{transform:"translate3d(0, "+t.refreshTranslate+"px, 0)"},{"-webkit-transform":"translate3d(0, "+t.refreshTranslate+"px, 0)"}],attrs:{id:"vRefresher"+t._uid}},[i("v-spinner",{attrs:{color:"#BBBAC2",type:"triple-bounce"}})],1)]),t._v(" "),i("div",{ref:"content",staticClass:"v-refresh__content",style:[{transform:t.translate?"translate3d(0, "+t.translate+"px, 0)":""},{"-webkit-transform":t.translate?"translate3d(0, "+t.translate+"px, 0)":""}]},[t._t("default")],2)],1)])},[],!1,null,null,null);e.a=L.exports},K5iD:function(t,e,i){"use strict";var r=i("5+sV");i.n(r).a},KYKv:function(t,e,i){"use strict";var r=i("TZWI");i.n(r).a},SvQ8:function(t,e,i){"use strict";var r=i("z+jy");i.n(r).a},TZWI:function(t,e,i){},UTlA:function(t,e,i){"use strict";var r={name:"v-swipe-label",props:{id:String,fixed:{type:Boolean,default:!1},showBottomLine:{type:Boolean,default:!1},dark:{type:Boolean,default:!1}},data:function(){return{position:0,isSticky:!1,isFixed:!1,floatClass:"",startX:0,lastX:0,lastMoveTime:0,lastMoveStart:0,stopMovingTag:!1,minl:0,maxl:-8e3,conStyle:{left:"0px"},left:0}},computed:{oh:function(){return this.$el.getBoundingClientRect().top}},watch:{"$route.name":function(t){this.fixed&&(this._inactive?(this.$logger.log("v-swipe-label.watch.back..."),window.removeEventListener("scroll",this.scrollHandle)):(this.$logger.log("v-swipe-label.watch.in..."),window.addEventListener("scroll",this.scrollHandle)))}},created:function(){this.$logger.log("v-swipe-label created...")},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},methods:{init:function(){this.maxl=-(this.$refs.content.offsetWidth-this.$refs.container.offsetWidth),this.fixed&&(this.getScrollEventTarget(this.$el).addEventListener("scroll",this.throttle(this.scrollHandle,10)),this.position=this.$el.getBoundingClientRect().top)},throttle:function(t,e){var i=void 0,r=void 0,n=void 0,s=void 0,a=void 0,l=function(){t.apply(s,a),r=i};return function(){if(s=this,a=arguments,i=Date.now(),n&&(clearTimeout(n),n=null),r){var t=e-(i-r);t<0?l():n=setTimeout(function(){l()},t)}else l()}},getScrollEventTarget:function(t){for(var e=t;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType;){var i=document.defaultView.getComputedStyle(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window}}},n=(i("h6FD"),i("KHd+")),s=Object(n.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:["v-swipe-label",{dark:this.dark}]},[e("div",{ref:"container",staticClass:"v-swipe-label__container",on:{touchmove:function(t){t.stopPropagation()},touchend:function(t){t.stopPropagation()}}},[e("div",{ref:"content",staticClass:"v-swipe-label__content",style:{left:this.left+"px"}},[this._t("default")],2),this._v(" "),this.showBottomLine?e("p",{staticClass:"line"}):this._e()])])},[],!1,null,null,null);e.a=s.exports},h6FD:function(t,e,i){"use strict";var r=i("2xt5");i.n(r).a},hJv0:function(t,e,i){},"i+h+":function(t,e,i){"use strict";var r=i("YJXF"),n={name:"v-album",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{currentValue:this.value,images:[]}},computed:{formatedValues:function(){return this.currentValue.forEach(function(t,e){t.formatedUrl=r.m(t.url)}),this.currentValue},albumClass:function(){var t="";return this.currentValue.length<1?t:(t=this.currentValue.length>3?"more":this.currentValue.length>2?"three":this.currentValue.length>1?"two":"one",t+=this.currentValue[0].width>=this.currentValue[0].height?" v":" h")}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.initImages()}},created:function(){this.initImages()},methods:{initImages:function(){var t=this;this.images=[],this.currentValue.forEach(function(e){t.images.push({src:e.url||e.src,w:e.width||e.w,h:e.height||e.h})})},handleClick:function(t,e){var i;(i=this.$logger).log.apply(i,["v-album.handleClick: "].concat(Array.prototype.slice.call(arguments))),this.$emit.apply(this,["click"].concat(Array.prototype.slice.call(arguments)))},goViewer:function(t){var e=this;this.$logger.log("v-album.goViewer: ",t),this.$root.pages=[],this.currentValue.forEach(function(t,i){e.$root.pages.push(t.url)}),this.$logger.log(this.$root.pages,"---------v-album"),this.$root.sliderinit={currentPage:t},this.$router.push({name:"viewer"})}}},s=(i("KYKv"),i("KHd+")),a=Object(s.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["v-album",t.albumClass]},t._l(t.formatedValues,function(e,r){return r<3?i("div",{key:r,staticClass:"v-album__frm",style:{backgroundImage:"url("+e.formatedUrl+")",backgroundSize:"cover"},on:{click:function(e){t.handleClick(e,r)}}},[2===r&&t.currentValue.length>3?i("div",{staticClass:"v-album__mask"}):t._e(),t._v(" "),2===r&&t.currentValue.length>3?i("div",{staticClass:"v-album__num"},[t._v(t._s(t.currentValue.length-3)+"+")]):t._e()]):t._e()}))},[],!1,null,null,null);e.a=a.exports},mjyF:function(t,e,i){"use strict";i.r(e);var r=i("4d7F"),n=i.n(r),s=i("QbLZ"),a=i.n(s),l=i("626b"),o=i("Ez9+"),u=i("mYNw"),c=i("iQJk"),h=i("1MEp"),f=i("WIBD"),v={components:{vRefresh:o.a,vScroll:u.a,vFeed:c.a,vText:h.a},data:function(){return{info:"",listData:[],isMounted:!1}},computed:a()({},Object(f.mapGetters)(["userInfo","follows"])),watch:{"$root._isMounted":function(t){this.isMounted=t}},mounted:function(){this.$logger.log("refresh.mounted... ")},activated:function(){this.$logger.log("refresh.activated... "),this.$router.direct()&&this.init()},methods:{init:function(){var t=this;return this.$logger.log("refresh.init..."),l.d({delay:500}).then(function(e){return t.info=e,n.a.resolve(e)})},getList:function(t){var e=t.offset,i=t.limit;return l.i({offset:e,limit:i})},goDetail:function(t){this.$logger.log("refresh.goDetail:",t),this.$router.push({name:"refresh-two"})}}},d=(i("SvQ8"),i("KHd+")),g=Object(d.a)(v,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page page-refresh"},[i("v-refresh",{attrs:{func:t.init}},[i("h2",[t._v("下拉刷新 考样例")]),t._v(" "),i("div",{staticClass:"attributes"},[i("h2",[t._v("API")]),t._v(" "),i("table",[i("tr",[i("th",[t._v("参数")]),i("th",[t._v("说明")]),i("th",[t._v("类型")]),i("th",[t._v("可选")]),i("th",[t._v("默认")])]),t._v(" "),i("tr",[i("td",[t._v("func")]),i("td",[t._v("数据更新函数，如果是详情页面，可把接口执行函数写在此函数中，组件下拉时会拉取刷新数据。如果不传，也会显示下拉动画。"),i("br"),t._v("如果套了滚动条组件，这里不用指定，下拉时会通知滚动组件进行分页拉取。")]),i("td",[t._v("Function")]),i("td",[t._v("-")]),i("td",[t._v("-")])])])]),t._v(" "),i("p",{staticClass:"desc"}),t._v(" "),i("div",{staticClass:"page-refresh__header"},[t._v(t._s(t._f("specialTime")(t.info)))]),t._v(" "),i("v-scroll",{attrs:{func:t.getList,"func-type":"section"},model:{value:t.listData,callback:function(e){t.listData=e},expression:"listData"}},[i("ul",t._l(t.listData,function(e,r){return i("li",{key:r,on:{click:function(i){t.goDetail(e)}}},[i("v-feed",{attrs:{feedId:e.userInfo.feedId,imgUrl:e.userInfo.avatar,title:e.userInfo.title,subtitle:e.userInfo.subtitle,classes:"title small no-border"}}),t._v(" "),i("v-text",{attrs:{classes:"content",value:e.title}})],1)}))])],1)],1)},[],!1,null,null,null);e.default=g.exports},nWNw:function(t,e,i){"use strict";var r=i("hJv0");i.n(r).a},rYkL:function(t,e,i){"use strict";i.r(e);var r=i("4d7F"),n=i.n(r),s=i("QbLZ"),a=i.n(s),l=i("Ez9+"),o=i("mYNw"),u=i("iQJk"),c=i("1MEp"),h=i("626b"),f=i("WIBD"),v=i("UTlA"),d=i("i+h+"),g={components:{vRefresh:l.a,vScroll:o.a,vFeed:u.a,vText:c.a,vSwipeLabel:v.a,vAlbum:d.a},data:function(){return{info:"",labs:[{id:0,txt:"菜单一"},{id:1,txt:"菜单二"}],currentLab:0,listData:[],listDataSec:[]}},computed:a()({},Object(f.mapGetters)(["userInfo","follows"])),mounted:function(){this.$logger.log("refresh-two.mounted... "),this.init()},activated:function(){this.$router.direct()&&this.init()},methods:{init:function(){var t=this;return this.$logger.log("refresh-two.init..."),h.d({delay:500}).then(function(e){return t.info=e,n.a.resolve(e)})},clickLabel:function(t){this.currentLab=t.id},getList:function(t){var e=t.offset,i=t.limit;return h.f({offset:e,limit:i})},getListSec:function(t){var e=t.offset,i=t.limit;return h.i({offset:e,limit:i})}}},m=(i("nWNw"),i("KHd+")),p=Object(m.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page page-refresh-two"},[i("v-refresh",{attrs:{func:t.init,swipeLength:t.labs.length},model:{value:t.currentLab,callback:function(e){t.currentLab=e},expression:"currentLab"}},[i("h2",[t._v("样例")]),t._v(" "),i("div",{staticClass:"page-refresh__header"},[t._v(t._s(t._f("specialTime")(t.info)))]),t._v(" "),i("v-swipe-label",{attrs:{fixed:!0}},t._l(t.labs,function(e,r){return i("div",{key:r,class:["itm",{cur:t.currentLab==e.id}],on:{click:function(i){t.clickLabel(e)}}},[t._v(t._s(e.txt))])})),t._v(" "),i("v-scroll",{attrs:{func:t.getList,"func-type":"section",enabled:0===t.currentLab},model:{value:t.listData,callback:function(e){t.listData=e},expression:"listData"}},[i("ul",t._l(t.listData,function(e,r){return i("li",{key:r},[i("v-feed",{attrs:{feedId:e.userInfo.feedId,imgUrl:e.userInfo.avatarId,title:e.userInfo.title,subtitle:e.userInfo.subtitle,classes:"title small no-border"}}),t._v(" "),i("v-text",{attrs:{classes:"content",value:e.content.content}}),t._v(" "),i("v-album",{model:{value:e.content.imgObjects,callback:function(i){t.$set(e.content,"imgObjects",i)},expression:"item.content.imgObjects"}})],1)}))]),t._v(" "),i("v-scroll",{attrs:{func:t.getListSec,"func-type":"section",enabled:1===t.currentLab},model:{value:t.listDataSec,callback:function(e){t.listDataSec=e},expression:"listDataSec"}},[i("ul",t._l(t.listDataSec,function(e,r){return i("li",{key:r},[i("v-feed",{attrs:{feedId:e.userInfo.feedId,imgUrl:e.userInfo.avatar,title:e.userInfo.title,subtitle:e.userInfo.subtitle,classes:"title small no-border"}}),t._v(" "),i("v-text",{attrs:{classes:"content",value:e.title}})],1)}))])],1)],1)},[],!1,null,null,null);e.default=p.exports},"z+jy":function(t,e,i){}}]);
//# sourceMappingURL=17.27b72fd26b37c6e3f08f.js.map